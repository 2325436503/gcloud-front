import{aV as getDefaultExportFromCjs,d as defineComponent,a0 as defineAsyncComponent,a1 as __vitePreload,r as ref,Z as toRefs,S as openBlock,$ as createBlock,W as withCtx,V as createVNode,X as unref,Y as createTextVNode,a5 as toDisplayString,a4 as createBaseVNode,b4 as _export_sfc,bc as reactive,a3 as storeToRefs,U as createElementBlock,a6 as createCommentVNode,P as withDirectives,Q as vShow,b7 as withModifiers}from"./index.af57445c.js";import{a as useFileOutsideStore,u as useFiles}from"./robot.97cc1244.js";import{t as transformSize,_ as _sfc_main$2}from"./index.f31c340f.js";import{e as onError,a as NButton,o as onInfo}from"./index.04c61e6b.js";import{N as NTag}from"./Tag.1b72b5af.js";import{N as NCard}from"./Card.c58ce979.js";import{F as Folder}from"./Folder.191c0997.js";import{D as DocumentTextOutline,F as FileTraySharp}from"./FileTraySharp.6bcdae8e.js";import{e as NImage,N as NPopover,g as NScrollbar}from"./Scrollbar.0a2e91cc.js";import{N as NSkeleton}from"./Skeleton.73fbb1d6.js";import"./date.454365cc.js";import"./color-to-class.0332f98b.js";import"./index.a1c9fab8.js";import"./Eye.6d434294.js";var cosJsSdkV5={exports:{}};(function(module,exports){(function(m,i){module.exports=i()})(window,function(){return function(d){var m={};function i(g){if(m[g])return m[g].exports;var n=m[g]={i:g,l:!1,exports:{}};return d[g].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=d,i.c=m,i.d=function(g,n,$){i.o(g,n)||Object.defineProperty(g,n,{enumerable:!0,get:$})},i.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},i.t=function(g,n){if(n&1&&(g=i(g)),n&8||n&4&&typeof g=="object"&&g&&g.__esModule)return g;var $=Object.create(null);if(i.r($),Object.defineProperty($,"default",{enumerable:!0,value:g}),n&2&&typeof g!="string")for(var E in g)i.d($,E,function(j){return g[j]}.bind(null,E));return $},i.n=function(g){var n=g&&g.__esModule?function(){return g.default}:function(){return g};return i.d(n,"a",n),n},i.o=function(g,n){return Object.prototype.hasOwnProperty.call(g,n)},i.p="/dist/",i(i.s="./index.js")}({"./index.js":function(d,m,i){var g=i("./src/cos.js");d.exports=g},"./lib/beacon.min.js":function(d,m,i){(function(g){var n,$,E=i("./node_modules/@babel/runtime/helpers/typeof.js");(function(j,Y){E(m)=="object"&&typeof d<"u"?d.exports=Y():(n=Y,$=typeof n=="function"?n.call(m,i,m,d):n,$!==void 0&&(d.exports=$))})(this,function(){var j=function(u,v){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,y){s.__proto__=y}||function(s,y){for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(s[A]=y[A])})(u,v)},Y=function(){return(Y=Object.assign||function(u){for(var v,s=1,y=arguments.length;s<y;s++)for(var A in v=arguments[s])Object.prototype.hasOwnProperty.call(v,A)&&(u[A]=v[A]);return u}).apply(this,arguments)};function D(x,u,v,s){return new(v||(v=Promise))(function(y,A){function P(Ce){try{ne(s.next(Ce))}catch(X){A(X)}}function te(Ce){try{ne(s.throw(Ce))}catch(X){A(X)}}function ne(Ce){var X;Ce.done?y(Ce.value):(X=Ce.value,X instanceof v?X:new v(function(_e){_e(X)})).then(P,te)}ne((s=s.apply(x,u||[])).next())})}function b(x,u){var v,s,y,A,P={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function te(ne){return function(Ce){return function(X){if(v)throw new TypeError("Generator is already executing.");for(;P;)try{if(v=1,s&&(y=2&X[0]?s.return:X[0]?s.throw||((y=s.return)&&y.call(s),0):s.next)&&!(y=y.call(s,X[1])).done)return y;switch(s=0,y&&(X=[2&X[0],y.value]),X[0]){case 0:case 1:y=X;break;case 4:return P.label++,{value:X[1],done:!1};case 5:P.label++,s=X[1],X=[0];continue;case 7:X=P.ops.pop(),P.trys.pop();continue;default:if(y=P.trys,!((y=y.length>0&&y[y.length-1])||X[0]!==6&&X[0]!==2)){P=0;continue}if(X[0]===3&&(!y||X[1]>y[0]&&X[1]<y[3])){P.label=X[1];break}if(X[0]===6&&P.label<y[1]){P.label=y[1],y=X;break}if(y&&P.label<y[2]){P.label=y[2],P.ops.push(X);break}y[2]&&P.ops.pop(),P.trys.pop();continue}X=u.call(x,P)}catch(_e){X=[6,_e],s=0}finally{v=y=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([ne,Ce])}}}var M="__BEACON_",J="__BEACON_deviceId",Q="last_report_time",F="sending_event_ids",L="beacon_config",re="beacon_config_request_time",G=function(){function x(){var u=this;this.emit=function(v,s){if(u){var y,A=u.__EventsList[v];if(A!=null&&A.length){A=A.slice();for(var P=0;P<A.length;P++){y=A[P];try{var te=y.callback.apply(u,[s]);if(y.type===1&&u.remove(v,y.callback),te===!1)break}catch(ne){throw ne}}}return u}},this.__EventsList={}}return x.prototype.indexOf=function(u,v){for(var s=0;s<u.length;s++)if(u[s].callback===v)return s;return-1},x.prototype.on=function(u,v,s){if(s===void 0&&(s=0),this){var y=this.__EventsList[u];if(y||(y=this.__EventsList[u]=[]),this.indexOf(y,v)===-1){var A={name:u,type:s||0,callback:v};return y.push(A),this}return this}},x.prototype.one=function(u,v){this.on(u,v,1)},x.prototype.remove=function(u,v){if(this){var s=this.__EventsList[u];if(!s)return null;if(!v){try{delete this.__EventsList[u]}catch{}return null}if(s.length){var y=this.indexOf(s,v);s.splice(y,1)}return this}},x}();function ke(x,u){for(var v={},s=0,y=Object.keys(x);s<y.length;s++){var A=y[s],P=x[A];if(typeof P=="string")v[N(A)]=N(P);else{if(u)throw new Error("value mast be string  !!!!");v[N(String(A))]=N(String(P))}}return v}function N(x){if(typeof x!="string")return x;try{return x.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch{return""}}function k(x){return String(x.A99)+String(x.A100)}var p=function(){},_=function(){function x(u){var v=this;this.lifeCycle=new G,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(s){if(!s||!s.reduce||!s.length)throw new TypeError("createPipeline \u65B9\u6CD5\u9700\u8981\u4F20\u5165\u81F3\u5C11\u6709\u4E00\u4E2A pipe \u7684\u6570\u7EC4");return s.length===1?function(y,A){s[0](y,A||p)}:s.reduce(function(y,A){return function(P,te){return te===void 0&&(te=p),y(P,function(ne){return A==null?void 0:A(ne,te)})}})}([function(s){v.send({url:v.strategy.getUploadUrl(),data:s,method:"post",contentType:"application/json;charset=UTF-8"},function(){var y=v.config.onReportSuccess;typeof y=="function"&&y(JSON.stringify(s.events))},function(){var y=v.config.onReportFail;typeof y=="function"&&y(JSON.stringify(s.events))})}]),function(s,y){if(!s)throw y instanceof Error?y:new Error(y)}(Boolean(u.appkey),"appkey must be initial"),this.config=Y({},u)}return x.prototype.onUserAction=function(u,v){this.preReport(u,v,!1)},x.prototype.onDirectUserAction=function(u,v){this.preReport(u,v,!0)},x.prototype.preReport=function(u,v,s){u?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(u)||this.strategy.isSampleEvent(u)||this.onReport(u,v,s)):this.errorReport.reportError("602"," no eventCode")},x.prototype.addAdditionalParams=function(u){for(var v=0,s=Object.keys(u);v<s.length;v++){var y=s[v];this.additionalParams[y]=u[y]}},x.prototype.setChannelId=function(u){this.commonInfo.channelID=String(u)},x.prototype.setOpenId=function(u){this.commonInfo.openid=String(u)},x.prototype.setUnionid=function(u){this.commonInfo.unid=String(u)},x.prototype.getDeviceId=function(){return this.commonInfo.deviceId},x.prototype.getCommonInfo=function(){return this.commonInfo},x.prototype.removeSendingId=function(u){try{var v=JSON.parse(this.storage.getItem(F)),s=v.indexOf(u);s!=-1&&(v.splice(s,1),this.storage.setItem(F,JSON.stringify(v)))}catch{}},x}(),h=function(){function x(u,v,s,y){this.requestParams={},this.network=y,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=u.appkey,this.requestParams.platform=s,this.requestParams.uin=v.deviceId,this.requestParams.model="",this.requestParams.os=s,this.requestParams.app_version=u.appVersion,this.requestParams.sdk_version=v.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=u.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return x.prototype.reportError=function(u,v){this.requestParams._dc=Math.random(),this.requestParams.error_msg=v,this.requestParams.error_code=u,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(s){})},x}(),K=function(){function x(u,v,s,y){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.appkey=u.appkey,this.storage=s;try{var A=JSON.parse(this.storage.getItem(L));A&&this.processData(A)}catch{}u.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!u.isOversea&&this.needRequestConfig()&&this.requestConfig(u.appVersion,v,y)}return x.prototype.requestConfig=function(u,v,s){var y=this;this.storage.setItem(re,Date.now().toString()),s.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx>"u"?"3":"4",mainAppKey:this.appkey,appVersion:u,sdkVersion:v.sdkVersion,osVersion:v.userAgent,model:"",packageName:"",params:{A3:v.deviceId}}).then(function(A){if(A.data.ret==0)try{var P=JSON.parse(A.data.beaconConfig);P&&(y.processData(P),y.storage.setItem(L,A.data.beaconConfig))}catch{}else y.processData(null),y.storage.setItem(L,"")}).catch(function(A){})},x.prototype.processData=function(u){var v,s,y,A,P;this.strategy.isEventUpOnOff=(v=u==null?void 0:u.isEventUpOnOff)!==null&&v!==void 0?v:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(s=u==null?void 0:u.httpsUploadUrl)!==null&&s!==void 0?s:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(y=u==null?void 0:u.requestInterval)!==null&&y!==void 0?y:this.strategy.requestInterval,this.strategy.blacklist=(A=u==null?void 0:u.blacklist)!==null&&A!==void 0?A:this.strategy.blacklist,this.strategy.samplelist=(P=u==null?void 0:u.samplelist)!==null&&P!==void 0?P:this.strategy.samplelist;for(var te=0,ne=this.strategy.samplelist;te<ne.length;te++){var Ce=ne[te].split(",");Ce.length==2&&(this.realSample[Ce[0]]=Ce[1])}},x.prototype.needRequestConfig=function(){var u=Number(this.storage.getItem(re));return Date.now()-u>60*this.strategy.requestInterval*1e3},x.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},x.prototype.isBlackEvent=function(u){return this.strategy.blacklist.indexOf(u)!=-1},x.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},x.prototype.isSampleEvent=function(u){return!!Object.prototype.hasOwnProperty.call(this.realSample,u)&&this.realSample[u]<Math.floor(Math.random()*Math.floor(1e4))},x}(),I="session_storage_key",H=function(){function x(u,v,s){this.beacon=s,this.storage=u,this.duration=v,this.appkey=s.config.appkey}return x.prototype.getSession=function(){var u=this.storage.getItem(I);if(!u)return this.createSession();var v="",s=0;try{var y=JSON.parse(u)||{sessionId:void 0,sessionStart:void 0};if(!y.sessionId||!y.sessionStart)return this.createSession();var A=Number(this.storage.getItem(Q));if(Date.now()-A>this.duration)return this.createSession();v=y.sessionId,s=y.sessionStart}catch{}return{sessionId:v,sessionStart:s}},x.prototype.createSession=function(){var u=Date.now(),v={sessionId:this.appkey+"_"+u.toString(),sessionStart:u};this.storage.setItem(I,JSON.stringify(v)),this.storage.setItem(Q,u.toString());var s="is_new_user",y=this.storage.getItem(s);return this.beacon.onDirectUserAction("rqd_applaunched",{A21:y?"N":"Y"}),this.storage.setItem(s,JSON.stringify(!1)),v},x}();function Se(){var x=navigator.userAgent,u=x.indexOf("compatible")>-1&&x.indexOf("MSIE")>-1,v=x.indexOf("Edge")>-1&&!u,s=x.indexOf("Trident")>-1&&x.indexOf("rv:11.0")>-1;if(u){new RegExp("MSIE (\\d+\\.\\d+);").test(x);var y=parseFloat(RegExp.$1);return y==7?7:y==8?8:y==9?9:y==10?10:6}return v?-2:s?11:-1}var B=function(){return(B=Object.assign||function(u){for(var v,s=1,y=arguments.length;s<y;s++)for(var A in v=arguments[s])Object.prototype.hasOwnProperty.call(v,A)&&(u[A]=v[A]);return u}).apply(this,arguments)},q,z=function(){function x(u,v){v===void 0&&(v={}),this.reportOptions={},this.config=u,this.reportOptions=v}return x.canUseDB=function(){return!!(window!=null&&window.indexedDB)},x.prototype.openDB=function(){var u=this;return new Promise(function(v,s){if(!x.canUseDB())return s({message:"\u5F53\u524D\u4E0D\u652F\u6301 indexeddb"});var y=u.config,A=y.name,P=y.version,te=y.stores,ne=indexedDB.open(A,P);ne.onsuccess=function(){u.db=ne.result,v(),B({result:1,func:"open",params:JSON.stringify(u.config)},u.reportOptions)},ne.onerror=function(Ce){var X,_e;s(Ce),B({result:0,func:"open",params:JSON.stringify(u.config),error_msg:(_e=(X=Ce.target)===null||X===void 0?void 0:X.error)===null||_e===void 0?void 0:_e.message},u.reportOptions)},ne.onupgradeneeded=function(){u.db=ne.result;try{te==null||te.forEach(function(Ce){u.createStore(Ce)})}catch(Ce){B({result:0,func:"open",params:JSON.stringify(u.config),error_msg:Ce.message},u.reportOptions),s(Ce)}}})},x.prototype.useStore=function(u){return this.storeName=u,this},x.prototype.deleteDB=function(){var u=this;return this.closeDB(),new Promise(function(v,s){var y=indexedDB.deleteDatabase(u.config.name);y.onsuccess=function(){return v()},y.onerror=s})},x.prototype.closeDB=function(){var u;(u=this.db)===null||u===void 0||u.close(),this.db=null},x.prototype.getStoreCount=function(){var u=this;return new Promise(function(v,s){var y=u.getStore("readonly").count();y.onsuccess=function(){return v(y.result)},y.onerror=s})},x.prototype.clearStore=function(){var u=this;return new Promise(function(v,s){var y=u.getStore("readwrite").clear();y.onsuccess=function(){return v()},y.onerror=s})},x.prototype.add=function(u,v){var s=this;return new Promise(function(y,A){var P=s.getStore("readwrite").add(u,v);P.onsuccess=function(){y(P.result)},P.onerror=A})},x.prototype.put=function(u,v){var s=this;return new Promise(function(y,A){var P=s.getStore("readwrite").put(u,v);P.onsuccess=function(){y(P.result)},P.onerror=A})},x.prototype.getStoreAllData=function(){var u=this;return new Promise(function(v,s){var y=u.getStore("readonly").openCursor(),A=[];y.onsuccess=function(){var P;if(!((P=y.result)===null||P===void 0)&&P.value){var te=y.result.value;A.push(te),y.result.continue()}else v(A)},y.onerror=s})},x.prototype.getDataRangeByIndex=function(u,v,s,y,A){var P=this;return new Promise(function(te,ne){var Ce=P.getStore().index(u),X=IDBKeyRange.bound(v,s,y,A),_e=[],r=Ce.openCursor(X);r.onsuccess=function(){var a;!((a=r==null?void 0:r.result)===null||a===void 0)&&a.value?(_e.push(r==null?void 0:r.result.value),r==null||r.result.continue()):te(_e)},r.onerror=ne})},x.prototype.removeDataByIndex=function(u,v,s,y,A){var P=this;return new Promise(function(te,ne){var Ce=P.getStore("readwrite").index(u),X=IDBKeyRange.bound(v,s,y,A),_e=Ce.openCursor(X),r=0;_e.onsuccess=function(a){var S=a.target.result;S?(r+=1,S.delete(),S.continue()):te(r)},_e.onerror=ne})},x.prototype.createStore=function(u){var v=u.name,s=u.indexes,y=s===void 0?[]:s,A=u.options;if(this.db){this.db.objectStoreNames.contains(v)&&this.db.deleteObjectStore(v);var P=this.db.createObjectStore(v,A);y.forEach(function(te){P.createIndex(te.indexName,te.keyPath,te.options)})}},x.prototype.getStore=function(u){var v;return u===void 0&&(u="readonly"),(v=this.db)===null||v===void 0?void 0:v.transaction(this.storeName,u).objectStore(this.storeName)},x}(),Z="event_table_v3",oe="eventId",ce=function(){function x(u){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new z({name:"Beacon_"+u+"_V3",version:1,stores:[{name:Z,options:{keyPath:oe},indexes:[{indexName:oe,keyPath:oe,options:{unique:!0}}]}]}),this.open()}return x.prototype.getCount=function(){var u=this;return this.readyExec(function(){return u.db.getStoreCount()})},x.prototype.setItem=function(u,v){var s=this;return this.readyExec(function(){return s.db.add({eventId:u,value:v})})},x.prototype.getItem=function(u){return D(this,void 0,void 0,function(){var v=this;return b(this,function(s){return[2,this.readyExec(function(){return v.db.getDataRangeByIndex(oe,u,u)})]})})},x.prototype.removeItem=function(u){var v=this;return this.readyExec(function(){return v.db.removeDataByIndex(oe,u,u)})},x.prototype.updateItem=function(u,v){var s=this;return this.readyExec(function(){return s.db.put({eventId:u,value:v})})},x.prototype.iterate=function(u){var v=this;return this.readyExec(function(){return v.db.getStoreAllData().then(function(s){s.forEach(function(y){u(y.value)})})})},x.prototype.open=function(){return D(this,void 0,void 0,function(){var u=this;return b(this,function(v){switch(v.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return u.db.openDB()}),[4,this.taskQueue];case 1:return v.sent(),this.isReady=!0,this.db.useStore(Z),[2]}})})},x.prototype.readyExec=function(u){return this.isReady?u():(this.taskQueue=this.taskQueue.then(function(){return u()}),this.taskQueue)},x}(),ve=function(){function x(u){this.keyObject={},this.storage=u}return x.prototype.getCount=function(){return this.storage.getStoreCount()},x.prototype.removeItem=function(u){this.storage.removeItem(u),delete this.keyObject[u]},x.prototype.setItem=function(u,v){var s=JSON.stringify(v);this.storage.setItem(u,s),this.keyObject[u]=v},x.prototype.iterate=function(u){for(var v=Object.keys(this.keyObject),s=0;s<v.length;s++){var y=this.storage.getItem(v[s]);u(JSON.parse(y))}},x}(),ye=function(){function x(u,v){var s=this;this.dbEventCount=0,Se()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new ve(v),this.dbEventCount=this.store.getCount()):(this.store=new ce(u),this.getCount().then(function(y){s.dbEventCount=y}))}return x.prototype.getCount=function(){return D(this,void 0,void 0,function(){return b(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,u.sent()];case 2:return u.sent(),[2,Promise.reject()];case 3:return[2]}})})},x.prototype.insertEvent=function(u,v){return D(this,void 0,void 0,function(){var s,y;return b(this,function(A){switch(A.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];s=k(u.mapValue),A.label=1;case 1:return A.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(s,u)];case 2:return[2,A.sent()];case 3:return y=A.sent(),v&&v(y,u),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},x.prototype.getEvents=function(){return D(this,void 0,void 0,function(){var u;return b(this,function(v){switch(v.label){case 0:u=[],v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.store.iterate(function(s){u.push(s)})];case 2:return v.sent(),[2,Promise.all(u)];case 3:return v.sent(),[2,Promise.all(u)];case 4:return[2]}})})},x.prototype.removeEvent=function(u){return D(this,void 0,void 0,function(){var v;return b(this,function(s){switch(s.label){case 0:v=k(u.mapValue),s.label=1;case 1:return s.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(v)];case 2:return[2,s.sent()];case 3:return s.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},x}(),ie=function(){return(ie=Object.assign||function(u){for(var v,s=1,y=arguments.length;s<y;s++)for(var A in v=arguments[s])Object.prototype.hasOwnProperty.call(v,A)&&(u[A]=v[A]);return u}).apply(this,arguments)};function pe(x){try{return decodeURIComponent(x.replace(/\+/g," "))}catch{return null}}function ge(x,u){var v=[null,void 0,"",NaN].includes(x);if(u.isSkipEmpty&&v)return null;var s=!u.isSkipEmpty&&v?"":x;try{return u.encode?encodeURIComponent(s):s}catch{return null}}function me(x){var u=x.split("#"),v=u[0],s=u[1],y=s===void 0?"":s,A=v.split("?"),P=A[0],te=A[1],ne=te===void 0?"":te,Ce=pe(y),X=Object.create(null);return ne.split("&").forEach(function(_e){var r=_e.split("="),a=r[0],S=r[1],w=S===void 0?"":S,W=pe(a),le=pe(w);W===null||le===null||W===""&&le===""||X[W]||(X[W]=le)}),{url:P,query:X,hash:Ce}}function fe(x,u){u===void 0&&(u={encode:!0,isSkipEmpty:!1});var v=x.url,s=x.query,y=s===void 0?{}:s,A=x.hash,P=v.split("#"),te=P[0],ne=P[1],Ce=ne===void 0?"":ne,X=te.split("?")[0],_e=[],r=ge(A||Ce,u),a=ie(ie({},me(v).query),y);return Object.keys(a).forEach(function(S){var w=ge(S,u),W=ge(a[S],u);w!==null&&W!==null&&_e.push(w+"="+W)}),X+(_e.length?"?"+_e.join("&"):"")+(r?"#"+r:"")}function se(x,u){return new Promise(function(v,s){if(u&&document.querySelectorAll("script[data-tag="+u+"]").length)return v();var y=document.createElement("script"),A=ie({type:"text/javascript",charset:"utf-8"},x);Object.keys(A).forEach(function(P){return function(te,ne,Ce){if(te)return Ce===void 0?te.getAttribute(ne):te.setAttribute(ne,Ce)}(y,P,A[P])}),u&&(y.dataset.tag=u),y.onload=function(){return v()},y.onreadystatechange=function(){var P=y.readyState;["complete","loaded"].includes(P)&&(y.onreadystatechange=null,v())},y.onerror=s,document.body.appendChild(y)})}(function(x){x[x.equal=0]="equal",x[x.low=-1]="low",x[x.high=1]="high"})(q||(q={}));var Te=function(){return(Te=Object.assign||function(u){for(var v,s=1,y=arguments.length;s<y;s++)for(var A in v=arguments[s])Object.prototype.hasOwnProperty.call(v,A)&&(u[A]=v[A]);return u}).apply(this,arguments)};function De(x,u,v,s){return new(v||(v=Promise))(function(y,A){function P(Ce){try{ne(s.next(Ce))}catch(X){A(X)}}function te(Ce){try{ne(s.throw(Ce))}catch(X){A(X)}}function ne(Ce){var X;Ce.done?y(Ce.value):(X=Ce.value,X instanceof v?X:new v(function(_e){_e(X)})).then(P,te)}ne((s=s.apply(x,u||[])).next())})}function Re(x,u){var v,s,y,A,P={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function te(ne){return function(Ce){return function(X){if(v)throw new TypeError("Generator is already executing.");for(;P;)try{if(v=1,s&&(y=2&X[0]?s.return:X[0]?s.throw||((y=s.return)&&y.call(s),0):s.next)&&!(y=y.call(s,X[1])).done)return y;switch(s=0,y&&(X=[2&X[0],y.value]),X[0]){case 0:case 1:y=X;break;case 4:return P.label++,{value:X[1],done:!1};case 5:P.label++,s=X[1],X=[0];continue;case 7:X=P.ops.pop(),P.trys.pop();continue;default:if(!((y=(y=P.trys).length>0&&y[y.length-1])||X[0]!==6&&X[0]!==2)){P=0;continue}if(X[0]===3&&(!y||X[1]>y[0]&&X[1]<y[3])){P.label=X[1];break}if(X[0]===6&&P.label<y[1]){P.label=y[1],y=X;break}if(y&&P.label<y[2]){P.label=y[2],P.ops.push(X);break}y[2]&&P.ops.pop(),P.trys.pop();continue}X=u.call(x,P)}catch(_e){X=[6,_e],s=0}finally{v=y=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([ne,Ce])}}}var be=function(){function x(){this.interceptors=[]}return x.prototype.use=function(u,v){return this.interceptors.push({resolved:u,rejected:v}),this.interceptors.length-1},x.prototype.traverse=function(u,v){v===void 0&&(v=!1);var s=Promise.resolve(u);return(v?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(y,A){if(A){var P=A.resolved,te=A.rejected;s=s.then(P,te)}return y},""),s},x.prototype.eject=function(u){this.interceptors[u]&&(this.interceptors[u]=null)},x}(),we={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new be,response:new be}},Ne=/^([a-z][a-z\d+\-.]*:)?\/\//i,Ue=Object.prototype.toString;function Be(x){return De(this,void 0,void 0,function(){var u;return Re(this,function(v){switch(v.label){case 0:if(window.fetch)return[2];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,se({src:x})];case 2:return v.sent(),[3,4];case 3:throw u=v.sent(),function(s){if(typeof Image<"u"){var y=new Image(1,1),A=Te({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},s),P=Object.keys(A).map(function(te){return te+"="+encodeURIComponent(A[te])}).join("&");y.src="https://h.trace.qq.com/kv?"+P}}({func:"loadPolyfill",result:0,params:x,error_msg:u.message}),new Error("\u52A0\u8F7D polyfill "+x+" \u5931\u8D25: "+u.message);case 4:return[2]}})})}function ee(x){return["Accept","Content-Type"].forEach(function(u){return v=u,void((s=x.headers)&&Object.keys(s).forEach(function(y){y!==v&&y.toUpperCase()===v.toUpperCase()&&(s[v]=s[y],delete s[y])}));var v,s}),function(u){if(Ue.call(u)!=="[object Object]")return!1;var v=Object.getPrototypeOf(u);return v===null||v===Object.prototype}(x.body)&&(x.body=JSON.stringify(x.body),x.headers&&(x.headers["Content-Type"]="application/json;charset=utf-8")),x}function R(x){return De(this,void 0,void 0,function(){var u,v,s,y,A,P,te,ne,Ce,X,_e,r,a,S,w,W,le;return Re(this,function(Oe){switch(Oe.label){case 0:return u=we.baseURL,v=we.defaults,s=we.interceptors,[4,Be(we.polyfillUrl)];case 1:return Oe.sent(),(y=Te(Te({},v),x)).headers||(y.headers=function(Me){Me===void 0&&(Me="GET");var Xe=we.headers[Me]||{};return Te(Te({},we.headers.common),Xe)}(y.method)),ee(y),[4,s.request.traverse(y,!0)];case 2:if((A=Oe.sent())instanceof Error)throw A;return A.url=function(Me,Xe){return!Me||Ne.test(Xe)?Xe:Me.replace(/\/+$/,"")+"/"+Xe.replace(/^\/+/,"")}(u,A.url),P=A.url,te=A.timeout,ne=A.params,Ce=A.method,X=["GET","DELETE","OPTIONS","HEAD"].includes(Ce===void 0?"GET":Ce)&&!!ne,_e=X?fe({url:P,query:ne}):P,r=[],te&&!A.signal&&(w=new Promise(function(Me){a=setTimeout(function(){Me(new Error("timeout"))},te)}),r.push(w),S=new AbortController,A.signal=S.signal),r.push(fetch(_e,A).catch(function(Me){return Me})),[4,Promise.race(r)];case 3:return W=Oe.sent(),a&&clearTimeout(a),[4,s.response.traverse(W)];case 4:if((le=Oe.sent())instanceof Error)throw S==null||S.abort(),le;return[2,le]}})})}var U=function(){function x(u){we.interceptors.request.use(function(v){var s=v.url,y=v.method,A=v.body,P=A;if(u.onReportBeforeSend){var te=u.onReportBeforeSend({url:s,method:y,data:A?JSON.parse(A):null});P=te!=null&&te.data?JSON.stringify(te.data):null}if(y!=="GET"&&!P)throw new Error("No data for sdk, cancel.");return Y(Y({},v),{body:P})})}return x.prototype.get=function(u,v){return D(this,void 0,void 0,function(){var s,y;return b(this,function(A){switch(A.label){case 0:return[4,R(Y({url:u},v))];case 1:return[4,(s=A.sent()).json()];case 2:return y=A.sent(),[2,Promise.resolve({data:y,status:s.status,statusText:s.statusText,headers:s.headers})]}})})},x.prototype.post=function(u,v,s){return D(this,void 0,void 0,function(){var y,A;return b(this,function(P){switch(P.label){case 0:return[4,R(Y({url:u,body:v,method:"POST"},s))];case 1:return[4,(y=P.sent()).json()];case 2:return A=P.sent(),[2,Promise.resolve({data:A,status:y.status,statusText:y.statusText,headers:y.headers})]}})})},x}(),O=function(){function x(u){this.appkey=u}return x.prototype.getItem=function(u){try{return window.localStorage.getItem(this.getStoreKey(u))}catch{return""}},x.prototype.removeItem=function(u){try{window.localStorage.removeItem(this.getStoreKey(u))}catch{}},x.prototype.setItem=function(u,v){try{window.localStorage.setItem(this.getStoreKey(u),v)}catch{}},x.prototype.setSessionItem=function(u,v){try{window.sessionStorage.setItem(this.getStoreKey(u),v)}catch{}},x.prototype.getSessionItem=function(u){try{return window.sessionStorage.getItem(this.getStoreKey(u))}catch{return""}},x.prototype.getStoreKey=function(u){return M+this.appkey+"_"+u},x.prototype.createDeviceId=function(){try{var u=window.localStorage.getItem(J);return u||(u=function(v){for(var s="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",y="",A=0;A<v;A++)y+=s.charAt(Math.floor(Math.random()*s.length));return y}(32),window.localStorage.setItem(J,u)),u}catch{return""}},x.prototype.clear=function(){try{for(var u=window.localStorage.length,v=0;v<u;v++){var s=window.localStorage.key(v);(s==null?void 0:s.substr(0,9))==M&&window.localStorage.removeItem(s)}}catch{}},x.prototype.getStoreCount=function(){var u=0;try{u=window.localStorage.length}catch{}return u},x}(),ue=function(x){var u={exports:{}};return x(u,u.exports),u.exports}(function(x,u){x.exports=function(){function v(P,te,ne,Ce,X,_e,r){try{var a=P[_e](r),S=a.value}catch(w){return void ne(w)}a.done?te(S):Promise.resolve(S).then(Ce,X)}function s(P,te){for(var ne=0;ne<te.length;ne++){var Ce=te[ne];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(P,Ce.key,Ce)}}var y,A=(function(P){P=function(te){var ne,Ce=Object.prototype,X=Ce.hasOwnProperty,_e=typeof Symbol=="function"?Symbol:{},r=_e.iterator||"@@iterator",a=_e.asyncIterator||"@@asyncIterator",S=_e.toStringTag||"@@toStringTag";function w(f,l,C){return Object.defineProperty(f,l,{value:C,enumerable:!0,configurable:!0,writable:!0}),f[l]}try{w({},"")}catch{w=function(C,T,V){return C[T]=V}}function W(f,l,C,T){var V,xe,he,Ee;return l=l&&l.prototype instanceof qe?l:qe,l=Object.create(l.prototype),T=new o(T||[]),l._invoke=(V=f,xe=C,he=T,Ee=Oe,function(Pe,Ge){if(Ee===Xe)throw new Error("Generator is already running");if(Ee===Je){if(Pe==="throw")throw Ge;return c()}for(he.method=Pe,he.arg=Ge;;){var $e=he.delegate;if($e){var Ze=function nt(et,Ve){var Fe;if((Fe=et.iterator[Ve.method])===ne){if(Ve.delegate=null,Ve.method==="throw"){if(et.iterator.return&&(Ve.method="return",Ve.arg=ne,nt(et,Ve),Ve.method==="throw"))return je;Ve.method="throw",Ve.arg=new TypeError("The iterator does not provide a 'throw' method")}return je}return(Fe=le(Fe,et.iterator,Ve.arg)).type==="throw"?(Ve.method="throw",Ve.arg=Fe.arg,Ve.delegate=null,je):(Fe=Fe.arg)?Fe.done?(Ve[et.resultName]=Fe.value,Ve.next=et.nextLoc,Ve.method!=="return"&&(Ve.method="next",Ve.arg=ne),Ve.delegate=null,je):Fe:(Ve.method="throw",Ve.arg=new TypeError("iterator result is not an object"),Ve.delegate=null,je)}($e,he);if(Ze){if(Ze===je)continue;return Ze}}if(he.method==="next")he.sent=he._sent=he.arg;else if(he.method==="throw"){if(Ee===Oe)throw Ee=Je,he.arg;he.dispatchException(he.arg)}else he.method==="return"&&he.abrupt("return",he.arg);if(Ee=Xe,(Ze=le(V,xe,he)).type==="normal"){if(Ee=he.done?Je:Me,Ze.arg!==je)return{value:Ze.arg,done:he.done}}else Ze.type==="throw"&&(Ee=Je,he.method="throw",he.arg=Ze.arg)}}),l}function le(f,l,C){try{return{type:"normal",arg:f.call(l,C)}}catch(T){return{type:"throw",arg:T}}}te.wrap=W;var Oe="suspendedStart",Me="suspendedYield",Xe="executing",Je="completed",je={};function qe(){}function He(){}function Ke(){}var Ye={};Ye[r]=function(){return this},(_e=(_e=Object.getPrototypeOf)&&_e(_e(t([]))))&&_e!==Ce&&X.call(_e,r)&&(Ye=_e);var de=Ke.prototype=qe.prototype=Object.create(Ye);function ze(f){["next","throw","return"].forEach(function(l){w(f,l,function(C){return this._invoke(l,C)})})}function Qe(f,l){var C;this._invoke=function(T,V){function xe(){return new l(function(he,Ee){(function Pe(Ge,$e,Ze,nt){if((Ge=le(f[Ge],f,$e)).type!=="throw"){var et=Ge.arg;return($e=et.value)&&E($e)=="object"&&X.call($e,"__await")?l.resolve($e.__await).then(function(Ve){Pe("next",Ve,Ze,nt)},function(Ve){Pe("throw",Ve,Ze,nt)}):l.resolve($e).then(function(Ve){et.value=Ve,Ze(et)},function(Ve){return Pe("throw",Ve,Ze,nt)})}nt(Ge.arg)})(T,V,he,Ee)})}return C=C?C.then(xe,xe):xe()}}function Ie(f){var l={tryLoc:f[0]};1 in f&&(l.catchLoc=f[1]),2 in f&&(l.finallyLoc=f[2],l.afterLoc=f[3]),this.tryEntries.push(l)}function e(f){var l=f.completion||{};l.type="normal",delete l.arg,f.completion=l}function o(f){this.tryEntries=[{tryLoc:"root"}],f.forEach(Ie,this),this.reset(!0)}function t(f){if(f){if(l=f[r])return l.call(f);if(typeof f.next=="function")return f;if(!isNaN(f.length)){var l,C=-1;return(l=function T(){for(;++C<f.length;)if(X.call(f,C))return T.value=f[C],T.done=!1,T;return T.value=ne,T.done=!0,T}).next=l}}return{next:c}}function c(){return{value:ne,done:!0}}return((He.prototype=de.constructor=Ke).constructor=He).displayName=w(Ke,S,"GeneratorFunction"),te.isGeneratorFunction=function(f){return!!(f=typeof f=="function"&&f.constructor)&&(f===He||(f.displayName||f.name)==="GeneratorFunction")},te.mark=function(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,Ke):(f.__proto__=Ke,w(f,S,"GeneratorFunction")),f.prototype=Object.create(de),f},te.awrap=function(f){return{__await:f}},ze(Qe.prototype),Qe.prototype[a]=function(){return this},te.AsyncIterator=Qe,te.async=function(f,l,C,T,V){V===void 0&&(V=Promise);var xe=new Qe(W(f,l,C,T),V);return te.isGeneratorFunction(l)?xe:xe.next().then(function(he){return he.done?he.value:xe.next()})},ze(de),w(de,S,"Generator"),de[r]=function(){return this},de.toString=function(){return"[object Generator]"},te.keys=function(f){var l,C=[];for(l in f)C.push(l);return C.reverse(),function T(){for(;C.length;){var V=C.pop();if(V in f)return T.value=V,T.done=!1,T}return T.done=!0,T}},te.values=t,o.prototype={constructor:o,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=ne,this.done=!1,this.delegate=null,this.method="next",this.arg=ne,this.tryEntries.forEach(e),!l)for(var C in this)C.charAt(0)==="t"&&X.call(this,C)&&!isNaN(+C.slice(1))&&(this[C]=ne)},stop:function(){this.done=!0;var l=this.tryEntries[0].completion;if(l.type==="throw")throw l.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var C=this;function T(Ge,$e){return he.type="throw",he.arg=l,C.next=Ge,$e&&(C.method="next",C.arg=ne),!!$e}for(var V=this.tryEntries.length-1;0<=V;--V){var xe=this.tryEntries[V],he=xe.completion;if(xe.tryLoc==="root")return T("end");if(xe.tryLoc<=this.prev){var Ee=X.call(xe,"catchLoc"),Pe=X.call(xe,"finallyLoc");if(Ee&&Pe){if(this.prev<xe.catchLoc)return T(xe.catchLoc,!0);if(this.prev<xe.finallyLoc)return T(xe.finallyLoc)}else if(Ee){if(this.prev<xe.catchLoc)return T(xe.catchLoc,!0)}else{if(!Pe)throw new Error("try statement without catch or finally");if(this.prev<xe.finallyLoc)return T(xe.finallyLoc)}}}},abrupt:function(l,C){for(var T=this.tryEntries.length-1;0<=T;--T){var V=this.tryEntries[T];if(V.tryLoc<=this.prev&&X.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var xe=V;break}}var he=(xe=xe&&(l==="break"||l==="continue")&&xe.tryLoc<=C&&C<=xe.finallyLoc?null:xe)?xe.completion:{};return he.type=l,he.arg=C,xe?(this.method="next",this.next=xe.finallyLoc,je):this.complete(he)},complete:function(l,C){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&C&&(this.next=C),je},finish:function(l){for(var C=this.tryEntries.length-1;0<=C;--C){var T=this.tryEntries[C];if(T.finallyLoc===l)return this.complete(T.completion,T.afterLoc),e(T),je}},catch:function(l){for(var C=this.tryEntries.length-1;0<=C;--C){var T=this.tryEntries[C];if(T.tryLoc===l){var V,xe=T.completion;return xe.type==="throw"&&(V=xe.arg,e(T)),V}}throw new Error("illegal catch attempt")},delegateYield:function(l,C,T){return this.delegate={iterator:t(l),resultName:C,nextLoc:T},this.method==="next"&&(this.arg=ne),je}},te}(P.exports);try{regeneratorRuntime=P}catch{Function("r","regeneratorRuntime = r")(P)}}(y={exports:{}}),y.exports);return function(){function P(_e){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,P),this.version="1.0.0";var r=Array.prototype.map,a=Array.prototype.forEach;_e&&(this.hasher=_e),this.each=function(S,w,W){if(S!=null){if(a&&S.forEach===a)S.forEach(w,W);else if(S.length===+S.length){for(var le=0,Oe=S.length;le<Oe;le++)if(w.call(W,S[le],le,S)==={})return}else for(var Me in S)if(S.hasOwnProperty(Me)&&w.call(W,S[Me],Me,S)==={})return}},this.map=function(S,w,W){var le=[];return S==null?le:r&&S.map===r?S.map(w,W):(this.each(S,function(Oe,Me,Xe){le[le.length]=w.call(W,Oe,Me,Xe)}),le)}}var te,ne,Ce,X;return te=P,(ne=[{key:"getQimei36",value:function(r,a){var S=this;this.getHid().then(function(w){var W="3BJr"+r.substring(0,2)+(w&&w.substring(3,7)),le=new XMLHttpRequest;le.open("POST","https://snowflake.qq.com/ola/h5",!0),le.setRequestHeader("Content-Type","application/json"),le.onreadystatechange=function(){if(le.readyState==XMLHttpRequest.DONE&&le.status==200)try{a&&a(JSON.parse(le.responseText))}catch{a(null)}},le.send(JSON.stringify({appKey:r,hid:w,sign:W,version:S.version}))})}},{key:"getHid",value:(Ce=A.mark(function _e(){var r,a;return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return(r=[]).push((w=void 0,(w=[Math.floor(window.screen.width*window.devicePixelRatio),Math.floor(window.screen.height*window.devicePixelRatio)]).sort().reverse(),w.join("x"))),r.push((w=void 0,(w=[Math.floor(window.screen.availWidth*window.devicePixelRatio),Math.floor(window.screen.availHeight*window.devicePixelRatio)]).sort().reverse(),w.join("x"))),r.push(navigator.deviceMemory),r.push(!!window.sessionStorage),r.push(!!window.indexedDB),r.push(navigator.productSub),r.push(navigator.hardwareConcurrency),r.push(this.getWebglVendorAndRenderer()),r.push(new Date().getTimezoneOffset()),S.next=12,this.getFactor();case 12:if(a=S.sent,r.push(a),this.hasher)return S.abrupt("return",this.hasher(r.join("###"),31));S.next=18;break;case 18:return S.abrupt("return",this.x64hash128(r.join("###"),31));case 19:case"end":return S.stop()}var w},_e,this)}),X=function(){var r=this,a=arguments;return new Promise(function(S,w){var W=Ce.apply(r,a);function le(Me){v(W,S,w,le,Oe,"next",Me)}function Oe(Me){v(W,S,w,le,Oe,"throw",Me)}le(void 0)})},function(){return X.apply(this,arguments)})},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"getNative",value:function(){var r=this;this.getHid().then(function(a){JSInterface.callback(r.version,a,r.getUserAgent())})}},{key:"getWebglVendorAndRenderer",value:function(){try{var r=function(){var W=document.createElement("canvas"),le=null;try{le=W.getContext("webgl")||W.getContext("experimental-webgl")}catch{}return le||null}(),a=r.getExtension("WEBGL_debug_renderer_info"),S=[r.getParameter(a.UNMASKED_VENDOR_WEBGL),r.getParameter(a.UNMASKED_RENDERER_WEBGL)].join("~"),w=r.getExtension("WEBGL_lose_context");return w!=null&&w.loseContext(),S}catch{return null}}},{key:"getFactor",value:function(){return new Promise(function(r,a){var S=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;S?function(){var w=new S({iceServers:[]});w.createDataChannel("",{reliable:!1}),w.onicecandidate=function(Me){Me.candidate&&Oe("a=".concat(Me.candidate.candidate))},w.createOffer(function(Me){Oe(Me.sdp),w.setLocalDescription(Me)},function(Me){});var W=Object.create(null);function le(Me){if(!(Me in W)){W[Me]=!0;for(var Xe=Object.keys(W).filter(function(je){return W[je]}),Je=0;Je<Xe.length;Je++)16<Xe[Je].length&&(Xe.splice(Je,1),Je--);r(Xe[0])}}function Oe(Me){(0<arguments.length&&Me!==void 0?Me:"").split(`\r
`).forEach(function(Xe,Je,je){var qe,He;~Xe.indexOf("a=candidate")?(He=(qe=Xe.split(" "))[4],qe[7]==="host"&&le(He)):~Xe.indexOf("c=")&&le(Xe.split(" ")[2])})}W["0.0.0.0"]=!1}():r(null)})}},{key:"x64hash128",value:function(r,a){for(var S=function(Ie,e){Ie=[Ie[0]>>>16,65535&Ie[0],Ie[1]>>>16,65535&Ie[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var o=[0,0,0,0];return o[3]+=Ie[3]+e[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=Ie[2]+e[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=Ie[1]+e[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=Ie[0]+e[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},w=function(Ie,e){Ie=[Ie[0]>>>16,65535&Ie[0],Ie[1]>>>16,65535&Ie[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var o=[0,0,0,0];return o[3]+=Ie[3]*e[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=Ie[2]*e[3],o[1]+=o[2]>>>16,o[2]&=65535,o[2]+=Ie[3]*e[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=Ie[1]*e[3],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=Ie[2]*e[2],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=Ie[3]*e[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=Ie[0]*e[3]+Ie[1]*e[2]+Ie[2]*e[1]+Ie[3]*e[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},W=function(Ie,e){return(e%=64)==32?[Ie[1],Ie[0]]:e<32?[Ie[0]<<e|Ie[1]>>>32-e,Ie[1]<<e|Ie[0]>>>32-e]:[Ie[1]<<(e-=32)|Ie[0]>>>32-e,Ie[0]<<e|Ie[1]>>>32-e]},le=function(Ie,e){return(e%=64)==0?Ie:e<32?[Ie[0]<<e|Ie[1]>>>32-e,Ie[1]<<e]:[Ie[1]<<e-32,0]},Oe=function(Ie,e){return[Ie[0]^e[0],Ie[1]^e[1]]},Me=function(Ie){return Ie=Oe(Ie,[0,Ie[0]>>>1]),Ie=w(Ie,[4283543511,3981806797]),Ie=Oe(Ie,[0,Ie[0]>>>1]),Ie=w(Ie,[3301882366,444984403]),Oe(Ie,[0,Ie[0]>>>1])},Xe=(r=r||"").length%16,Je=r.length-Xe,je=[0,a=a||0],qe=[0,a],He=[0,0],Ke=[0,0],Ye=[2277735313,289559509],de=[1291169091,658871167],ze=0;ze<Je;ze+=16)He=[255&r.charCodeAt(ze+4)|(255&r.charCodeAt(ze+5))<<8|(255&r.charCodeAt(ze+6))<<16|(255&r.charCodeAt(ze+7))<<24,255&r.charCodeAt(ze)|(255&r.charCodeAt(ze+1))<<8|(255&r.charCodeAt(ze+2))<<16|(255&r.charCodeAt(ze+3))<<24],Ke=[255&r.charCodeAt(ze+12)|(255&r.charCodeAt(ze+13))<<8|(255&r.charCodeAt(ze+14))<<16|(255&r.charCodeAt(ze+15))<<24,255&r.charCodeAt(ze+8)|(255&r.charCodeAt(ze+9))<<8|(255&r.charCodeAt(ze+10))<<16|(255&r.charCodeAt(ze+11))<<24],He=W(He=w(He,Ye),31),He=w(He,de),je=S(je=W(je=Oe(je,He),27),qe),je=S(w(je,[0,5]),[0,1390208809]),Ke=W(Ke=w(Ke,de),33),Ke=w(Ke,Ye),qe=S(qe=W(qe=Oe(qe,Ke),31),je),qe=S(w(qe,[0,5]),[0,944331445]);switch(He=[0,0],Ke=[0,0],Xe){case 15:Ke=Oe(Ke,le([0,r.charCodeAt(ze+14)],48));case 14:Ke=Oe(Ke,le([0,r.charCodeAt(ze+13)],40));case 13:Ke=Oe(Ke,le([0,r.charCodeAt(ze+12)],32));case 12:Ke=Oe(Ke,le([0,r.charCodeAt(ze+11)],24));case 11:Ke=Oe(Ke,le([0,r.charCodeAt(ze+10)],16));case 10:Ke=Oe(Ke,le([0,r.charCodeAt(ze+9)],8));case 9:Ke=Oe(Ke,[0,r.charCodeAt(ze+8)]),Ke=W(Ke=w(Ke,de),33),Ke=w(Ke,Ye),qe=Oe(qe,Ke);case 8:He=Oe(He,le([0,r.charCodeAt(ze+7)],56));case 7:He=Oe(He,le([0,r.charCodeAt(ze+6)],48));case 6:He=Oe(He,le([0,r.charCodeAt(ze+5)],40));case 5:He=Oe(He,le([0,r.charCodeAt(ze+4)],32));case 4:He=Oe(He,le([0,r.charCodeAt(ze+3)],24));case 3:He=Oe(He,le([0,r.charCodeAt(ze+2)],16));case 2:He=Oe(He,le([0,r.charCodeAt(ze+1)],8));case 1:He=Oe(He,[r.charCodeAt(ze)]),He=W(He=w(He,Ye),31),He=w(He,de),je=Oe(je,He)}return je=Oe(je,[0,r.length]),qe=S(qe=Oe(qe,[0,r.length]),je=S(je,qe)),je=Me(je),qe=S(qe=Me(qe),je=S(je,qe)),("00000000"+(je[0]>>>0).toString(16)).slice(-8)+("00000000"+(je[1]>>>0).toString(16)).slice(-8)+("00000000"+(qe[0]>>>0).toString(16)).slice(-8)+("00000000"+(qe[1]>>>0).toString(16)).slice(-8)}}])&&s(te.prototype,ne),P}()}()}),ae="logid_start",Ae="4.5.6-web";return function(x){function u(v){var s=x.call(this,v)||this;s.qimei36="",s.uselessCycleTaskNum=0,s.underWeakNet=!1,s.send=function(te,ne,Ce){s.storage.setItem(Q,Date.now().toString()),s.network.post(s.uploadUrl||s.strategy.getUploadUrl(),te.data).then(function(X){var _e;((_e=X==null?void 0:X.data)===null||_e===void 0?void 0:_e.result)==100?s.delayTime=1e3*X.data.delayTime:s.delayTime=0,ne&&ne(te.data),te.data.events.forEach(function(r){s.store.removeEvent(r).then(function(){s.removeSendingId(k(r.mapValue))})}),s.doCustomCycleTask()}).catch(function(X){var _e=te.data.events;s.errorReport.reportError(X.code?X.code.toString():"600",X.message),Ce&&Ce(te.data);var r=JSON.parse(s.storage.getItem(F));_e.forEach(function(a){r&&r.indexOf(k(a))!=-1&&s.store.insertEvent(a,function(S,w){S&&s.errorReport.reportError("604","insertEvent fail!")}),s.removeSendingId(k(a))}),s.monitorUploadFailed()})};var y,A,P=Se();return s.isUnderIE8=P>0&&P<8,s.isUnderIE8||(s.isUnderIE=P>0,v.needInitQimei&&s.initQimei(v.appkey),s.network=new U(v),s.storage=new O(v.appkey),s.initCommonInfo(v),s.store=new ye(v.appkey,s.storage),s.errorReport=new h(s.config,s.commonInfo,"web",s.network),s.strategy=new K(s.config,s.commonInfo,s.storage,s.network),s.logidStartTime=s.storage.getItem(ae),s.logidStartTime||(s.logidStartTime=Date.now().toString(),s.storage.setItem(ae,s.logidStartTime)),y=s.logidStartTime,A=Date.now()-Number.parseFloat(y),Math.floor(A/864e5)>=365&&s.storage.clear(),s.initSession(v),s.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return s.lifeCycle.emit("init")},0),s.initDelayTime=v.delay?v.delay:1e3,s.cycleTask(s.initDelayTime)),s}return function(v,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function y(){this.constructor=v}j(v,s),v.prototype=s===null?Object.create(s):(y.prototype=s.prototype,new y)}(u,x),u.prototype.initQimei=function(v){var s=this;new ue().getQimei36(v,function(y){s.qimei36=y.q36})},u.prototype.initSession=function(v){var s=18e5;v.sessionDuration&&v.sessionDuration>3e4&&(s=v.sessionDuration),this.beaconSession=new H(this.storage,s,this)},u.prototype.initCommonInfo=function(v){var s=Number(this.storage.getItem(Q));try{var y=JSON.parse(this.storage.getItem(F));(Date.now()-s>3e4||!y)&&this.storage.setItem(F,JSON.stringify([]))}catch{}v.uploadUrl&&(this.uploadUrl=v.uploadUrl+"?appkey="+v.appkey);var A=[window.screen.width,window.screen.height];window.devicePixelRatio&&A.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:A.join("*"),channelID:v.channelID?String(v.channelID):"",openid:v.openid?String(v.openid):"",unid:v.unionid?String(v.unionid):"",sdkVersion:Ae},this.config.appVersion=v.versionCode?String(v.versionCode):"",this.config.strictMode=v.strictMode},u.prototype.cycleTask=function(v){var s=this;this.intervalID=window.setInterval(function(){s.store.getEvents().then(function(y){var A=[],P=JSON.parse(s.storage.getItem(F));P||(P=[]),y&&y.forEach(function(te){var ne=k(te.mapValue);P.indexOf(ne)==-1&&(A.push(te),P.push(ne))}),A.length!=0&&(s.storage.setItem(F,JSON.stringify(P)),s._normalLogPipeline(s.assembleData(A)))}).catch(function(y){})},v)},u.prototype.onReport=function(v,s,y){var A=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{var P=this.generateData(v,s,y);if(y&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(P));else{var te=P.shift();te&&this.store.insertEvent(te,function(ne){ne&&A.errorReport.reportError("604","insertEvent fail!")}).catch(function(ne){A._normalLogPipeline(A.assembleData(P))})}}},u.prototype.onSendBeacon=function(v,s){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{var y=this.assembleData(this.generateData(v,s,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(y))}},u.prototype.generateData=function(v,s,y){var A=[],P="4.5.6-web_"+(y?"direct_log_id":"normal_log_id"),te=Number(this.storage.getItem(P));return te=te||1,s=Y(Y({},s),{A99:y?"Y":"N",A100:te.toString(),A72:Ae,A88:this.logidStartTime}),te++,this.storage.setItem(P,te.toString()),A.push({eventCode:v,eventTime:Date.now().toString(),mapValue:ke(s,this.config.strictMode)}),A},u.prototype.assembleData=function(v){var s=this.beaconSession.getSession();return{appVersion:this.config.appVersion?N(this.config.appVersion):"",sdkId:"js",sdkVersion:Ae,mainAppKey:this.config.appkey,platformId:3,common:ke(Y(Y({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:s.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:v}},u.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},u.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},u}(_)})}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./lib/crypto.js":function(d,m,i){(function(g){var n=i("./node_modules/@babel/runtime/helpers/typeof.js"),$=$||function(E,j){var Y={},D=Y.lib={},b=function(){},M=D.Base={extend:function(k){b.prototype=this;var p=new b;return k&&p.mixIn(k),p.hasOwnProperty("init")||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var p in k)k.hasOwnProperty(p)&&(this[p]=k[p]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}},J=D.WordArray=M.extend({init:function(k,p){k=this.words=k||[],this.sigBytes=p!=j?p:4*k.length},toString:function(k){return(k||F).stringify(this)},concat:function(k){var p=this.words,_=k.words,h=this.sigBytes;if(k=k.sigBytes,this.clamp(),h%4)for(var K=0;K<k;K++)p[h+K>>>2]|=(_[K>>>2]>>>24-8*(K%4)&255)<<24-8*((h+K)%4);else if(65535<_.length)for(K=0;K<k;K+=4)p[h+K>>>2]=_[K>>>2];else p.push.apply(p,_);return this.sigBytes+=k,this},clamp:function(){var k=this.words,p=this.sigBytes;k[p>>>2]&=4294967295<<32-8*(p%4),k.length=E.ceil(p/4)},clone:function(){var k=M.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var p=[],_=0;_<k;_+=4)p.push(4294967296*E.random()|0);return new J.init(p,k)}}),Q=Y.enc={},F=Q.Hex={stringify:function(k){var p=k.words;k=k.sigBytes;for(var _=[],h=0;h<k;h++){var K=p[h>>>2]>>>24-8*(h%4)&255;_.push((K>>>4).toString(16)),_.push((K&15).toString(16))}return _.join("")},parse:function(k){for(var p=k.length,_=[],h=0;h<p;h+=2)_[h>>>3]|=parseInt(k.substr(h,2),16)<<24-4*(h%8);return new J.init(_,p/2)}},L=Q.Latin1={stringify:function(k){var p=k.words;k=k.sigBytes;for(var _=[],h=0;h<k;h++)_.push(String.fromCharCode(p[h>>>2]>>>24-8*(h%4)&255));return _.join("")},parse:function(k){for(var p=k.length,_=[],h=0;h<p;h++)_[h>>>2]|=(k.charCodeAt(h)&255)<<24-8*(h%4);return new J.init(_,p)}},re=Q.Utf8={stringify:function(k){try{return decodeURIComponent(escape(L.stringify(k)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(k){return L.parse(unescape(encodeURIComponent(k)))}},G=D.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new J.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=re.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var p=this._data,_=p.words,h=p.sigBytes,K=this.blockSize,I=h/(4*K),I=k?E.ceil(I):E.max((I|0)-this._minBufferSize,0);if(k=I*K,h=E.min(4*k,h),k){for(var H=0;H<k;H+=K)this._doProcessBlock(_,H);H=_.splice(0,k),p.sigBytes-=h}return new J.init(H,h)},clone:function(){var k=M.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0});D.Hasher=G.extend({cfg:M.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){G.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){return k&&this._append(k),this._doFinalize()},blockSize:16,_createHelper:function(k){return function(p,_){return new k.init(_).finalize(p)}},_createHmacHelper:function(k){return function(p,_){return new ke.HMAC.init(k,_).finalize(p)}}});var ke=Y.algo={};return Y}(Math);(function(){var E=$,b=E.lib,j=b.WordArray,Y=b.Hasher,D=[],b=E.algo.SHA1=Y.extend({_doReset:function(){this._hash=new j.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(J,Q){for(var F=this._hash.words,L=F[0],re=F[1],G=F[2],ke=F[3],N=F[4],k=0;80>k;k++){if(16>k)D[k]=J[Q+k]|0;else{var p=D[k-3]^D[k-8]^D[k-14]^D[k-16];D[k]=p<<1|p>>>31}p=(L<<5|L>>>27)+N+D[k],p=20>k?p+((re&G|~re&ke)+1518500249):40>k?p+((re^G^ke)+1859775393):60>k?p+((re&G|re&ke|G&ke)-1894007588):p+((re^G^ke)-899497514),N=ke,ke=G,G=re<<30|re>>>2,re=L,L=p}F[0]=F[0]+L|0,F[1]=F[1]+re|0,F[2]=F[2]+G|0,F[3]=F[3]+ke|0,F[4]=F[4]+N|0},_doFinalize:function(){var J=this._data,Q=J.words,F=8*this._nDataBytes,L=8*J.sigBytes;return Q[L>>>5]|=128<<24-L%32,Q[(L+64>>>9<<4)+14]=Math.floor(F/4294967296),Q[(L+64>>>9<<4)+15]=F,J.sigBytes=4*Q.length,this._process(),this._hash},clone:function(){var J=Y.clone.call(this);return J._hash=this._hash.clone(),J}});E.SHA1=Y._createHelper(b),E.HmacSHA1=Y._createHmacHelper(b)})(),function(){var E=$,j=E.enc.Utf8;E.algo.HMAC=E.lib.Base.extend({init:function(D,b){D=this._hasher=new D.init,typeof b=="string"&&(b=j.parse(b));var M=D.blockSize,J=4*M;b.sigBytes>J&&(b=D.finalize(b)),b.clamp();for(var Q=this._oKey=b.clone(),F=this._iKey=b.clone(),L=Q.words,re=F.words,G=0;G<M;G++)L[G]^=1549556828,re[G]^=909522486;Q.sigBytes=F.sigBytes=J,this.reset()},reset:function(){var D=this._hasher;D.reset(),D.update(this._iKey)},update:function(D){return this._hasher.update(D),this},finalize:function(D){var b=this._hasher;return D=b.finalize(D),b.reset(),b.finalize(this._oKey.clone().concat(D))}})}(),function(){var E=$,j=E.lib,Y=j.WordArray,D=E.enc;D.Base64={stringify:function(M){var J=M.words,Q=M.sigBytes,F=this._map;M.clamp();for(var L=[],re=0;re<Q;re+=3)for(var G=J[re>>>2]>>>24-re%4*8&255,ke=J[re+1>>>2]>>>24-(re+1)%4*8&255,N=J[re+2>>>2]>>>24-(re+2)%4*8&255,k=G<<16|ke<<8|N,p=0;p<4&&re+p*.75<Q;p++)L.push(F.charAt(k>>>6*(3-p)&63));var _=F.charAt(64);if(_)for(;L.length%4;)L.push(_);return L.join("")},parse:function(M){var J=M.length,Q=this._map,F=Q.charAt(64);if(F){var L=M.indexOf(F);L!=-1&&(J=L)}for(var re=[],G=0,ke=0;ke<J;ke++)if(ke%4){var N=Q.indexOf(M.charAt(ke-1))<<ke%4*2,k=Q.indexOf(M.charAt(ke))>>>6-ke%4*2;re[G>>>2]|=(N|k)<<24-G%4*8,G++}return Y.create(re,G)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n(g)==="object"?g.exports=$:window.CryptoJS=$}).call(this,i("./node_modules/webpack/buildin/module.js")(d))},"./lib/json2xml.js":function(d,m,i){var g=i("./node_modules/@babel/runtime/helpers/typeof.js"),n="a-zA-Z_\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FFF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",$="-.0-9\xB7\u0300-\u036F\u203F\u2040",E=new RegExp("^([^"+n+"])|^((x|X)(m|M)(l|L))|([^"+n+$+"])","g"),j=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,Y=function(Q){var F=[];if(Q instanceof Object)for(var L in Q)Q.hasOwnProperty(L)&&F.push(L);return F},D=function(Q,F){var L=function(G,ke,N,k,p){var _=F.indent!==void 0?F.indent:"	",h=F.prettyPrint?`
`+new Array(k).join(_):"";F.removeIllegalNameCharacters&&(G=G.replace(E,"_"));var K=[h,"<",G,N||""];return ke&&ke.length>0?(K.push(">"),K.push(ke),p&&K.push(h),K.push("</"),K.push(G),K.push(">")):K.push("/>"),K.join("")};return function re(G,ke,N){var k=g(G);switch((Array.isArray?Array.isArray(G):G instanceof Array)?k="array":G instanceof Date&&(k="date"),k){case"array":var p=[];return G.map(function(I){p.push(re(I,1,N+1))}),F.prettyPrint&&p.push(`
`),p.join("");case"date":return G.toJSON?G.toJSON():G+"";case"object":var _=[];for(var h in G)if(G.hasOwnProperty(h))if(G[h]instanceof Array)for(var K=0;K<G[h].length;K++)G[h].hasOwnProperty(K)&&_.push(L(h,re(G[h][K],0,N+1),null,N+1,Y(G[h][K]).length));else _.push(L(h,re(G[h],0,N+1),null,N+1));return F.prettyPrint&&_.length>0&&_.push(`
`),_.join("");case"function":return G();default:return F.escape?M(G):""+G}}(Q,0,0)},b=function(Q){var F=['<?xml version="1.0" encoding="UTF-8"'];return Q&&F.push(' standalone="yes"'),F.push("?>"),F.join("")};function M(J){return(""+J).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(j,"")}d.exports=function(J,Q){if(Q||(Q={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof J=="string")try{J=JSON.parse(J.toString())}catch{return!1}var F="",L="";Q&&(g(Q)=="object"?(Q.xmlHeader&&(F=b(!!Q.xmlHeader.standalone)),typeof Q.docType<"u"&&(L="<!DOCTYPE "+Q.docType+">")):F=b()),Q=Q||{};var re=[F,Q.prettyPrint&&L?`
`:"",L,D(J,Q)];return re.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var ERROR="input is invalid type",WINDOW=(typeof window>"u"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self>"u"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process>"u"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__webpack_require__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(d){return _typeof(d)==="object"&&d.buffer&&d.buffer.constructor===ArrayBuffer});var createOutputMethod=function(m){return function(i,g){return new Md5(!0).update(i,g)[m]()}},createMethod=function(){var m=createOutputMethod("hex");NODE_JS&&(m=nodeWrap(m)),m.getCtx=m.create=function(){return new Md5},m.update=function(n){return m.create().update(n)};for(var i=0;i<OUTPUT_TYPES.length;++i){var g=OUTPUT_TYPES[i];m[g]=createOutputMethod(g)}return m},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function d(m){if(typeof m=="string")return crypto.createHash("md5").update(m,"utf8").digest("hex");if(m==null)throw ERROR;return m.constructor===ArrayBuffer&&(m=new Uint8Array(m)),Array.isArray(m)||ArrayBuffer.isView(m)||m.constructor===Buffer?crypto.createHash("md5").update(new Buffer(m)).digest("hex"):method(m)};return nodeMethod};function Md5(d){if(d)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var m=new ArrayBuffer(68);this.buffer8=new Uint8Array(m),this.blocks=new Uint32Array(m)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(d,m){if(!this.finalized){for(var i,g=0,n,$=d.length,E=this.blocks,j=this.buffer8;g<$;){if(this.hashed&&(this.hashed=!1,E[0]=E[16],E[16]=E[1]=E[2]=E[3]=E[4]=E[5]=E[6]=E[7]=E[8]=E[9]=E[10]=E[11]=E[12]=E[13]=E[14]=E[15]=0),ARRAY_BUFFER)for(n=this.start;g<$&&n<64;++g)i=d.charCodeAt(g),m||i<128?j[n++]=i:i<2048?(j[n++]=192|i>>6,j[n++]=128|i&63):i<55296||i>=57344?(j[n++]=224|i>>12,j[n++]=128|i>>6&63,j[n++]=128|i&63):(i=65536+((i&1023)<<10|d.charCodeAt(++g)&1023),j[n++]=240|i>>18,j[n++]=128|i>>12&63,j[n++]=128|i>>6&63,j[n++]=128|i&63);else for(n=this.start;g<$&&n<64;++g)i=d.charCodeAt(g),m||i<128?E[n>>2]|=i<<SHIFT[n++&3]:i<2048?(E[n>>2]|=(192|i>>6)<<SHIFT[n++&3],E[n>>2]|=(128|i&63)<<SHIFT[n++&3]):i<55296||i>=57344?(E[n>>2]|=(224|i>>12)<<SHIFT[n++&3],E[n>>2]|=(128|i>>6&63)<<SHIFT[n++&3],E[n>>2]|=(128|i&63)<<SHIFT[n++&3]):(i=65536+((i&1023)<<10|d.charCodeAt(++g)&1023),E[n>>2]|=(240|i>>18)<<SHIFT[n++&3],E[n>>2]|=(128|i>>12&63)<<SHIFT[n++&3],E[n>>2]|=(128|i>>6&63)<<SHIFT[n++&3],E[n>>2]|=(128|i&63)<<SHIFT[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var d=this.blocks,m=this.lastByteIndex;d[m>>2]|=EXTRA[m&3],m>=56&&(this.hashed||this.hash(),d[0]=d[16],d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0),d[14]=this.bytes<<3,d[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var d,m,i,g,n,$,E=this.blocks;this.first?(d=E[0]-680876937,d=(d<<7|d>>>25)-271733879<<0,g=(-1732584194^d&2004318071)+E[1]-117830708,g=(g<<12|g>>>20)+d<<0,i=(-271733879^g&(d^-271733879))+E[2]-1126478375,i=(i<<17|i>>>15)+g<<0,m=(d^i&(g^d))+E[3]-1316259209,m=(m<<22|m>>>10)+i<<0):(d=this.h0,m=this.h1,i=this.h2,g=this.h3,d+=(g^m&(i^g))+E[0]-680876936,d=(d<<7|d>>>25)+m<<0,g+=(i^d&(m^i))+E[1]-389564586,g=(g<<12|g>>>20)+d<<0,i+=(m^g&(d^m))+E[2]+606105819,i=(i<<17|i>>>15)+g<<0,m+=(d^i&(g^d))+E[3]-1044525330,m=(m<<22|m>>>10)+i<<0),d+=(g^m&(i^g))+E[4]-176418897,d=(d<<7|d>>>25)+m<<0,g+=(i^d&(m^i))+E[5]+1200080426,g=(g<<12|g>>>20)+d<<0,i+=(m^g&(d^m))+E[6]-1473231341,i=(i<<17|i>>>15)+g<<0,m+=(d^i&(g^d))+E[7]-45705983,m=(m<<22|m>>>10)+i<<0,d+=(g^m&(i^g))+E[8]+1770035416,d=(d<<7|d>>>25)+m<<0,g+=(i^d&(m^i))+E[9]-1958414417,g=(g<<12|g>>>20)+d<<0,i+=(m^g&(d^m))+E[10]-42063,i=(i<<17|i>>>15)+g<<0,m+=(d^i&(g^d))+E[11]-1990404162,m=(m<<22|m>>>10)+i<<0,d+=(g^m&(i^g))+E[12]+1804603682,d=(d<<7|d>>>25)+m<<0,g+=(i^d&(m^i))+E[13]-40341101,g=(g<<12|g>>>20)+d<<0,i+=(m^g&(d^m))+E[14]-1502002290,i=(i<<17|i>>>15)+g<<0,m+=(d^i&(g^d))+E[15]+1236535329,m=(m<<22|m>>>10)+i<<0,d+=(i^g&(m^i))+E[1]-165796510,d=(d<<5|d>>>27)+m<<0,g+=(m^i&(d^m))+E[6]-1069501632,g=(g<<9|g>>>23)+d<<0,i+=(d^m&(g^d))+E[11]+643717713,i=(i<<14|i>>>18)+g<<0,m+=(g^d&(i^g))+E[0]-373897302,m=(m<<20|m>>>12)+i<<0,d+=(i^g&(m^i))+E[5]-701558691,d=(d<<5|d>>>27)+m<<0,g+=(m^i&(d^m))+E[10]+38016083,g=(g<<9|g>>>23)+d<<0,i+=(d^m&(g^d))+E[15]-660478335,i=(i<<14|i>>>18)+g<<0,m+=(g^d&(i^g))+E[4]-405537848,m=(m<<20|m>>>12)+i<<0,d+=(i^g&(m^i))+E[9]+568446438,d=(d<<5|d>>>27)+m<<0,g+=(m^i&(d^m))+E[14]-1019803690,g=(g<<9|g>>>23)+d<<0,i+=(d^m&(g^d))+E[3]-187363961,i=(i<<14|i>>>18)+g<<0,m+=(g^d&(i^g))+E[8]+1163531501,m=(m<<20|m>>>12)+i<<0,d+=(i^g&(m^i))+E[13]-1444681467,d=(d<<5|d>>>27)+m<<0,g+=(m^i&(d^m))+E[2]-51403784,g=(g<<9|g>>>23)+d<<0,i+=(d^m&(g^d))+E[7]+1735328473,i=(i<<14|i>>>18)+g<<0,m+=(g^d&(i^g))+E[12]-1926607734,m=(m<<20|m>>>12)+i<<0,n=m^i,d+=(n^g)+E[5]-378558,d=(d<<4|d>>>28)+m<<0,g+=(n^d)+E[8]-2022574463,g=(g<<11|g>>>21)+d<<0,$=g^d,i+=($^m)+E[11]+1839030562,i=(i<<16|i>>>16)+g<<0,m+=($^i)+E[14]-35309556,m=(m<<23|m>>>9)+i<<0,n=m^i,d+=(n^g)+E[1]-1530992060,d=(d<<4|d>>>28)+m<<0,g+=(n^d)+E[4]+1272893353,g=(g<<11|g>>>21)+d<<0,$=g^d,i+=($^m)+E[7]-155497632,i=(i<<16|i>>>16)+g<<0,m+=($^i)+E[10]-1094730640,m=(m<<23|m>>>9)+i<<0,n=m^i,d+=(n^g)+E[13]+681279174,d=(d<<4|d>>>28)+m<<0,g+=(n^d)+E[0]-358537222,g=(g<<11|g>>>21)+d<<0,$=g^d,i+=($^m)+E[3]-722521979,i=(i<<16|i>>>16)+g<<0,m+=($^i)+E[6]+76029189,m=(m<<23|m>>>9)+i<<0,n=m^i,d+=(n^g)+E[9]-640364487,d=(d<<4|d>>>28)+m<<0,g+=(n^d)+E[12]-421815835,g=(g<<11|g>>>21)+d<<0,$=g^d,i+=($^m)+E[15]+530742520,i=(i<<16|i>>>16)+g<<0,m+=($^i)+E[2]-995338651,m=(m<<23|m>>>9)+i<<0,d+=(i^(m|~g))+E[0]-198630844,d=(d<<6|d>>>26)+m<<0,g+=(m^(d|~i))+E[7]+1126891415,g=(g<<10|g>>>22)+d<<0,i+=(d^(g|~m))+E[14]-1416354905,i=(i<<15|i>>>17)+g<<0,m+=(g^(i|~d))+E[5]-57434055,m=(m<<21|m>>>11)+i<<0,d+=(i^(m|~g))+E[12]+1700485571,d=(d<<6|d>>>26)+m<<0,g+=(m^(d|~i))+E[3]-1894986606,g=(g<<10|g>>>22)+d<<0,i+=(d^(g|~m))+E[10]-1051523,i=(i<<15|i>>>17)+g<<0,m+=(g^(i|~d))+E[1]-2054922799,m=(m<<21|m>>>11)+i<<0,d+=(i^(m|~g))+E[8]+1873313359,d=(d<<6|d>>>26)+m<<0,g+=(m^(d|~i))+E[15]-30611744,g=(g<<10|g>>>22)+d<<0,i+=(d^(g|~m))+E[6]-1560198380,i=(i<<15|i>>>17)+g<<0,m+=(g^(i|~d))+E[13]+1309151649,m=(m<<21|m>>>11)+i<<0,d+=(i^(m|~g))+E[4]-145523070,d=(d<<6|d>>>26)+m<<0,g+=(m^(d|~i))+E[11]-1120210379,g=(g<<10|g>>>22)+d<<0,i+=(d^(g|~m))+E[2]+718787259,i=(i<<15|i>>>17)+g<<0,m+=(g^(i|~d))+E[9]-343485551,m=(m<<21|m>>>11)+i<<0,this.first?(this.h0=d+1732584193<<0,this.h1=m-271733879<<0,this.h2=i-1732584194<<0,this.h3=g+271733878<<0,this.first=!1):(this.h0=this.h0+d<<0,this.h1=this.h1+m<<0,this.h2=this.h2+i<<0,this.h3=this.h3+g<<0)},Md5.prototype.hex=function(){this.finalize();var d=this.h0,m=this.h1,i=this.h2,g=this.h3;return HEX_CHARS[d>>4&15]+HEX_CHARS[d&15]+HEX_CHARS[d>>12&15]+HEX_CHARS[d>>8&15]+HEX_CHARS[d>>20&15]+HEX_CHARS[d>>16&15]+HEX_CHARS[d>>28&15]+HEX_CHARS[d>>24&15]+HEX_CHARS[m>>4&15]+HEX_CHARS[m&15]+HEX_CHARS[m>>12&15]+HEX_CHARS[m>>8&15]+HEX_CHARS[m>>20&15]+HEX_CHARS[m>>16&15]+HEX_CHARS[m>>28&15]+HEX_CHARS[m>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[g>>4&15]+HEX_CHARS[g&15]+HEX_CHARS[g>>12&15]+HEX_CHARS[g>>8&15]+HEX_CHARS[g>>20&15]+HEX_CHARS[g>>16&15]+HEX_CHARS[g>>28&15]+HEX_CHARS[g>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(d){if(d==="hex")return this.hex();this.finalize();var m=this.h0,i=this.h1,g=this.h2,n=this.h3,$=[m&255,m>>8&255,m>>16&255,m>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255,g&255,g>>8&255,g>>16&255,g>>24&255,n&255,n>>8&255,n>>16&255,n>>24&255];return $},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var d=new ArrayBuffer(16),m=new Uint32Array(d);return m[0]=this.h0,m[1]=this.h1,m[2]=this.h2,m[3]=this.h3,d},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var d,m,i,g="",n=this.array(),$=0;$<15;)d=n[$++],m=n[$++],i=n[$++],g+=BASE64_ENCODE_CHAR[d>>>2]+BASE64_ENCODE_CHAR[(d<<4|m>>>4)&63]+BASE64_ENCODE_CHAR[(m<<2|i>>>6)&63]+BASE64_ENCODE_CHAR[i&63];return d=n[$],g+=BASE64_ENCODE_CHAR[d>>>2]+BASE64_ENCODE_CHAR[d<<4&63]+"==",g};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(d,m,i){var g=i("./node_modules/@babel/runtime/helpers/typeof.js"),n=function(b){switch(g(b)){case"string":return b;case"boolean":return b?"true":"false";case"number":return isFinite(b)?b:"";default:return""}},$=function(b,M,J,Q){return M=M||"&",J=J||"=",b===null&&(b=void 0),g(b)==="object"?Object.keys(b).map(function(F){var L=encodeURIComponent(n(F))+J;return Array.isArray(b[F])?b[F].map(function(re){return L+encodeURIComponent(n(re))}).join(M):L+encodeURIComponent(n(b[F]))}).filter(Boolean).join(M):Q?encodeURIComponent(n(Q))+J+encodeURIComponent(n(b)):""},E=function(b,M,J){var Q={};return M.getAllResponseHeaders().trim().split(`
`).forEach(function(F){if(F){var L=F.indexOf(":"),re=F.substr(0,L).trim().toLowerCase(),G=F.substr(L+1).trim();Q[re]=G}}),{error:b,statusCode:M.status,statusMessage:M.statusText,headers:Q,body:J}},j=function(b,M){return!M&&M==="text"?b.responseText:b.response},Y=function(b,M){var J=(b.method||"GET").toUpperCase(),Q=b.url;if(b.qs){var F=$(b.qs);F&&(Q+=(Q.indexOf("?")===-1?"?":"&")+F)}var L=new XMLHttpRequest;if(L.open(J,Q,!0),L.responseType=b.dataType||"text",b.xhrFields)for(var re in b.xhrFields)L[re]=b.xhrFields[re];var G=b.headers;if(G)for(var ke in G)G.hasOwnProperty(ke)&&ke.toLowerCase()!=="content-length"&&ke.toLowerCase()!=="user-agent"&&ke.toLowerCase()!=="origin"&&ke.toLowerCase()!=="host"&&L.setRequestHeader(ke,G[ke]);return b.onProgress&&L.upload&&(L.upload.onprogress=b.onProgress),b.onDownloadProgress&&(L.onprogress=b.onDownloadProgress),b.timeout&&(L.timeout=b.timeout),L.ontimeout=function(N){var k=new Error("timeout");M(E(k,L))},L.onload=function(){M(E(null,L,j(L,b.dataType)))},L.onerror=function(N){var k=j(L,b.dataType);if(k)M(E(null,L,k));else{var p=L.statusText;!p&&L.status===0&&(p=new Error("CORS blocked or network error")),M(E(p,L,k))}},L.send(b.body||""),L};d.exports=Y},"./lib/xml2json.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,n=function(){this.version="1.3.5";var E={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},j=new RegExp(/(?!xmlns)^.*:/);return this.grokType=function(Y){return/^\s*$/.test(Y)?null:/^(?:true|false)$/i.test(Y)?Y.toLowerCase()==="true":isFinite(Y)?parseFloat(Y):Y},this.parseString=function(Y,D){if(Y){var b=this.stringToXML(Y);return b.getElementsByTagName("parsererror").length?null:this.parseXML(b,D)}else return null},this.parseXML=function(Y,D){for(var b in D)E[b]=D[b];var M={},J=0,Q="",F=Y.childNodes.length;if(F)for(var L,re,G,ke=0;ke<Y.childNodes.length;ke++)L=Y.childNodes.item(ke),L.nodeType===4?E.mergeCDATA&&(Q+=L.nodeValue):L.nodeType===3?Q+=L.nodeValue:L.nodeType===1&&(J===0&&(M={}),E.stripElemPrefix?re=L.nodeName.replace(j,""):re=L.nodeName,G=n.parseXML(L),M.hasOwnProperty(re)?(M[re].constructor!==Array&&(M[re]=[M[re]]),M[re].push(G)):(M[re]=G,J++));return Object.keys(M).length||(M=Q||""),M},this.xmlToString=function(Y){try{var D=Y.xml?Y.xml:new XMLSerializer().serializeToString(Y);return D}catch{return null}},this.stringToXML=function(Y){try{var D=null;if(window.DOMParser){var b=new g;return D=b.parseFromString(Y,"text/xml"),D}else return D=new ActiveXObject("Microsoft.XMLDOM"),D.async=!1,D.loadXML(Y),D}catch{return null}},this}.call({}),$=function(j){return n.parseString(j)};d.exports=$},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(d,m){function i(g,n){if(!(g instanceof n))throw new TypeError("Cannot call a class as a function")}d.exports=i,d.exports.__esModule=!0,d.exports.default=d.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(d,m){function i(n,$){for(var E=0;E<$.length;E++){var j=$[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(n,j.key,j)}}function g(n,$,E){return $&&i(n.prototype,$),E&&i(n,E),Object.defineProperty(n,"prototype",{writable:!1}),n}d.exports=g,d.exports.__esModule=!0,d.exports.default=d.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(d,m){function i(g){return d.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},d.exports.__esModule=!0,d.exports.default=d.exports,i(g)}d.exports=i,d.exports.__esModule=!0,d.exports.default=d.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(d,m,i){function g(j,Y){return Y===void 0&&(Y=Object),Y&&typeof Y.freeze=="function"?Y.freeze(j):j}function n(j,Y){if(j===null||typeof j!="object")throw new TypeError("target is not an object");for(var D in Y)Object.prototype.hasOwnProperty.call(Y,D)&&(j[D]=Y[D]);return j}var $=g({HTML:"text/html",isHTML:function(j){return j===$.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),E=g({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(j){return j===E.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});m.assign=n,m.freeze=g,m.MIME_TYPE=$,m.NAMESPACE=E},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/conventions.js"),n=i("./node_modules/@xmldom/xmldom/lib/dom.js"),$=i("./node_modules/@xmldom/xmldom/lib/entities.js"),E=i("./node_modules/@xmldom/xmldom/lib/sax.js"),j=n.DOMImplementation,Y=g.NAMESPACE,D=E.ParseError,b=E.XMLReader;function M(N){return N.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function J(N){this.options=N||{locator:{}}}J.prototype.parseFromString=function(N,k){var p=this.options,_=new b,h=p.domBuilder||new F,K=p.errorHandler,I=p.locator,H=p.xmlns||{},Se=/\/x?html?$/.test(k),B=Se?$.HTML_ENTITIES:$.XML_ENTITIES;I&&h.setDocumentLocator(I),_.errorHandler=Q(K,h,I),_.domBuilder=p.domBuilder||h,Se&&(H[""]=Y.HTML),H.xml=H.xml||Y.XML;var q=p.normalizeLineEndings||M;return N&&typeof N=="string"?_.parse(q(N),H,B):_.errorHandler.error("invalid doc source"),h.doc};function Q(N,k,p){if(!N){if(k instanceof F)return k;N=k}var _={},h=N instanceof Function;p=p||{};function K(I){var H=N[I];!H&&h&&(H=N.length==2?function(Se){N(I,Se)}:N),_[I]=H&&function(Se){H("[xmldom "+I+"]	"+Se+re(p))}||function(){}}return K("warning"),K("error"),K("fatalError"),_}function F(){this.cdata=!1}function L(N,k){k.lineNumber=N.lineNumber,k.columnNumber=N.columnNumber}F.prototype={startDocument:function(){this.doc=new j().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(N,k,p,_){var h=this.doc,K=h.createElementNS(N,p||k),I=_.length;ke(this,K),this.currentElement=K,this.locator&&L(this.locator,K);for(var H=0;H<I;H++){var N=_.getURI(H),Se=_.getValue(H),p=_.getQName(H),B=h.createAttributeNS(N,p);this.locator&&L(_.getLocator(H),B),B.value=B.nodeValue=Se,K.setAttributeNode(B)}},endElement:function(N,k,p){var _=this.currentElement;_.tagName,this.currentElement=_.parentNode},startPrefixMapping:function(N,k){},endPrefixMapping:function(N){},processingInstruction:function(N,k){var p=this.doc.createProcessingInstruction(N,k);this.locator&&L(this.locator,p),ke(this,p)},ignorableWhitespace:function(N,k,p){},characters:function(N,k,p){if(N=G.apply(this,arguments),N){if(this.cdata)var _=this.doc.createCDATASection(N);else var _=this.doc.createTextNode(N);this.currentElement?this.currentElement.appendChild(_):/^\s*$/.test(N)&&this.doc.appendChild(_),this.locator&&L(this.locator,_)}},skippedEntity:function(N){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(N){(this.locator=N)&&(N.lineNumber=0)},comment:function(N,k,p){N=G.apply(this,arguments);var _=this.doc.createComment(N);this.locator&&L(this.locator,_),ke(this,_)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(N,k,p){var _=this.doc.implementation;if(_&&_.createDocumentType){var h=_.createDocumentType(N,k,p);this.locator&&L(this.locator,h),ke(this,h),this.doc.doctype=h}},warning:function(N){console.warn("[xmldom warning]	"+N,re(this.locator))},error:function(N){console.error("[xmldom error]	"+N,re(this.locator))},fatalError:function(N){throw new D(N,this.locator)}};function re(N){if(N)return`
@`+(N.systemId||"")+"#[line:"+N.lineNumber+",col:"+N.columnNumber+"]"}function G(N,k,p){return typeof N=="string"?N.substr(k,p):N.length>=k+p||k?new java.lang.String(N,k,p)+"":N}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(N){F.prototype[N]=function(){return null}});function ke(N,k){N.currentElement?N.currentElement.appendChild(k):N.doc.appendChild(k)}m.__DOMHandler=F,m.normalizeLineEndings=M,m.DOMParser=J},"./node_modules/@xmldom/xmldom/lib/dom.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/conventions.js"),n=g.NAMESPACE;function $(r){return r!==""}function E(r){return r?r.split(/[\t\n\f\r ]+/).filter($):[]}function j(r,a){return r.hasOwnProperty(a)||(r[a]=!0),r}function Y(r){if(!r)return[];var a=E(r);return Object.keys(a.reduce(j,{}))}function D(r){return function(a){return r&&r.indexOf(a)!==-1}}function b(r,a){for(var S in r)a[S]=r[S]}function M(r,a){var S=r.prototype;if(!(S instanceof a)){let w=function(){};w.prototype=a.prototype,w=new w,b(S,w),r.prototype=S=w}S.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),S.constructor=r)}var J={},Q=J.ELEMENT_NODE=1,F=J.ATTRIBUTE_NODE=2,L=J.TEXT_NODE=3,re=J.CDATA_SECTION_NODE=4,G=J.ENTITY_REFERENCE_NODE=5,ke=J.ENTITY_NODE=6,N=J.PROCESSING_INSTRUCTION_NODE=7,k=J.COMMENT_NODE=8,p=J.DOCUMENT_NODE=9,_=J.DOCUMENT_TYPE_NODE=10,h=J.DOCUMENT_FRAGMENT_NODE=11,K=J.NOTATION_NODE=12,I={},H={};I.INDEX_SIZE_ERR=(H[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(H[2]="DOMString size error",2);var Se=I.HIERARCHY_REQUEST_ERR=(H[3]="Hierarchy request error",3);I.WRONG_DOCUMENT_ERR=(H[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(H[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(H[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(H[7]="No modification allowed",7);var B=I.NOT_FOUND_ERR=(H[8]="Not found",8);I.NOT_SUPPORTED_ERR=(H[9]="Not supported",9);var q=I.INUSE_ATTRIBUTE_ERR=(H[10]="Attribute in use",10);I.INVALID_STATE_ERR=(H[11]="Invalid state",11),I.SYNTAX_ERR=(H[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(H[13]="Invalid modification",13),I.NAMESPACE_ERR=(H[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(H[15]="Invalid access",15);function z(r,a){if(a instanceof Error)var S=a;else S=this,Error.call(this,H[r]),this.message=H[r],Error.captureStackTrace&&Error.captureStackTrace(this,z);return S.code=r,a&&(this.message=this.message+": "+a),S}z.prototype=Error.prototype,b(I,z);function Z(){}Z.prototype={length:0,item:function(r){return this[r]||null},toString:function(r,a){for(var S=[],w=0;w<this.length;w++)ne(this[w],S,r,a);return S.join("")}};function oe(r,a){this._node=r,this._refresh=a,ce(this)}function ce(r){var a=r._node._inc||r._node.ownerDocument._inc;if(r._inc!=a){var S=r._refresh(r._node);_e(r,"length",S.length),b(S,r),r._inc=a}}oe.prototype.item=function(r){return ce(this),this[r]},M(oe,Z);function ve(){}function ye(r,a){for(var S=r.length;S--;)if(r[S]===a)return S}function ie(r,a,S,w){if(w?a[ye(a,w)]=S:a[a.length++]=S,r){S.ownerElement=r;var W=r.ownerDocument;W&&(w&&Re(W,r,w),De(W,r,S))}}function pe(r,a,S){var w=ye(a,S);if(w>=0){for(var W=a.length-1;w<W;)a[w]=a[++w];if(a.length=W,r){var le=r.ownerDocument;le&&(Re(le,r,S),S.ownerElement=null)}}else throw z(B,new Error(r.tagName+"@"+S))}ve.prototype={length:0,item:Z.prototype.item,getNamedItem:function(r){for(var a=this.length;a--;){var S=this[a];if(S.nodeName==r)return S}},setNamedItem:function(r){var a=r.ownerElement;if(a&&a!=this._ownerElement)throw new z(q);var S=this.getNamedItem(r.nodeName);return ie(this._ownerElement,this,r,S),S},setNamedItemNS:function(r){var a=r.ownerElement,S;if(a&&a!=this._ownerElement)throw new z(q);return S=this.getNamedItemNS(r.namespaceURI,r.localName),ie(this._ownerElement,this,r,S),S},removeNamedItem:function(r){var a=this.getNamedItem(r);return pe(this._ownerElement,this,a),a},removeNamedItemNS:function(r,a){var S=this.getNamedItemNS(r,a);return pe(this._ownerElement,this,S),S},getNamedItemNS:function(r,a){for(var S=this.length;S--;){var w=this[S];if(w.localName==a&&w.namespaceURI==r)return w}return null}};function ge(){}ge.prototype={hasFeature:function(r,a){return!0},createDocument:function(r,a,S){var w=new Te;if(w.implementation=this,w.childNodes=new Z,w.doctype=S||null,S&&w.appendChild(S),a){var W=w.createElementNS(r,a);w.appendChild(W)}return w},createDocumentType:function(r,a,S){var w=new ae;return w.name=r,w.nodeName=r,w.publicId=a||"",w.systemId=S||"",w}};function me(){}me.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,a){return Ne(this,r,a)},replaceChild:function(r,a){this.insertBefore(r,a),a&&this.removeChild(a)},removeChild:function(r){return we(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return X(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var a=r.nextSibling;a&&a.nodeType==L&&r.nodeType==L?(this.removeChild(a),r.appendData(a.data)):(r.normalize(),r=a)}},isSupported:function(r,a){return this.ownerDocument.implementation.hasFeature(r,a)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var a=this;a;){var S=a._nsMap;if(S){for(var w in S)if(S[w]==r)return w}a=a.nodeType==F?a.ownerDocument:a.parentNode}return null},lookupNamespaceURI:function(r){for(var a=this;a;){var S=a._nsMap;if(S&&r in S)return S[r];a=a.nodeType==F?a.ownerDocument:a.parentNode}return null},isDefaultNamespace:function(r){var a=this.lookupPrefix(r);return a==null}};function fe(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}b(J,me),b(J,me.prototype);function se(r,a){if(a(r))return!0;if(r=r.firstChild)do if(se(r,a))return!0;while(r=r.nextSibling)}function Te(){}function De(r,a,S){r&&r._inc++;var w=S.namespaceURI;w===n.XMLNS&&(a._nsMap[S.prefix?S.localName:""]=S.value)}function Re(r,a,S,w){r&&r._inc++;var W=S.namespaceURI;W===n.XMLNS&&delete a._nsMap[S.prefix?S.localName:""]}function be(r,a,S){if(r&&r._inc){r._inc++;var w=a.childNodes;if(S)w[w.length++]=S;else{for(var W=a.firstChild,le=0;W;)w[le++]=W,W=W.nextSibling;w.length=le,delete w[w.length]}}}function we(r,a){var S=a.previousSibling,w=a.nextSibling;return S?S.nextSibling=w:r.firstChild=w,w?w.previousSibling=S:r.lastChild=S,a.parentNode=null,a.previousSibling=null,a.nextSibling=null,be(r.ownerDocument,r),a}function Ne(r,a,S){var w=a.parentNode;if(w&&w.removeChild(a),a.nodeType===h){var W=a.firstChild;if(W==null)return a;var le=a.lastChild}else W=le=a;var Oe=S?S.previousSibling:r.lastChild;W.previousSibling=Oe,le.nextSibling=S,Oe?Oe.nextSibling=W:r.firstChild=W,S==null?r.lastChild=le:S.previousSibling=le;do W.parentNode=r;while(W!==le&&(W=W.nextSibling));return be(r.ownerDocument||r,r),a.nodeType==h&&(a.firstChild=a.lastChild=null),a}function Ue(r,a){return a.parentNode&&a.parentNode.removeChild(a),a.parentNode=r,a.previousSibling=r.lastChild,a.nextSibling=null,a.previousSibling?a.previousSibling.nextSibling=a:r.firstChild=a,r.lastChild=a,be(r.ownerDocument,r,a),a}Te.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,a){if(r.nodeType==h){for(var S=r.firstChild;S;){var w=S.nextSibling;this.insertBefore(S,a),S=w}return r}return this.documentElement==null&&r.nodeType==Q&&(this.documentElement=r),Ne(this,r,a),r.ownerDocument=this,r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),we(this,r)},importNode:function(r,a){return Ce(this,r,a)},getElementById:function(r){var a=null;return se(this.documentElement,function(S){if(S.nodeType==Q&&S.getAttribute("id")==r)return a=S,!0}),a},getElementsByClassName:function(r){var a=Y(r);return new oe(this,function(S){var w=[];return a.length>0&&se(S.documentElement,function(W){if(W!==S&&W.nodeType===Q){var le=W.getAttribute("class");if(le){var Oe=r===le;if(!Oe){var Me=Y(le);Oe=a.every(D(Me))}Oe&&w.push(W)}}}),w})},createElement:function(r){var a=new Be;a.ownerDocument=this,a.nodeName=r,a.tagName=r,a.localName=r,a.childNodes=new Z;var S=a.attributes=new ve;return S._ownerElement=a,a},createDocumentFragment:function(){var r=new v;return r.ownerDocument=this,r.childNodes=new Z,r},createTextNode:function(r){var a=new U;return a.ownerDocument=this,a.appendData(r),a},createComment:function(r){var a=new O;return a.ownerDocument=this,a.appendData(r),a},createCDATASection:function(r){var a=new ue;return a.ownerDocument=this,a.appendData(r),a},createProcessingInstruction:function(r,a){var S=new s;return S.ownerDocument=this,S.tagName=S.target=r,S.nodeValue=S.data=a,S},createAttribute:function(r){var a=new ee;return a.ownerDocument=this,a.name=r,a.nodeName=r,a.localName=r,a.specified=!0,a},createEntityReference:function(r){var a=new u;return a.ownerDocument=this,a.nodeName=r,a},createElementNS:function(r,a){var S=new Be,w=a.split(":"),W=S.attributes=new ve;return S.childNodes=new Z,S.ownerDocument=this,S.nodeName=a,S.tagName=a,S.namespaceURI=r,w.length==2?(S.prefix=w[0],S.localName=w[1]):S.localName=a,W._ownerElement=S,S},createAttributeNS:function(r,a){var S=new ee,w=a.split(":");return S.ownerDocument=this,S.nodeName=a,S.name=a,S.namespaceURI=r,S.specified=!0,w.length==2?(S.prefix=w[0],S.localName=w[1]):S.localName=a,S}},M(Te,me);function Be(){this._nsMap={}}Be.prototype={nodeType:Q,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var a=this.getAttributeNode(r);return a&&a.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,a){var S=this.ownerDocument.createAttribute(r);S.value=S.nodeValue=""+a,this.setAttributeNode(S)},removeAttribute:function(r){var a=this.getAttributeNode(r);a&&this.removeAttributeNode(a)},appendChild:function(r){return r.nodeType===h?this.insertBefore(r,null):Ue(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,a){var S=this.getAttributeNodeNS(r,a);S&&this.removeAttributeNode(S)},hasAttributeNS:function(r,a){return this.getAttributeNodeNS(r,a)!=null},getAttributeNS:function(r,a){var S=this.getAttributeNodeNS(r,a);return S&&S.value||""},setAttributeNS:function(r,a,S){var w=this.ownerDocument.createAttributeNS(r,a);w.value=w.nodeValue=""+S,this.setAttributeNode(w)},getAttributeNodeNS:function(r,a){return this.attributes.getNamedItemNS(r,a)},getElementsByTagName:function(r){return new oe(this,function(a){var S=[];return se(a,function(w){w!==a&&w.nodeType==Q&&(r==="*"||w.tagName==r)&&S.push(w)}),S})},getElementsByTagNameNS:function(r,a){return new oe(this,function(S){var w=[];return se(S,function(W){W!==S&&W.nodeType===Q&&(r==="*"||W.namespaceURI===r)&&(a==="*"||W.localName==a)&&w.push(W)}),w})}},Te.prototype.getElementsByTagName=Be.prototype.getElementsByTagName,Te.prototype.getElementsByTagNameNS=Be.prototype.getElementsByTagNameNS,M(Be,me);function ee(){}ee.prototype.nodeType=F,M(ee,me);function R(){}R.prototype={data:"",substringData:function(r,a){return this.data.substring(r,r+a)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,a){this.replaceData(r,0,a)},appendChild:function(r){throw new Error(H[Se])},deleteData:function(r,a){this.replaceData(r,a,"")},replaceData:function(r,a,S){var w=this.data.substring(0,r),W=this.data.substring(r+a);S=w+S+W,this.nodeValue=this.data=S,this.length=S.length}},M(R,me);function U(){}U.prototype={nodeName:"#text",nodeType:L,splitText:function(r){var a=this.data,S=a.substring(r);a=a.substring(0,r),this.data=this.nodeValue=a,this.length=a.length;var w=this.ownerDocument.createTextNode(S);return this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling),w}},M(U,R);function O(){}O.prototype={nodeName:"#comment",nodeType:k},M(O,R);function ue(){}ue.prototype={nodeName:"#cdata-section",nodeType:re},M(ue,R);function ae(){}ae.prototype.nodeType=_,M(ae,me);function Ae(){}Ae.prototype.nodeType=K,M(Ae,me);function x(){}x.prototype.nodeType=ke,M(x,me);function u(){}u.prototype.nodeType=G,M(u,me);function v(){}v.prototype.nodeName="#document-fragment",v.prototype.nodeType=h,M(v,me);function s(){}s.prototype.nodeType=N,M(s,me);function y(){}y.prototype.serializeToString=function(r,a,S){return A.call(r,a,S)},me.prototype.toString=A;function A(r,a){var S=[],w=this.nodeType==9&&this.documentElement||this,W=w.prefix,le=w.namespaceURI;if(le&&W==null){var W=w.lookupPrefix(le);if(W==null)var Oe=[{namespace:le,prefix:null}]}return ne(this,S,r,a,Oe),S.join("")}function P(r,a,S){var w=r.prefix||"",W=r.namespaceURI;if(!W||w==="xml"&&W===n.XML||W===n.XMLNS)return!1;for(var le=S.length;le--;){var Oe=S[le];if(Oe.prefix===w)return Oe.namespace!==W}return!0}function te(r,a,S){r.push(" ",a,'="',S.replace(/[<>&"\t\n\r]/g,fe),'"')}function ne(r,a,S,w,W){if(W||(W=[]),w)if(r=w(r),r){if(typeof r=="string"){a.push(r);return}}else return;switch(r.nodeType){case Q:var le=r.attributes,Oe=le.length,Qe=r.firstChild,Me=r.tagName;S=n.isHTML(r.namespaceURI)||S;var Xe=Me;if(!S&&!r.prefix&&r.namespaceURI){for(var Je,je=0;je<le.length;je++)if(le.item(je).name==="xmlns"){Je=le.item(je).value;break}if(!Je)for(var qe=W.length-1;qe>=0;qe--){var He=W[qe];if(He.prefix===""&&He.namespace===r.namespaceURI){Je=He.namespace;break}}if(Je!==r.namespaceURI)for(var qe=W.length-1;qe>=0;qe--){var He=W[qe];if(He.namespace===r.namespaceURI){He.prefix&&(Xe=He.prefix+":"+Me);break}}}a.push("<",Xe);for(var Ke=0;Ke<Oe;Ke++){var Ye=le.item(Ke);Ye.prefix=="xmlns"?W.push({prefix:Ye.localName,namespace:Ye.value}):Ye.nodeName=="xmlns"&&W.push({prefix:"",namespace:Ye.value})}for(var Ke=0;Ke<Oe;Ke++){var Ye=le.item(Ke);if(P(Ye,S,W)){var de=Ye.prefix||"",ze=Ye.namespaceURI;te(a,de?"xmlns:"+de:"xmlns",ze),W.push({prefix:de,namespace:ze})}ne(Ye,a,S,w,W)}if(Me===Xe&&P(r,S,W)){var de=r.prefix||"",ze=r.namespaceURI;te(a,de?"xmlns:"+de:"xmlns",ze),W.push({prefix:de,namespace:ze})}if(Qe||S&&!/^(?:meta|link|img|br|hr|input)$/i.test(Me)){if(a.push(">"),S&&/^script$/i.test(Me))for(;Qe;)Qe.data?a.push(Qe.data):ne(Qe,a,S,w,W.slice()),Qe=Qe.nextSibling;else for(;Qe;)ne(Qe,a,S,w,W.slice()),Qe=Qe.nextSibling;a.push("</",Xe,">")}else a.push("/>");return;case p:case h:for(var Qe=r.firstChild;Qe;)ne(Qe,a,S,w,W.slice()),Qe=Qe.nextSibling;return;case F:return te(a,r.name,r.value);case L:return a.push(r.data.replace(/[<&>]/g,fe));case re:return a.push("<![CDATA[",r.data,"]]>");case k:return a.push("<!--",r.data,"-->");case _:var Ie=r.publicId,e=r.systemId;if(a.push("<!DOCTYPE ",r.name),Ie)a.push(" PUBLIC ",Ie),e&&e!="."&&a.push(" ",e),a.push(">");else if(e&&e!=".")a.push(" SYSTEM ",e,">");else{var o=r.internalSubset;o&&a.push(" [",o,"]"),a.push(">")}return;case N:return a.push("<?",r.target," ",r.data,"?>");case G:return a.push("&",r.nodeName,";");default:a.push("??",r.nodeName)}}function Ce(r,a,S){var w;switch(a.nodeType){case Q:w=a.cloneNode(!1),w.ownerDocument=r;case h:break;case F:S=!0;break}if(w||(w=a.cloneNode(!1)),w.ownerDocument=r,w.parentNode=null,S)for(var W=a.firstChild;W;)w.appendChild(Ce(r,W,S)),W=W.nextSibling;return w}function X(r,a,S){var w=new a.constructor;for(var W in a){var le=a[W];typeof le!="object"&&le!=w[W]&&(w[W]=le)}switch(a.childNodes&&(w.childNodes=new Z),w.ownerDocument=r,w.nodeType){case Q:var Oe=a.attributes,Me=w.attributes=new ve,Xe=Oe.length;Me._ownerElement=w;for(var Je=0;Je<Xe;Je++)w.setAttributeNode(X(r,Oe.item(Je),!0));break;case F:S=!0}if(S)for(var je=a.firstChild;je;)w.appendChild(X(r,je,S)),je=je.nextSibling;return w}function _e(r,a,S){r[a]=S}try{if(Object.defineProperty){let r=function(a){switch(a.nodeType){case Q:case h:var S=[];for(a=a.firstChild;a;)a.nodeType!==7&&a.nodeType!==8&&S.push(r(a)),a=a.nextSibling;return S.join("");default:return a.nodeValue}};Object.defineProperty(oe.prototype,"length",{get:function(){return ce(this),this.$$length}}),Object.defineProperty(me.prototype,"textContent",{get:function(){return r(this)},set:function(a){switch(this.nodeType){case Q:case h:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),_e=function(a,S,w){a["$$"+S]=w}}}catch{}m.DocumentType=ae,m.DOMException=z,m.DOMImplementation=ge,m.Element=Be,m.Node=me,m.NodeList=Z,m.XMLSerializer=y},"./node_modules/@xmldom/xmldom/lib/entities.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;m.XML_ENTITIES=g({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),m.HTML_ENTITIES=g({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),m.entityMap=m.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/dom.js");m.DOMImplementation=g.DOMImplementation,m.XMLSerializer=g.XMLSerializer,m.DOMParser=i("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(d,m,i){var g=i("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),E=new RegExp("^"+n.source+$.source+"*(?::"+n.source+$.source+"*)?$"),j=0,Y=1,D=2,b=3,M=4,J=5,Q=6,F=7;function L(B,q){this.message=B,this.locator=q,Error.captureStackTrace&&Error.captureStackTrace(this,L)}L.prototype=new Error,L.prototype.name=L.name;function re(){}re.prototype={parse:function(B,q,z){var Z=this.domBuilder;Z.startDocument(),h(q,q={}),G(B,q,z,Z,this.errorHandler),Z.endDocument()}};function G(B,q,z,Z,oe){function ce(s){if(s>65535){s-=65536;var y=55296+(s>>10),A=56320+(s&1023);return String.fromCharCode(y,A)}else return String.fromCharCode(s)}function ve(s){var y=s.slice(1,-1);return Object.hasOwnProperty.call(z,y)?z[y]:y.charAt(0)==="#"?ce(parseInt(y.substr(1).replace("x","0x"))):(oe.error("entity not found:"+s),s)}function ye(s){if(s>De){var y=B.substring(De,s).replace(/&#?\w+;/g,ve);fe&&ie(De),Z.characters(y,0,s-De),De=s}}function ie(s,y){for(;s>=ge&&(y=me.exec(B));)pe=y.index,ge=pe+y[0].length,fe.lineNumber++;fe.columnNumber=s-pe+1}for(var pe=0,ge=0,me=/.*(?:\r\n?|\n)|.*$/g,fe=Z.locator,se=[{currentNSMap:q}],Te={},De=0;;){try{var Re=B.indexOf("<",De);if(Re<0){if(!B.substr(De).match(/^\s*$/)){var be=Z.doc,we=be.createTextNode(B.substr(De));be.appendChild(we),Z.currentElement=we}return}switch(Re>De&&ye(Re),B.charAt(Re+1)){case"/":var ae=B.indexOf(">",Re+3),Ne=B.substring(Re+2,ae).replace(/[ \t\n\r]+$/g,""),Ue=se.pop();ae<0?(Ne=B.substring(Re+2).replace(/[\s<].*/,""),oe.error("end tag name: "+Ne+" is not complete:"+Ue.tagName),ae=Re+1+Ne.length):Ne.match(/\s</)&&(Ne=Ne.replace(/[\s<].*/,""),oe.error("end tag name: "+Ne+" maybe not complete"),ae=Re+1+Ne.length);var Be=Ue.localNSMap,ee=Ue.tagName==Ne,R=ee||Ue.tagName&&Ue.tagName.toLowerCase()==Ne.toLowerCase();if(R){if(Z.endElement(Ue.uri,Ue.localName,Ne),Be)for(var U in Be)Z.endPrefixMapping(U);ee||oe.fatalError("end tag name: "+Ne+" is not match the current start tagName:"+Ue.tagName)}else se.push(Ue);ae++;break;case"?":fe&&ie(Re),ae=I(B,Re,Z);break;case"!":fe&&ie(Re),ae=K(B,Re,Z,oe);break;default:fe&&ie(Re);var O=new H,ue=se[se.length-1].currentNSMap,ae=N(B,Re,O,ue,ve,oe),Ae=O.length;if(!O.closed&&_(B,ae,O.tagName,Te)&&(O.closed=!0,z.nbsp||oe.warning("unclosed xml attribute")),fe&&Ae){for(var x=ke(fe,{}),u=0;u<Ae;u++){var v=O[u];ie(v.offset),v.locator=ke(fe,{})}Z.locator=x,k(O,Z,ue)&&se.push(O),Z.locator=fe}else k(O,Z,ue)&&se.push(O);g.isHTML(O.uri)&&!O.closed?ae=p(B,ae,O.tagName,ve,Z):ae++}}catch(s){if(s instanceof L)throw s;oe.error("element parse error: "+s),ae=-1}ae>De?De=ae:ye(Math.max(Re,De)+1)}}function ke(B,q){return q.lineNumber=B.lineNumber,q.columnNumber=B.columnNumber,q}function N(B,q,z,Z,oe,ce){function ve(fe,se,Te){z.attributeNames.hasOwnProperty(fe)&&ce.fatalError("Attribute "+fe+" redefined"),z.addValue(fe,se.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,oe),Te)}for(var ye,ie,pe=++q,ge=j;;){var me=B.charAt(pe);switch(me){case"=":if(ge===Y)ye=B.slice(q,pe),ge=b;else if(ge===D)ge=b;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ge===b||ge===Y)if(ge===Y&&(ce.warning('attribute value must after "="'),ye=B.slice(q,pe)),q=pe+1,pe=B.indexOf(me,q),pe>0)ie=B.slice(q,pe),ve(ye,ie,q-1),ge=J;else throw new Error("attribute value no end '"+me+"' match");else if(ge==M)ie=B.slice(q,pe),ve(ye,ie,q),ce.warning('attribute "'+ye+'" missed start quot('+me+")!!"),q=pe+1,ge=J;else throw new Error('attribute value must after "="');break;case"/":switch(ge){case j:z.setTagName(B.slice(q,pe));case J:case Q:case F:ge=F,z.closed=!0;case M:case Y:case D:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ce.error("unexpected end of input"),ge==j&&z.setTagName(B.slice(q,pe)),pe;case">":switch(ge){case j:z.setTagName(B.slice(q,pe));case J:case Q:case F:break;case M:case Y:ie=B.slice(q,pe),ie.slice(-1)==="/"&&(z.closed=!0,ie=ie.slice(0,-1));case D:ge===D&&(ie=ye),ge==M?(ce.warning('attribute "'+ie+'" missed quot(")!'),ve(ye,ie,q)):((!g.isHTML(Z[""])||!ie.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+ie+'" missed value!! "'+ie+'" instead!!'),ve(ie,ie,q));break;case b:throw new Error("attribute value missed!!")}return pe;case"\x80":me=" ";default:if(me<=" ")switch(ge){case j:z.setTagName(B.slice(q,pe)),ge=Q;break;case Y:ye=B.slice(q,pe),ge=D;break;case M:var ie=B.slice(q,pe);ce.warning('attribute "'+ie+'" missed quot(")!!'),ve(ye,ie,q);case J:ge=Q;break}else switch(ge){case D:z.tagName,(!g.isHTML(Z[""])||!ye.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+ye+'" missed value!! "'+ye+'" instead2!!'),ve(ye,ye,q),q=pe,ge=Y;break;case J:ce.warning('attribute space is required"'+ye+'"!!');case Q:ge=Y,q=pe;break;case b:ge=M,q=pe;break;case F:throw new Error("elements closed character '/' and '>' must be connected to")}}pe++}}function k(B,q,z){for(var Z=B.tagName,oe=null,me=B.length;me--;){var ce=B[me],ve=ce.qName,ye=ce.value,fe=ve.indexOf(":");if(fe>0)var ie=ce.prefix=ve.slice(0,fe),pe=ve.slice(fe+1),ge=ie==="xmlns"&&pe;else pe=ve,ie=null,ge=ve==="xmlns"&&"";ce.localName=pe,ge!==!1&&(oe==null&&(oe={},h(z,z={})),z[ge]=oe[ge]=ye,ce.uri=g.XMLNS,q.startPrefixMapping(ge,ye))}for(var me=B.length;me--;){ce=B[me];var ie=ce.prefix;ie&&(ie==="xml"&&(ce.uri=g.XML),ie!=="xmlns"&&(ce.uri=z[ie||""]))}var fe=Z.indexOf(":");fe>0?(ie=B.prefix=Z.slice(0,fe),pe=B.localName=Z.slice(fe+1)):(ie=null,pe=B.localName=Z);var se=B.uri=z[ie||""];if(q.startElement(se,pe,Z,B),B.closed){if(q.endElement(se,pe,Z),oe)for(ie in oe)q.endPrefixMapping(ie)}else return B.currentNSMap=z,B.localNSMap=oe,!0}function p(B,q,z,Z,oe){if(/^(?:script|textarea)$/i.test(z)){var ce=B.indexOf("</"+z+">",q),ve=B.substring(q+1,ce);if(/[&<]/.test(ve))return/^script$/i.test(z)?(oe.characters(ve,0,ve.length),ce):(ve=ve.replace(/&#?\w+;/g,Z),oe.characters(ve,0,ve.length),ce)}return q+1}function _(B,q,z,Z){var oe=Z[z];return oe==null&&(oe=B.lastIndexOf("</"+z+">"),oe<q&&(oe=B.lastIndexOf("</"+z)),Z[z]=oe),oe<q}function h(B,q){for(var z in B)q[z]=B[z]}function K(B,q,z,Z){var oe=B.charAt(q+2);switch(oe){case"-":if(B.charAt(q+3)==="-"){var ce=B.indexOf("-->",q+4);return ce>q?(z.comment(B,q+4,ce-q-4),ce+3):(Z.error("Unclosed comment"),-1)}else return-1;default:if(B.substr(q+3,6)=="CDATA["){var ce=B.indexOf("]]>",q+9);return z.startCDATA(),z.characters(B,q+9,ce-q-9),z.endCDATA(),ce+3}var ve=Se(B,q),ye=ve.length;if(ye>1&&/!doctype/i.test(ve[0][0])){var ie=ve[1][0],pe=!1,ge=!1;ye>3&&(/^public$/i.test(ve[2][0])?(pe=ve[3][0],ge=ye>4&&ve[4][0]):/^system$/i.test(ve[2][0])&&(ge=ve[3][0]));var me=ve[ye-1];return z.startDTD(ie,pe,ge),z.endDTD(),me.index+me[0].length}}return-1}function I(B,q,z){var Z=B.indexOf("?>",q);if(Z){var oe=B.substring(q,Z).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return oe?(oe[0].length,z.processingInstruction(oe[1],oe[2]),Z+2):-1}return-1}function H(){this.attributeNames={}}H.prototype={setTagName:function(B){if(!E.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,q,z){if(!E.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:q,offset:z}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}};function Se(B,q){var z,Z=[],oe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(oe.lastIndex=q,oe.exec(B);z=oe.exec(B);)if(Z.push(z),z[1])return Z}m.XMLReader=re,m.ParseError=L},"./node_modules/process/browser.js":function(d,m){var i=d.exports={},g,n;function $(){throw new Error("setTimeout has not been defined")}function E(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=$}catch{g=$}try{typeof clearTimeout=="function"?n=clearTimeout:n=E}catch{n=E}})();function j(G){if(g===setTimeout)return setTimeout(G,0);if((g===$||!g)&&setTimeout)return g=setTimeout,setTimeout(G,0);try{return g(G,0)}catch{try{return g.call(null,G,0)}catch{return g.call(this,G,0)}}}function Y(G){if(n===clearTimeout)return clearTimeout(G);if((n===E||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(G);try{return n(G)}catch{try{return n.call(null,G)}catch{return n.call(this,G)}}}var D=[],b=!1,M,J=-1;function Q(){!b||!M||(b=!1,M.length?D=M.concat(D):J=-1,D.length&&F())}function F(){if(!b){var G=j(Q);b=!0;for(var ke=D.length;ke;){for(M=D,D=[];++J<ke;)M&&M[J].run();J=-1,ke=D.length}M=null,b=!1,Y(G)}}i.nextTick=function(G){var ke=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)ke[N-1]=arguments[N];D.push(new L(G,ke)),D.length===1&&!b&&j(F)};function L(G,ke){this.fun=G,this.array=ke}L.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function re(){}i.on=re,i.addListener=re,i.once=re,i.off=re,i.removeListener=re,i.removeAllListeners=re,i.emit=re,i.prependListener=re,i.prependOnceListener=re,i.listeners=function(G){return[]},i.binding=function(G){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(G){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(d,m){(function(i){d.exports=i}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(d,m){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}d.exports=i},"./node_modules/webpack/buildin/module.js":function(d,m){d.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},"./package.json":function(d){d.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.6","description":"JavaScript SDK for [\u817E\u8BAF\u4E91\u5BF9\u8C61\u5B58\u50A8](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.2"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(d,m,i){var g=i("./node_modules/@babel/runtime/helpers/typeof.js"),n=i("./src/session.js"),$=i("./src/async.js"),E=i("./src/event.js").EventProxy,j=i("./src/util.js"),Y=i("./src/tracker.js");function D(h,K){var I=this,H=new E,Se=h.TaskId,B=h.Bucket,q=h.Region,z=h.Key,Z=h.Body,oe=h.ChunkSize||h.SliceSize||I.options.ChunkSize,ce=h.AsyncLimit,ve=h.StorageClass,ye=h.ServerSideEncryption,ie,pe,ge=h.onHashProgress,me=h.tracker;me&&me.setParams({chunkSize:oe}),H.on("error",function(fe){if(!!I._isRunningTask(Se))return fe.UploadId=h.UploadData.UploadId||"",K(fe)}),H.on("upload_complete",function(fe){var se=j.extend({UploadId:h.UploadData.UploadId||""},fe);K(null,se)}),H.on("upload_slice_complete",function(fe){var se={};j.each(h.Headers,function(Te,De){var Re=De.toLowerCase();(Re.indexOf("x-cos-meta-")===0||Re==="pic-operations")&&(se[De]=Te)}),L.call(I,{Bucket:B,Region:q,Key:z,UploadId:fe.UploadId,SliceList:fe.SliceList,Headers:se,tracker:me},function(Te,De){if(!!I._isRunningTask(Se)){if(n.removeUsing(fe.UploadId),Te)return pe(null,!0),H.emit("error",Te);n.removeUploadId.call(I,fe.UploadId),pe({loaded:ie,total:ie},!0),H.emit("upload_complete",De)}})}),H.on("get_upload_data_finish",function(fe){var se=n.getFileId(Z,h.ChunkSize,B,z);se&&n.saveUploadId.call(I,se,fe.UploadId,I.options.UploadIdCacheLimit),n.setUsing(fe.UploadId),pe(null,!0),Q.call(I,{TaskId:Se,Bucket:B,Region:q,Key:z,Body:Z,FileSize:ie,SliceSize:oe,AsyncLimit:ce,ServerSideEncryption:ye,UploadData:fe,Headers:h.Headers,onProgress:pe,tracker:me},function(Te,De){if(!!I._isRunningTask(Se)){if(Te)return pe(null,!0),H.emit("error",Te);H.emit("upload_slice_complete",De)}})}),H.on("get_file_size_finish",function(){if(pe=j.throttleOnProgress.call(I,ie,h.onProgress),h.UploadData.UploadId)H.emit("get_upload_data_finish",h.UploadData);else{var fe=j.extend({TaskId:Se,Bucket:B,Region:q,Key:z,Headers:h.Headers,StorageClass:ve,Body:Z,FileSize:ie,SliceSize:oe,onHashProgress:ge,tracker:me},h);b.call(I,fe,function(se,Te){if(!!I._isRunningTask(Se)){if(se)return H.emit("error",se);h.UploadData.UploadId=Te.UploadId,h.UploadData.PartList=Te.PartList,H.emit("get_upload_data_finish",h.UploadData)}})}}),ie=h.ContentLength,delete h.ContentLength,!h.Headers&&(h.Headers={}),j.each(h.Headers,function(fe,se){se.toLowerCase()==="content-length"&&delete h.Headers[se]}),function(){for(var fe=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],se=1024*1024,Te=0;Te<fe.length&&(se=fe[Te]*1024*1024,!(ie/se<=I.options.MaxPartNumber));Te++);h.ChunkSize=h.SliceSize=oe=Math.max(oe,se)}(),ie===0?(h.Body="",h.ContentLength=0,h.SkipTask=!0,I.putObject(h,K)):H.emit("get_file_size_finish")}function b(h,K){var I=h.TaskId,H=h.Bucket,Se=h.Region,B=h.Key,q=h.StorageClass,z=this,Z={},oe=h.FileSize,ce=h.SliceSize,ve=Math.ceil(oe/ce),ye=0,ie=j.throttleOnProgress.call(z,oe,h.onHashProgress),pe=function(se,Te){var De=ce*(se-1),Re=Math.min(De+ce,oe),be=Re-De;Z[se]?Te(null,{PartNumber:se,ETag:Z[se],Size:be}):j.fileSlice(h.Body,De,Re,!1,function(we){j.getFileMd5(we,function(Ne,Ue){if(Ne)return Te(j.error(Ne));var Be='"'+Ue+'"';Z[se]=Be,ye+=be,ie({loaded:ye,total:oe}),Te(null,{PartNumber:se,ETag:Be,Size:be})})})},ge=function(se,Te){var De=se.length;if(De===0)return Te(null,!0);if(De>ve)return Te(null,!1);if(De>1){var Re=Math.max(se[0].Size,se[1].Size);if(Re!==ce)return Te(null,!1)}var be=function we(Ne){if(Ne<De){var Ue=se[Ne];pe(Ue.PartNumber,function(Be,ee){ee&&ee.ETag===Ue.ETag&&ee.Size===Ue.Size?we(Ne+1):Te(null,!1)})}else Te(null,!0)};be(0)},me=new E;me.on("error",function(fe){if(!!z._isRunningTask(I))return K(fe)}),me.on("upload_id_available",function(fe){var se={},Te=[];j.each(fe.PartList,function(be){se[be.PartNumber]=be});for(var De=1;De<=ve;De++){var Re=se[De];Re?(Re.PartNumber=De,Re.Uploaded=!0):Re={PartNumber:De,ETag:null,Uploaded:!1},Te.push(Re)}fe.PartList=Te,K(null,fe)}),me.on("no_available_upload_id",function(){if(!!z._isRunningTask(I)){var fe=j.extend({Bucket:H,Region:Se,Key:B,Query:j.clone(h.Query),StorageClass:q,Body:h.Body,calledBySdk:"sliceUploadFile",tracker:h.tracker},h),se=j.clone(h.Headers);delete se["x-cos-mime-limit"],fe.Headers=se,z.multipartInit(fe,function(Te,De){if(!!z._isRunningTask(I)){if(Te)return me.emit("error",Te);var Re=De.UploadId;if(!Re)return K(j.error(new Error("no such upload id")));me.emit("upload_id_available",{UploadId:Re,PartList:[]})}})}}),me.on("has_and_check_upload_id",function(fe){fe=fe.reverse(),$.eachLimit(fe,1,function(se,Te){if(!!z._isRunningTask(I)){if(n.using[se]){Te();return}J.call(z,{Bucket:H,Region:Se,Key:B,UploadId:se,tracker:h.tracker},function(De,Re){if(!!z._isRunningTask(I)){if(De)return n.removeUsing(se),me.emit("error",De);var be=Re.PartList;be.forEach(function(we){we.PartNumber*=1,we.Size*=1,we.ETag=we.ETag||""}),ge(be,function(we,Ne){if(!!z._isRunningTask(I)){if(we)return me.emit("error",we);Ne?Te({UploadId:se,PartList:be}):Te()}})}})}},function(se){!z._isRunningTask(I)||(ie(null,!0),se&&se.UploadId?me.emit("upload_id_available",se):me.emit("no_available_upload_id"))})}),me.on("seek_local_avail_upload_id",function(fe){var se=n.getFileId(h.Body,h.ChunkSize,H,B),Te=n.getUploadIdList.call(z,se);if(!se||!Te){me.emit("has_and_check_upload_id",fe);return}var De=function Re(be){if(be>=Te.length){me.emit("has_and_check_upload_id",fe);return}var we=Te[be];if(!j.isInArray(fe,we)){n.removeUploadId.call(z,we),Re(be+1);return}if(n.using[we]){Re(be+1);return}J.call(z,{Bucket:H,Region:Se,Key:B,UploadId:we,tracker:h.tracker},function(Ne,Ue){!z._isRunningTask(I)||(Ne?(n.removeUploadId.call(z,we),Re(be+1)):me.emit("upload_id_available",{UploadId:we,PartList:Ue.PartList}))})};De(0)}),me.on("get_remote_upload_id_list",function(){M.call(z,{Bucket:H,Region:Se,Key:B,tracker:h.tracker},function(fe,se){if(!!z._isRunningTask(I)){if(fe)return me.emit("error",fe);var Te=j.filter(se.UploadList,function(be){return be.Key===B&&(!q||be.StorageClass.toUpperCase()===q.toUpperCase())}).reverse().map(function(be){return be.UploadId||be.UploadID});if(Te.length)me.emit("seek_local_avail_upload_id",Te);else{var De=n.getFileId(h.Body,h.ChunkSize,H,B),Re;De&&(Re=n.getUploadIdList.call(z,De))&&j.each(Re,function(be){n.removeUploadId.call(z,be)}),me.emit("no_available_upload_id")}}})}),me.emit("get_remote_upload_id_list")}function M(h,K){var I=this,H=[],Se={Bucket:h.Bucket,Region:h.Region,Prefix:h.Key,calledBySdk:h.calledBySdk||"sliceUploadFile",tracker:h.tracker},B=function q(){I.multipartList(Se,function(z,Z){if(z)return K(z);H.push.apply(H,Z.Upload||[]),Z.IsTruncated==="true"?(Se.KeyMarker=Z.NextKeyMarker,Se.UploadIdMarker=Z.NextUploadIdMarker,q()):K(null,{UploadList:H})})};B()}function J(h,K){var I=this,H=[],Se={Bucket:h.Bucket,Region:h.Region,Key:h.Key,UploadId:h.UploadId,calledBySdk:"sliceUploadFile",tracker:h.tracker},B=function q(){I.multipartListPart(Se,function(z,Z){if(z)return K(z);H.push.apply(H,Z.Part||[]),Z.IsTruncated==="true"?(Se.PartNumberMarker=Z.NextPartNumberMarker,q()):K(null,{PartList:H})})};B()}function Q(h,K){var I=this,H=h.TaskId,Se=h.Bucket,B=h.Region,q=h.Key,z=h.UploadData,Z=h.FileSize,oe=h.SliceSize,ce=Math.min(h.AsyncLimit||I.options.ChunkParallelLimit||1,256),ve=h.Body,ye=Math.ceil(Z/oe),ie=0,pe=h.ServerSideEncryption,ge=h.Headers,me=j.filter(z.PartList,function(se){return se.Uploaded&&(ie+=se.PartNumber>=ye&&Z%oe||oe),!se.Uploaded}),fe=h.onProgress;$.eachLimit(me,ce,function(se,Te){if(!!I._isRunningTask(H)){var De=se.PartNumber,Re=Math.min(Z,se.PartNumber*oe)-(se.PartNumber-1)*oe,be=0;F.call(I,{TaskId:H,Bucket:Se,Region:B,Key:q,SliceSize:oe,FileSize:Z,PartNumber:De,ServerSideEncryption:pe,Body:ve,UploadData:z,Headers:ge,onProgress:function(Ne){ie+=Ne.loaded-be,be=Ne.loaded,fe({loaded:ie,total:Z})},tracker:h.tracker},function(we,Ne){!I._isRunningTask(H)||(!we&&!Ne.ETag&&(we='get ETag error, please add "ETag" to CORS ExposeHeader setting.( \u83B7\u53D6ETag\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0ETag\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 )'),we?ie-=be:(ie+=Re-be,se.ETag=Ne.ETag),fe({loaded:ie,total:Z}),Te(we||null,Ne))})}},function(se){if(!!I._isRunningTask(H)){if(se)return K(se);K(null,{UploadId:z.UploadId,SliceList:z.PartList})}})}function F(h,K){var I=this,H=h.TaskId,Se=h.Bucket,B=h.Region,q=h.Key,z=h.FileSize,Z=h.Body,oe=h.PartNumber*1,ce=h.SliceSize,ve=h.ServerSideEncryption,ye=h.UploadData,ie=h.Headers||{},pe=I.options.ChunkRetryTimes+1,ge=ce*(oe-1),me=ce,fe=ge+ce;fe>z&&(fe=z,me=fe-ge);var se=["x-cos-traffic-limit","x-cos-mime-limit"],Te={};j.each(ie,function(Re,be){se.indexOf(be)>-1&&(Te[be]=Re)});var De=ye.PartList[oe-1];$.retry(pe,function(Re){!I._isRunningTask(H)||j.fileSlice(Z,ge,fe,!0,function(be){I.multipartUpload({TaskId:H,Bucket:Se,Region:B,Key:q,ContentLength:me,PartNumber:oe,UploadId:ye.UploadId,ServerSideEncryption:ve,Body:be,Headers:Te,onProgress:h.onProgress,calledBySdk:"sliceUploadFile",tracker:h.tracker},function(we,Ne){if(!!I._isRunningTask(H))return we?Re(we):(De.Uploaded=!0,Re(null,Ne))})})},function(Re,be){if(!!I._isRunningTask(H))return K(Re,be)})}function L(h,K){var I=h.Bucket,H=h.Region,Se=h.Key,B=h.UploadId,q=h.SliceList,z=this,Z=this.options.ChunkRetryTimes+1,oe=h.Headers,ce=q.map(function(ve){return{PartNumber:ve.PartNumber,ETag:ve.ETag}});$.retry(Z,function(ve){z.multipartComplete({Bucket:I,Region:H,Key:Se,UploadId:B,Parts:ce,Headers:oe,calledBySdk:"sliceUploadFile",tracker:h.tracker},ve)},function(ve,ye){K(ve,ye)})}function re(h,K){var I=h.Bucket,H=h.Region,Se=h.Key,B=h.UploadId,q=h.Level||"task",z=h.AsyncLimit,Z=this,oe=new E;if(oe.on("error",function(ce){return K(ce)}),oe.on("get_abort_array",function(ce){G.call(Z,{Bucket:I,Region:H,Key:Se,Headers:h.Headers,AsyncLimit:z,AbortArray:ce},K)}),q==="bucket")M.call(Z,{Bucket:I,Region:H,calledBySdk:"abortUploadTask"},function(ce,ve){if(ce)return K(ce);oe.emit("get_abort_array",ve.UploadList||[])});else if(q==="file"){if(!Se)return K(j.error(new Error("abort_upload_task_no_key")));M.call(Z,{Bucket:I,Region:H,Key:Se,calledBySdk:"abortUploadTask"},function(ce,ve){if(ce)return K(ce);oe.emit("get_abort_array",ve.UploadList||[])})}else if(q==="task"){if(!B)return K(j.error(new Error("abort_upload_task_no_id")));if(!Se)return K(j.error(new Error("abort_upload_task_no_key")));oe.emit("get_abort_array",[{Key:Se,UploadId:B}])}else return K(j.error(new Error("abort_unknown_level")))}function G(h,K){var I=h.Bucket,H=h.Region,Se=h.Key,B=h.AbortArray,q=h.AsyncLimit||1,z=this,Z=0,oe=new Array(B.length);$.eachLimit(B,q,function(ce,ve){var ye=Z;if(Se&&Se!==ce.Key){oe[ye]={error:{KeyNotMatch:!0}},ve(null);return}var ie=ce.UploadId||ce.UploadID;z.multipartAbort({Bucket:I,Region:H,Key:ce.Key,Headers:h.Headers,UploadId:ie},function(pe){var ge={Bucket:I,Region:H,Key:ce.Key,UploadId:ie};oe[ye]={error:pe,task:ge},ve(null)}),Z++},function(ce){if(ce)return K(ce);for(var ve=[],ye=[],ie=0,pe=oe.length;ie<pe;ie++){var ge=oe[ie];ge.task&&(ge.error?ye.push(ge.task):ve.push(ge.task))}return K(null,{successList:ve,errorList:ye})})}function ke(h,K){var I=this,H=h.SliceSize===void 0?I.options.SliceSize:h.SliceSize,Se=[],B=h.Body,q=B.size||B.length||0,z={TaskId:""};if(I.options.EnableTracker){var Z=I.options.UseAccelerate||I.options.Domain&&I.options.Domain.includes("accelerate.");h.tracker=new Y({bucket:h.Bucket,region:h.Region,apiName:"uploadFile",fileKey:h.Key,fileSize:q,accelerate:Z,deepTracker:I.options.DeepTracker,customId:I.options.CustomId,delay:I.options.TrackerDelay})}j.each(h,function(pe,ge){g(pe)!=="object"&&typeof pe!="function"&&(z[ge]=pe)});var oe=h.onTaskReady,ce=function(ge){z.TaskId=ge,oe&&oe(ge)};h.onTaskReady=ce;var ve=q>H?"sliceUploadFile":"putObject",ye=h.onFileFinish,ie=function(ge,me){h.tracker&&h.tracker.formatResult(ge,me),ye&&ye(ge,me,z),K&&K(ge,me)};Se.push({api:ve,params:h,callback:ie}),I._addTasks(Se)}function N(h,K){var I=this,H=h.SliceSize===void 0?I.options.SliceSize:h.SliceSize,Se=0,B=0,q=j.throttleOnProgress.call(I,B,h.onProgress),z=h.files.length,Z=h.onFileFinish,oe=Array(z),ce=function(ie,pe,ge){q(null,!0),Z&&Z(ie,pe,ge),oe[ge.Index]={options:ge,error:ie,data:pe},--z<=0&&K&&K(null,{files:oe})},ve=[];j.each(h.files,function(ye,ie){(function(){var pe=ye.Body,ge=pe.size||pe.length||0,me={Index:ie,TaskId:""};if(Se+=ge,I.options.EnableTracker){var fe=I.options.UseAccelerate||I.options.Domain&&I.options.Domain.includes("accelerate.");ye.tracker=new Y({bucket:ye.Bucket,region:ye.Region,apiName:"uploadFiles",fileKey:ye.Key,fileSize:ge,accelerate:fe,deepTracker:I.options.DeepTracker,customId:I.options.CustomId,delay:I.options.TrackerDelay})}j.each(ye,function(Be,ee){g(Be)!=="object"&&typeof Be!="function"&&(me[ee]=Be)});var se=ye.onTaskReady,Te=function(ee){me.TaskId=ee,se&&se(ee)};ye.onTaskReady=Te;var De=0,Re=ye.onProgress,be=function(ee){B=B-De+ee.loaded,De=ee.loaded,Re&&Re(ee),q({loaded:B,total:Se})};ye.onProgress=be;var we=ge>H?"sliceUploadFile":"putObject",Ne=ye.onFileFinish,Ue=function(ee,R){ye.tracker&&ye.tracker.formatResult(ee,R),Ne&&Ne(ee,R),ce&&ce(ee,R,me)};ve.push({api:we,params:ye,callback:Ue})})()}),I._addTasks(ve)}function k(h,K){var I=new E,H=this,Se=h.Bucket,B=h.Region,q=h.Key,z=h.CopySource,Z=j.getSourceParams.call(this,z);if(!Z){K(j.error(new Error("CopySource format error")));return}var oe=Z.Bucket,ce=Z.Region,ve=decodeURIComponent(Z.Key),ye=h.CopySliceSize===void 0?H.options.CopySliceSize:h.CopySliceSize;ye=Math.max(0,ye);var ie=h.CopyChunkSize||this.options.CopyChunkSize,pe=this.options.CopyChunkParallelLimit,ge=this.options.ChunkRetryTimes+1,me=0,fe=0,se,Te,De={},Re={},be={};I.on("copy_slice_complete",function(we){j.each(h.Headers,function(Ue,Be){Be.toLowerCase().indexOf("x-cos-meta-")});var Ne=j.map(we.PartList,function(Ue){return{PartNumber:Ue.PartNumber,ETag:Ue.ETag}});$.retry(ge,function(Ue){H.multipartComplete({Bucket:Se,Region:B,Key:q,UploadId:we.UploadId,Parts:Ne,calledBySdk:"sliceCopyFile"},Ue)},function(Ue,Be){if(n.removeUsing(we.UploadId),Ue)return Te(null,!0),K(Ue);n.removeUploadId(we.UploadId),Te({loaded:se,total:se},!0),K(null,Be)})}),I.on("get_copy_data_finish",function(we){var Ne=n.getCopyFileId(z,De,ie,Se,q);Ne&&n.saveUploadId(Ne,we.UploadId,H.options.UploadIdCacheLimit),n.setUsing(we.UploadId);var Ue=j.filter(we.PartList,function(Be){return Be.Uploaded&&(fe+=Be.PartNumber>=me&&se%ie||ie),!Be.Uploaded});$.eachLimit(Ue,pe,function(Be,ee){var R=Be.PartNumber,U=Be.CopySourceRange,O=Be.end-Be.start;$.retry(ge,function(ue){p.call(H,{Bucket:Se,Region:B,Key:q,CopySource:z,UploadId:we.UploadId,PartNumber:R,CopySourceRange:U},ue)},function(ue,ae){if(ue)return ee(ue);fe+=O,Te({loaded:fe,total:se}),Be.ETag=ae.ETag,ee(ue||null,ae)})},function(Be){if(Be)return n.removeUsing(we.UploadId),Te(null,!0),K(Be);I.emit("copy_slice_complete",we)})}),I.on("get_chunk_size_finish",function(){var we=function(){H.multipartInit({Bucket:Se,Region:B,Key:q,Headers:be},function(R,U){if(R)return K(R);h.UploadId=U.UploadId,I.emit("get_copy_data_finish",{UploadId:h.UploadId,PartList:h.PartList})})},Ne=n.getCopyFileId(z,De,ie,Se,q),Ue=n.getUploadIdList(Ne);if(!Ne||!Ue)return we();var Be=function ee(R){if(R>=Ue.length)return we();var U=Ue[R];if(n.using[U])return ee(R+1);J.call(H,{Bucket:Se,Region:B,Key:q,UploadId:U},function(O,ue){if(O)n.removeUploadId(U),ee(R+1);else{if(n.using[U])return ee(R+1);var ae={},Ae=0;j.each(ue.PartList,function(x){var u=parseInt(x.Size),v=Ae+u-1;ae[x.PartNumber+"|"+Ae+"|"+v]=x.ETag,Ae+=u}),j.each(h.PartList,function(x){var u=ae[x.PartNumber+"|"+x.start+"|"+x.end];u&&(x.ETag=u,x.Uploaded=!0)}),I.emit("get_copy_data_finish",{UploadId:U,PartList:h.PartList})}})};Be(0)}),I.on("get_file_size_finish",function(){if(function(){for(var Ne=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Ue=1024*1024,Be=0;Be<Ne.length&&(Ue=Ne[Be]*1024*1024,!(se/Ue<=H.options.MaxPartNumber));Be++);h.ChunkSize=ie=Math.max(ie,Ue),me=Math.ceil(se/ie);for(var ee=[],R=1;R<=me;R++){var U=(R-1)*ie,O=R*ie<se?R*ie-1:se-1,ue={PartNumber:R,start:U,end:O,CopySourceRange:"bytes="+U+"-"+O};ee.push(ue)}h.PartList=ee}(),h.Headers["x-cos-metadata-directive"]==="Replaced"?be=h.Headers:be=Re,be["x-cos-storage-class"]=h.Headers["x-cos-storage-class"]||Re["x-cos-storage-class"],be=j.clearKey(be),Re["x-cos-storage-class"]==="ARCHIVE"||Re["x-cos-storage-class"]==="DEEP_ARCHIVE"){var we=Re["x-cos-restore"];if(!we||we==='ongoing-request="true"'){K(j.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete be["x-cos-copy-source"],delete be["x-cos-metadata-directive"],delete be["x-cos-copy-source-If-Modified-Since"],delete be["x-cos-copy-source-If-Unmodified-Since"],delete be["x-cos-copy-source-If-Match"],delete be["x-cos-copy-source-If-None-Match"],I.emit("get_chunk_size_finish")}),H.headObject({Bucket:oe,Region:ce,Key:ve},function(we,Ne){if(we){we.statusCode&&we.statusCode===404?K(j.error(we,{ErrorStatus:ve+" Not Exist"})):K(we);return}if(se=h.FileSize=Ne.headers["content-length"],se===void 0||!se){K(j.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.\uFF08 \u83B7\u53D6Content-Length\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0Content-Length\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 \uFF09')));return}if(Te=j.throttleOnProgress.call(H,se,h.onProgress),se<=ye)h.Headers["x-cos-metadata-directive"]||(h.Headers["x-cos-metadata-directive"]="Copy"),H.putObjectCopy(h,function(Be,ee){if(Be)return Te(null,!0),K(Be);Te({loaded:se,total:se},!0),K(Be,ee)});else{var Ue=Ne.headers;De=Ue,Re={"Cache-Control":Ue["cache-control"],"Content-Disposition":Ue["content-disposition"],"Content-Encoding":Ue["content-encoding"],"Content-Type":Ue["content-type"],Expires:Ue.expires,"x-cos-storage-class":Ue["x-cos-storage-class"]},j.each(Ue,function(Be,ee){var R="x-cos-meta-";ee.indexOf(R)===0&&ee.length>R.length&&(Re[ee]=Be)}),I.emit("get_file_size_finish")}})}function p(h,K){var I=h.TaskId,H=h.Bucket,Se=h.Region,B=h.Key,q=h.CopySource,z=h.UploadId,Z=h.PartNumber*1,oe=h.CopySourceRange,ce=this.options.ChunkRetryTimes+1,ve=this;$.retry(ce,function(ye){ve.uploadPartCopy({TaskId:I,Bucket:H,Region:Se,Key:B,CopySource:q,UploadId:z,PartNumber:Z,CopySourceRange:oe},function(ie,pe){ye(ie||null,pe)})},function(ye,ie){return K(ye,ie)})}var _={sliceUploadFile:D,abortUploadTask:re,uploadFile:ke,uploadFiles:N,sliceCopyFile:k};d.exports.init=function(h,K){K.transferToTaskMethod(_,"sliceUploadFile"),j.each(_,function(I,H){h.prototype[H]=j.apiWrapper(H,I)})}},"./src/async.js":function(d,m){var i=function(E,j,Y,D){if(D=D||function(){},!E.length||j<=0)return D();var b=0,M=0,J=0;(function Q(){if(b>=E.length)return D();for(;J<j&&M<E.length;)M+=1,J+=1,Y(E[M-1],function(F){F?(D(F),D=function(){}):(b+=1,J-=1,b>=E.length?D():Q())})})()},g=function(E,j,Y){var D=function b(M){j(function(J,Q){J&&M<E?b(M+1):Y(J,Q)})};E<1?Y():D(1)},n={eachLimit:i,retry:g};d.exports=n},"./src/base.js":function(d,m,i){var g=i("./lib/request.js"),n=i("./src/util.js");function $(e,o){typeof e=="function"&&(o=e,e={});var t=this.options.Protocol||(n.isBrowser&&location.protocol==="http:"?"http:":"https:"),c=this.options.ServiceDomain,f=e.AppId||this.options.appId,l=e.Region;c?(c=c.replace(/\{\{AppId\}\}/ig,f||"").replace(/\{\{Region\}\}/ig,l||"").replace(/\{\{.*?\}\}/ig,""),/^[a-zA-Z]+:\/\//.test(c)||(c=t+"//"+c),c.slice(-1)==="/"&&(c=c.slice(0,-1))):l?c=t+"//cos."+l+".myqcloud.com":c=t+"//service.cos.myqcloud.com";var C="",T=l?"cos."+l+".myqcloud.com":"service.cos.myqcloud.com",V=c.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");T===V&&(C=T),de.call(this,{Action:"name/cos:GetService",url:c,method:"GET",headers:e.Headers,SignHost:C},function(xe,he){if(xe)return o(xe);var Ee=he&&he.ListAllMyBucketsResult&&he.ListAllMyBucketsResult.Buckets&&he.ListAllMyBucketsResult.Buckets.Bucket||[];Ee=n.isArray(Ee)?Ee:[Ee];var Pe=he&&he.ListAllMyBucketsResult&&he.ListAllMyBucketsResult.Owner||{};o(null,{Buckets:Ee,Owner:Pe,statusCode:he.statusCode,headers:he.headers})})}function E(e,o){var t=this,c="";if(e.BucketAZConfig){var f={BucketAZConfig:e.BucketAZConfig};c=n.json2xml({CreateBucketConfiguration:f})}de.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:c},function(l,C){if(l)return o(l);var T=qe({protocol:t.options.Protocol,domain:t.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});o(null,{Location:T,statusCode:C.statusCode,headers:C.headers})})}function j(e,o){de.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},o)}function Y(e,o){var t={};t.prefix=e.Prefix||"",t.delimiter=e.Delimiter,t.marker=e.Marker,t["max-keys"]=e.MaxKeys,t["encoding-type"]=e.EncodingType,de.call(this,{Action:"name/cos:GetBucket",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t},function(c,f){if(c)return o(c);var l=f.ListBucketResult||{},C=l.Contents||[],T=l.CommonPrefixes||[];C=n.isArray(C)?C:[C],T=n.isArray(T)?T:[T];var V=n.clone(l);n.extend(V,{Contents:C,CommonPrefixes:T,statusCode:f.statusCode,headers:f.headers}),o(null,V)})}function D(e,o){de.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function b(e,o){var t=e.Headers,c="";if(e.AccessControlPolicy){var f=n.clone(e.AccessControlPolicy||{}),l=f.Grants||f.Grant;l=n.isArray(l)?l:[l],delete f.Grant,delete f.Grants,f.AccessControlList={Grant:l},c=n.json2xml({AccessControlPolicy:f}),t["Content-Type"]="application/xml",t["Content-MD5"]=n.binaryBase64(n.md5(c))}n.each(t,function(C,T){T.indexOf("x-cos-grant-")===0&&(t[T]=je(t[T]))}),de.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:t,action:"acl",body:c},function(C,T){if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function M(e,o){de.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},function(t,c){if(t)return o(t);var f=c.AccessControlPolicy||{},l=f.Owner||{},C=f.AccessControlList.Grant||[];C=n.isArray(C)?C:[C];var T=Je(f);c.headers&&c.headers["x-cos-acl"]&&(T.ACL=c.headers["x-cos-acl"]),T=n.extend(T,{Owner:l,Grants:C,statusCode:c.statusCode,headers:c.headers}),o(null,T)})}function J(e,o){var t=e.CORSConfiguration||{},c=t.CORSRules||e.CORSRules||[];c=n.clone(n.isArray(c)?c:[c]),n.each(c,function(T){n.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(V){var xe=V+"s",he=T[xe]||T[V]||[];delete T[xe],T[V]=n.isArray(he)?he:[he]})});var f={CORSRule:c};e.ResponseVary&&(f.ResponseVary=e.ResponseVary);var l=n.json2xml({CORSConfiguration:f}),C=e.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=n.binaryBase64(n.md5(l)),de.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:l,action:"cors",headers:C},function(T,V){if(T)return o(T);o(null,{statusCode:V.statusCode,headers:V.headers})})}function Q(e,o){de.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(t,c){if(t){if(t.statusCode===404&&t.error&&t.error.Code==="NoSuchCORSConfiguration"){var f={CORSRules:[],statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=c.CORSConfiguration||{},C=l.CORSRules||l.CORSRule||[];C=n.clone(n.isArray(C)?C:[C]);var T=l.ResponseVary;n.each(C,function(V){n.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(xe){var he=xe+"s",Ee=V[he]||V[xe]||[];delete V[xe],V[he]=n.isArray(Ee)?Ee:[Ee]})}),o(null,{CORSRules:C,ResponseVary:T,statusCode:c.statusCode,headers:c.headers})})}function F(e,o){de.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode||t.statusCode,headers:c.headers})})}function L(e,o){de.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},o)}function re(e,o){var t=e.Policy;try{typeof t=="string"&&(t=JSON.parse(t))}catch{}if(!t||typeof t=="string")return o(n.error(new Error("Policy format error")));var c=JSON.stringify(t);t.version||(t.version="2.0");var f=e.Headers;f["Content-Type"]="application/json",f["Content-MD5"]=n.binaryBase64(n.md5(c)),de.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:c,headers:f},function(l,C){if(l&&l.statusCode===204)return o(null,{statusCode:l.statusCode});if(l)return o(l);o(null,{statusCode:C.statusCode,headers:C.headers})})}function G(e,o){de.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},function(t,c){if(t)return t.statusCode&&t.statusCode===403?o(n.error(t,{ErrorStatus:"Access Denied"})):t.statusCode&&t.statusCode===405?o(n.error(t,{ErrorStatus:"Method Not Allowed"})):t.statusCode&&t.statusCode===404?o(n.error(t,{ErrorStatus:"Policy Not Found"})):o(t);var f={};try{f=JSON.parse(c.body)}catch{}o(null,{Policy:f,statusCode:c.statusCode,headers:c.headers})})}function ke(e,o){de.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode||t.statusCode,headers:c.headers})})}function N(e,o){var t=e.Tagging||{},c=t.TagSet||t.Tags||e.Tags||[];c=n.clone(n.isArray(c)?c:[c]);var f=n.json2xml({Tagging:{TagSet:{Tag:c}}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"tagging",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function k(e,o){de.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(t,c){if(t){if(t.statusCode===404&&t.error&&(t.error==="Not Found"||t.error.Code==="NoSuchTagSet")){var f={Tags:[],statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=[];try{l=c.Tagging.TagSet.Tag||[]}catch{}l=n.clone(n.isArray(l)?l:[l]),o(null,{Tags:l,statusCode:c.statusCode,headers:c.headers})})}function p(e,o){de.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function _(e,o){var t=e.LifecycleConfiguration||{},c=t.Rules||e.Rules||[];c=n.clone(c);var f=n.json2xml({LifecycleConfiguration:{Rule:c}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"lifecycle",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function h(e,o){de.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(t,c){if(t){if(t.statusCode===404&&t.error&&t.error.Code==="NoSuchLifecycleConfiguration"){var f={Rules:[],statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=[];try{l=c.LifecycleConfiguration.Rule||[]}catch{}l=n.clone(n.isArray(l)?l:[l]),o(null,{Rules:l,statusCode:c.statusCode,headers:c.headers})})}function K(e,o){de.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function I(e,o){if(!e.VersioningConfiguration){o(n.error(new Error("missing param VersioningConfiguration")));return}var t=e.VersioningConfiguration||{},c=n.json2xml({VersioningConfiguration:t}),f=e.Headers;f["Content-Type"]="application/xml",f["Content-MD5"]=n.binaryBase64(n.md5(c)),de.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"versioning",headers:f},function(l,C){if(l&&l.statusCode===204)return o(null,{statusCode:l.statusCode});if(l)return o(l);o(null,{statusCode:C.statusCode,headers:C.headers})})}function H(e,o){de.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},function(t,c){t||!c.VersioningConfiguration&&(c.VersioningConfiguration={}),o(t,c)})}function Se(e,o){var t=n.clone(e.ReplicationConfiguration),c=n.json2xml({ReplicationConfiguration:t});c=c.replace(/<(\/?)Rules>/ig,"<$1Rule>"),c=c.replace(/<(\/?)Tags>/ig,"<$1Tag>");var f=e.Headers;f["Content-Type"]="application/xml",f["Content-MD5"]=n.binaryBase64(n.md5(c)),de.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"replication",headers:f},function(l,C){if(l&&l.statusCode===204)return o(null,{statusCode:l.statusCode});if(l)return o(l);o(null,{statusCode:C.statusCode,headers:C.headers})})}function B(e,o){de.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(t,c){if(t){if(t.statusCode===404&&t.error&&(t.error==="Not Found"||t.error.Code==="ReplicationConfigurationnotFoundError")){var f={ReplicationConfiguration:{Rules:[]},statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}!c.ReplicationConfiguration&&(c.ReplicationConfiguration={}),c.ReplicationConfiguration.Rule&&(c.ReplicationConfiguration.Rules=n.makeArray(c.ReplicationConfiguration.Rule),delete c.ReplicationConfiguration.Rule),o(t,c)})}function q(e,o){de.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function z(e,o){if(!e.WebsiteConfiguration){o(n.error(new Error("missing param WebsiteConfiguration")));return}var t=n.clone(e.WebsiteConfiguration||{}),c=t.RoutingRules||t.RoutingRule||[];c=n.isArray(c)?c:[c],delete t.RoutingRule,delete t.RoutingRules,c.length&&(t.RoutingRules={RoutingRule:c});var f=n.json2xml({WebsiteConfiguration:t}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"website",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function Z(e,o){de.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website"},function(t,c){if(t){if(t.statusCode===404&&t.error.Code==="NoSuchWebsiteConfiguration"){var f={WebsiteConfiguration:{},statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=c.WebsiteConfiguration||{};if(l.RoutingRules){var C=n.clone(l.RoutingRules.RoutingRule||[]);C=n.makeArray(C),l.RoutingRules=C}o(null,{WebsiteConfiguration:l,statusCode:c.statusCode,headers:c.headers})})}function oe(e,o){de.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function ce(e,o){if(!e.RefererConfiguration){o(n.error(new Error("missing param RefererConfiguration")));return}var t=n.clone(e.RefererConfiguration||{}),c=t.DomainList||{},f=c.Domains||c.Domain||[];f=n.isArray(f)?f:[f],f.length&&(t.DomainList={Domain:f});var l=n.json2xml({RefererConfiguration:t}),C=e.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=n.binaryBase64(n.md5(l)),de.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:l,action:"referer",headers:C},function(T,V){if(T&&T.statusCode===204)return o(null,{statusCode:T.statusCode});if(T)return o(T);o(null,{statusCode:V.statusCode,headers:V.headers})})}function ve(e,o){de.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer"},function(t,c){if(t){if(t.statusCode===404&&t.error.Code==="NoSuchRefererConfiguration"){var f={WebsiteConfiguration:{},statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=c.RefererConfiguration||{};if(l.DomainList){var C=n.makeArray(l.DomainList.Domain||[]);l.DomainList={Domains:C}}o(null,{RefererConfiguration:l,statusCode:c.statusCode,headers:c.headers})})}function ye(e,o){var t=e.DomainConfiguration||{},c=t.DomainRule||e.DomainRule||[];c=n.clone(c);var f=n.json2xml({DomainConfiguration:{DomainRule:c}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"domain",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function ie(e,o){de.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(t,c){if(t)return o(t);var f=[];try{f=c.DomainConfiguration.DomainRule||[]}catch{}f=n.clone(n.isArray(f)?f:[f]),o(null,{DomainRule:f,statusCode:c.statusCode,headers:c.headers})})}function pe(e,o){de.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function ge(e,o){var t=e.OriginConfiguration||{},c=t.OriginRule||e.OriginRule||[];c=n.clone(c);var f=n.json2xml({OriginConfiguration:{OriginRule:c}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"origin",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function me(e,o){de.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(t,c){if(t)return o(t);var f=[];try{f=c.OriginConfiguration.OriginRule||[]}catch{}f=n.clone(n.isArray(f)?f:[f]),o(null,{OriginRule:f,statusCode:c.statusCode,headers:c.headers})})}function fe(e,o){de.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function se(e,o){var t=n.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=n.binaryBase64(n.md5(t)),de.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:t,action:"logging",headers:c},function(f,l){if(f&&f.statusCode===204)return o(null,{statusCode:f.statusCode});if(f)return o(f);o(null,{statusCode:l.statusCode,headers:l.headers})})}function Te(e,o){de.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging"},function(t,c){if(t)return o(t);o(null,{BucketLoggingStatus:c.BucketLoggingStatus,statusCode:c.statusCode,headers:c.headers})})}function De(e,o){var t=n.clone(e.InventoryConfiguration);if(t.OptionalFields){var c=t.OptionalFields||[];t.OptionalFields={Field:c}}if(t.Destination&&t.Destination.COSBucketDestination&&t.Destination.COSBucketDestination.Encryption){var f=t.Destination.COSBucketDestination.Encryption;Object.keys(f).indexOf("SSECOS")>-1&&(f["SSE-COS"]=f.SSECOS,delete f.SSECOS)}var l=n.json2xml({InventoryConfiguration:t}),C=e.Headers;C["Content-Type"]="application/xml",C["Content-MD5"]=n.binaryBase64(n.md5(l)),de.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:l,action:"inventory",qs:{id:e.Id},headers:C},function(T,V){if(T&&T.statusCode===204)return o(null,{statusCode:T.statusCode});if(T)return o(T);o(null,{statusCode:V.statusCode,headers:V.headers})})}function Re(e,o){de.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(t,c){if(t)return o(t);var f=c.InventoryConfiguration;if(f&&f.OptionalFields&&f.OptionalFields.Field){var l=f.OptionalFields.Field;n.isArray(l)||(l=[l]),f.OptionalFields=l}if(f.Destination&&f.Destination.COSBucketDestination&&f.Destination.COSBucketDestination.Encryption){var C=f.Destination.COSBucketDestination.Encryption;Object.keys(C).indexOf("SSE-COS")>-1&&(C.SSECOS=C["SSE-COS"],delete C["SSE-COS"])}o(null,{InventoryConfiguration:f,statusCode:c.statusCode,headers:c.headers})})}function be(e,o){de.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken}},function(t,c){if(t)return o(t);var f=c.ListInventoryConfigurationResult,l=f.InventoryConfiguration||[];l=n.isArray(l)?l:[l],delete f.InventoryConfiguration,n.each(l,function(C){if(C&&C.OptionalFields&&C.OptionalFields.Field){var T=C.OptionalFields.Field;n.isArray(T)||(T=[T]),C.OptionalFields=T}if(C.Destination&&C.Destination.COSBucketDestination&&C.Destination.COSBucketDestination.Encryption){var V=C.Destination.COSBucketDestination.Encryption;Object.keys(V).indexOf("SSE-COS")>-1&&(V.SSECOS=V["SSE-COS"],delete V["SSE-COS"])}}),f.InventoryConfigurations=l,n.extend(f,{statusCode:c.statusCode,headers:c.headers}),o(null,f)})}function we(e,o){de.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function Ne(e,o){if(!e.AccelerateConfiguration){o(n.error(new Error("missing param AccelerateConfiguration")));return}var t={AccelerateConfiguration:e.AccelerateConfiguration||{}},c=n.json2xml(t),f={};f["Content-Type"]="application/xml",f["Content-MD5"]=n.binaryBase64(n.md5(c)),de.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"accelerate",headers:f},function(l,C){if(l)return o(l);o(null,{statusCode:C.statusCode,headers:C.headers})})}function Ue(e,o){de.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate"},function(t,c){t||!c.AccelerateConfiguration&&(c.AccelerateConfiguration={}),o(t,c)})}function Be(e,o){var t=e.ServerSideEncryptionConfiguration||{},c=t.Rule||t.Rules||[],f=n.json2xml({ServerSideEncryptionConfiguration:{Rule:c}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:f,action:"encryption",headers:l},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function ee(e,o){de.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(t,c){if(t){if(t.statusCode===404&&t.code==="NoSuchEncryptionConfiguration"){var f={EncryptionConfiguration:{Rules:[]},statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=n.makeArray(c.EncryptionConfiguration&&c.EncryptionConfiguration.Rule||[]);c.EncryptionConfiguration={Rules:l},o(t,c)})}function R(e,o){de.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function U(e,o){de.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(t,c){if(t){var f=t.statusCode;return e.Headers["If-Modified-Since"]&&f&&f===304?o(null,{NotModified:!0,statusCode:f}):o(t)}c.ETag=n.attr(c.headers,"etag",""),o(null,c)})}function O(e,o){var t={};t.prefix=e.Prefix||"",t.delimiter=e.Delimiter,t["key-marker"]=e.KeyMarker,t["version-id-marker"]=e.VersionIdMarker,t["max-keys"]=e.MaxKeys,t["encoding-type"]=e.EncodingType,de.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t,action:"versions"},function(c,f){if(c)return o(c);var l=f.ListVersionsResult||{},C=l.DeleteMarker||[];C=n.isArray(C)?C:[C];var T=l.Version||[];T=n.isArray(T)?T:[T];var V=n.clone(l);delete V.DeleteMarker,delete V.Version,n.extend(V,{DeleteMarkers:C,Versions:T,statusCode:f.statusCode,headers:f.headers}),o(null,V)})}function ue(e,o){var t=e.Query||{},c=e.QueryString||"",f=n.throttleOnProgress.call(this,0,e.onProgress),l=e.tracker;l&&l.setParams({signStartTime:new Date().getTime()}),t["response-content-type"]=e.ResponseContentType,t["response-content-language"]=e.ResponseContentLanguage,t["response-expires"]=e.ResponseExpires,t["response-cache-control"]=e.ResponseCacheControl,t["response-content-disposition"]=e.ResponseContentDisposition,t["response-content-encoding"]=e.ResponseContentEncoding,de.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:t,qsStr:c,rawBody:!0,onDownloadProgress:f,tracker:l},function(C,T){if(f(null,!0),C){var V=C.statusCode;return e.Headers["If-Modified-Since"]&&V&&V===304?o(null,{NotModified:!0}):o(C)}o(null,{Body:T.body,ETag:n.attr(T.headers,"etag",""),statusCode:T.statusCode,headers:T.headers})})}function ae(e,o){var t=this,c=e.ContentLength,f=n.throttleOnProgress.call(t,c,e.onProgress),l=e.Headers;!l["Cache-Control"]&&!l["cache-control"]&&(l["Cache-Control"]=""),!l["Content-Type"]&&!l["content-type"]&&(l["Content-Type"]=e.Body&&e.Body.type||"");var C=e.UploadAddMetaMd5||t.options.UploadAddMetaMd5||t.options.UploadCheckContentMd5,T=e.tracker;C&&T&&T.setParams({md5StartTime:new Date().getTime()}),n.getBodyMd5(C,e.Body,function(V){V&&(T&&T.setParams({md5EndTime:new Date().getTime()}),t.options.UploadCheckContentMd5&&(l["Content-MD5"]=n.binaryBase64(V)),(e.UploadAddMetaMd5||t.options.UploadAddMetaMd5)&&(l["x-cos-meta-md5"]=V)),e.ContentLength!==void 0&&(l["Content-Length"]=e.ContentLength),f(null,!0),de.call(t,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:f,tracker:T},function(xe,he){if(xe)return f(null,!0),o(xe);f({loaded:c,total:c},!0);var Ee=qe({ForcePathStyle:t.options.ForcePathStyle,protocol:t.options.Protocol,domain:t.options.Domain,bucket:e.Bucket,region:t.options.UseAccelerate?"accelerate":e.Region,object:e.Key});Ee=Ee.substr(Ee.indexOf("://")+3),he.Location=Ee,he.ETag=n.attr(he.headers,"etag",""),o(null,he)})},e.onHashProgress)}function Ae(e,o){de.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":""},function(t,c){if(t){var f=t.statusCode;return f&&f===404?o(null,{BucketNotFound:!0,statusCode:f}):o(t)}o(null,{statusCode:c.statusCode,headers:c.headers})})}function x(e,o){de.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},function(t,c){if(t)return o(t);var f=c.AccessControlPolicy||{},l=f.Owner||{},C=f.AccessControlList&&f.AccessControlList.Grant||[];C=n.isArray(C)?C:[C];var T=Je(f);delete T.GrantWrite,c.headers&&c.headers["x-cos-acl"]&&(T.ACL=c.headers["x-cos-acl"]),T=n.extend(T,{Owner:l,Grants:C,statusCode:c.statusCode,headers:c.headers}),o(null,T)})}function u(e,o){var t=e.Headers,c="";if(e.AccessControlPolicy){var f=n.clone(e.AccessControlPolicy||{}),l=f.Grants||f.Grant;l=n.isArray(l)?l:[l],delete f.Grant,delete f.Grants,f.AccessControlList={Grant:l},c=n.json2xml({AccessControlPolicy:f}),t["Content-Type"]="application/xml",t["Content-MD5"]=n.binaryBase64(n.md5(c))}n.each(t,function(C,T){T.indexOf("x-cos-grant-")===0&&(t[T]=je(t[T]))}),de.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:t,body:c},function(C,T){if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function v(e,o){var t=e.Headers;t.Origin=e.Origin,t["Access-Control-Request-Method"]=e.AccessControlRequestMethod,t["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,de.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:t},function(c,f){if(c)return c.statusCode&&c.statusCode===403?o(null,{OptionsForbidden:!0,statusCode:c.statusCode}):o(c);var l=f.headers||{};o(null,{AccessControlAllowOrigin:l["access-control-allow-origin"],AccessControlAllowMethods:l["access-control-allow-methods"],AccessControlAllowHeaders:l["access-control-allow-headers"],AccessControlExposeHeaders:l["access-control-expose-headers"],AccessControlMaxAge:l["access-control-max-age"],statusCode:f.statusCode,headers:f.headers})})}function s(e,o){var t=this,c=e.Headers;!c["Cache-Control"]&&!c["cache-control"]&&(c["Cache-Control"]="");var f=e.CopySource||"",l=n.getSourceParams.call(this,f);if(!l){o(n.error(new Error("CopySource format error")));return}var C=l[1],T=l[3],V=decodeURIComponent(l[4]);de.call(this,{Scope:[{action:"name/cos:GetObject",bucket:C,region:T,prefix:V},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(xe,he){if(xe)return o(xe);var Ee=n.clone(he.CopyObjectResult||{}),Pe=qe({ForcePathStyle:t.options.ForcePathStyle,protocol:t.options.Protocol,domain:t.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});n.extend(Ee,{Location:Pe,statusCode:he.statusCode,headers:he.headers}),o(null,Ee)})}function y(e,o){var t=e.CopySource||"",c=n.getSourceParams.call(this,t);if(!c){o(n.error(new Error("CopySource format error")));return}var f=c[1],l=c[3],C=decodeURIComponent(c[4]);de.call(this,{Scope:[{action:"name/cos:GetObject",bucket:f,region:l,prefix:C},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},function(T,V){if(T)return o(T);var xe=n.clone(V.CopyPartResult||{});n.extend(xe,{statusCode:V.statusCode,headers:V.headers}),o(null,xe)})}function A(e,o){var t=e.Objects||[],c=e.Quiet;t=n.isArray(t)?t:[t];var f=n.json2xml({Delete:{Object:t,Quiet:c||!1}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f));var C=n.map(t,function(T){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:T.Key}});de.call(this,{Scope:C,method:"POST",Bucket:e.Bucket,Region:e.Region,body:f,action:"delete",headers:l},function(T,V){if(T)return o(T);var xe=V.DeleteResult||{},he=xe.Deleted||[],Ee=xe.Error||[];he=n.isArray(he)?he:[he],Ee=n.isArray(Ee)?Ee:[Ee];var Pe=n.clone(xe);n.extend(Pe,{Error:Ee,Deleted:he,statusCode:V.statusCode,headers:V.headers}),o(null,Pe)})}function P(e,o){var t=e.Headers;if(!e.RestoreRequest){o(n.error(new Error("missing param RestoreRequest")));return}var c=e.RestoreRequest||{},f=n.json2xml({RestoreRequest:c});t["Content-Type"]="application/xml",t["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:f,action:"restore",headers:t},o)}function te(e,o){var t=e.Tagging||{},c=t.TagSet||t.Tags||e.Tags||[];c=n.clone(n.isArray(c)?c:[c]);var f=n.json2xml({Tagging:{TagSet:{Tag:c}}}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:f,action:"tagging",headers:l,VersionId:e.VersionId},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);o(null,{statusCode:T.statusCode,headers:T.headers})})}function ne(e,o){de.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(t,c){if(t){if(t.statusCode===404&&t.error&&(t.error==="Not Found"||t.error.Code==="NoSuchTagSet")){var f={Tags:[],statusCode:t.statusCode};t.headers&&(f.headers=t.headers),o(null,f)}else o(t);return}var l=[];try{l=c.Tagging.TagSet.Tag||[]}catch{}l=n.clone(n.isArray(l)?l:[l]),o(null,{Tags:l,statusCode:c.statusCode,headers:c.headers})})}function Ce(e,o){de.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(t,c){if(t&&t.statusCode===204)return o(null,{statusCode:t.statusCode});if(t)return o(t);o(null,{statusCode:c.statusCode,headers:c.headers})})}function X(e,o){var t=e.SelectType;if(!t)return o(n.error(new Error("missing param SelectType")));var c=e.SelectRequest||{},f=n.json2xml({SelectRequest:c}),l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=n.binaryBase64(n.md5(f)),de.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:f,DataType:"arraybuffer",rawBody:!0},function(C,T){if(C&&C.statusCode===204)return o(null,{statusCode:C.statusCode});if(C)return o(C);var V=n.parseSelectPayload(T.body);o(null,{statusCode:T.statusCode,headers:T.headers,Body:V.body,Payload:V.payload})})}function _e(e,o){var t=this,c=e.Headers,f=e.tracker;!c["Cache-Control"]&&!c["cache-control"]&&(c["Cache-Control"]=""),!c["Content-Type"]&&!c["content-type"]&&(c["Content-Type"]=e.Body&&e.Body.type||"");var l=e.Body&&(e.UploadAddMetaMd5||t.options.UploadAddMetaMd5);l&&f&&f.setParams({md5StartTime:new Date().getTime()}),n.getBodyMd5(l,e.Body,function(C){C&&(e.Headers["x-cos-meta-md5"]=C),l&&f&&f.setParams({md5EndTime:new Date().getTime()}),de.call(t,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:f},function(T,V){if(T)return f&&f.parent&&f.parent.setParams({errorNode:"multipartInit"}),o(T);if(V=n.clone(V||{}),V&&V.InitiateMultipartUploadResult)return o(null,n.extend(V.InitiateMultipartUploadResult,{statusCode:V.statusCode,headers:V.headers}));o(null,V)})},e.onHashProgress)}function r(e,o){var t=this;n.getFileSize("multipartUpload",e,function(){var c=e.tracker,f=t.options.UploadCheckContentMd5;f&&c&&c.setParams({md5StartTime:new Date().getTime()}),n.getBodyMd5(f,e.Body,function(l){l&&(e.Headers["Content-MD5"]=n.binaryBase64(l)),f&&c&&c.setParams({md5EndTime:new Date().getTime()}),c&&c.setParams({partNumber:e.PartNumber}),de.call(t,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:c},function(C,T){if(C)return c&&c.parent&&c.parent.setParams({errorNode:"multipartUpload"}),o(C);o(null,{ETag:n.attr(T.headers,"etag",""),statusCode:T.statusCode,headers:T.headers})})})})}function a(e,o){for(var t=this,c=e.UploadId,f=e.Parts,l=e.tracker,C=0,T=f.length;C<T;C++)f[C].ETag&&f[C].ETag.indexOf('"')===0||(f[C].ETag='"'+f[C].ETag+'"');var V=n.json2xml({CompleteMultipartUpload:{Part:f}});V=V.replace(/\n\s*/g,"");var xe=e.Headers;xe["Content-Type"]="application/xml",xe["Content-MD5"]=n.binaryBase64(n.md5(V)),de.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:c},body:V,headers:xe,tracker:l},function(he,Ee){if(he)return l&&l.parent&&l.parent.setParams({errorNode:"multipartComplete"}),o(he);var Pe=qe({ForcePathStyle:t.options.ForcePathStyle,protocol:t.options.Protocol,domain:t.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),Ge=Ee.CompleteMultipartUploadResult||{};Ge.ProcessResults&&Ge&&Ge.ProcessResults&&(Ge.UploadResult={OriginalInfo:{Key:Ge.Key,Location:Pe,ETag:Ge.ETag,ImageInfo:Ge.ImageInfo},ProcessResults:Ge.ProcessResults},delete Ge.ImageInfo,delete Ge.ProcessResults);var $e=n.extend(Ge,{Location:Pe,statusCode:Ee.statusCode,headers:Ee.headers});o(null,$e)})}function S(e,o){var t={};t.delimiter=e.Delimiter,t["encoding-type"]=e.EncodingType,t.prefix=e.Prefix||"",t["max-uploads"]=e.MaxUploads,t["key-marker"]=e.KeyMarker,t["upload-id-marker"]=e.UploadIdMarker,t=n.clearKey(t);var c=e.tracker;c&&c.setParams({signStartTime:new Date().getTime()}),de.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:t.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:t,action:"uploads",tracker:c},function(f,l){if(f)return c&&c.parent&&c.parent.setParams({errorNode:"multipartList"}),o(f);if(l&&l.ListMultipartUploadsResult){var C=l.ListMultipartUploadsResult.Upload||[];C=n.isArray(C)?C:[C],l.ListMultipartUploadsResult.Upload=C}var T=n.clone(l.ListMultipartUploadsResult||{});n.extend(T,{statusCode:l.statusCode,headers:l.headers}),o(null,T)})}function w(e,o){var t={},c=e.tracker;t.uploadId=e.UploadId,t["encoding-type"]=e.EncodingType,t["max-parts"]=e.MaxParts,t["part-number-marker"]=e.PartNumberMarker,de.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:t},function(f,l){if(f)return c&&c.parent&&c.parent.setParams({errorNode:"multipartListPart"}),o(f);var C=l.ListPartsResult||{},T=C.Part||[];T=n.isArray(T)?T:[T],C.Part=T;var V=n.clone(C);n.extend(V,{statusCode:l.statusCode,headers:l.headers}),o(null,V)})}function W(e,o){var t={};t.uploadId=e.UploadId,de.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:t},function(c,f){if(c)return o(c);o(null,{statusCode:f.statusCode,headers:f.headers})})}function le(e,o){de.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType},function(t,c){if(t)return o(t);c&&c.body&&(c.Body=c.body,delete c.body),o(t,c)})}function Oe(e,o){var t=e.Headers;!t["Cache-Control"]&&!t["cache-control"]&&(t["Cache-Control"]=""),!t["Content-Type"]&&!t["content-type"]&&(t["Content-Type"]=e.Body&&e.Body.type||""),de.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers},function(c,f){if(c)return o(c);o(null,f)})}function Me(e){var o=this;return n.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:o.options.UseRawKey,SystemClockOffset:o.options.SystemClockOffset})}function Xe(e,o){var t=this,c=e.UseAccelerate===void 0?t.options.UseAccelerate:e.UseAccelerate,f=qe({ForcePathStyle:t.options.ForcePathStyle,protocol:e.Protocol||t.options.Protocol,domain:e.Domain||t.options.Domain,bucket:e.Bucket,region:c?"accelerate":e.Region,object:e.Key}),l="";e.Query&&(l+=n.obj2str(e.Query)),e.QueryString&&(l+=(l?"&":"")+e.QueryString);var C=f;if(e.Sign!==void 0&&!e.Sign)return l&&(C+="?"+l),o(null,{Url:C}),C;var T=He.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:f}),V=Ke.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:T,ForceSignHost:e.ForceSignHost===!1?!1:t.options.ForceSignHost},function(xe,he){if(!!o){if(xe){o(xe);return}var Ee=function($e){var Ze=$e.match(/q-url-param-list.*?(?=&)/g)[0],nt="q-url-param-list="+encodeURIComponent(Ze.replace(/q-url-param-list=/,"")).toLowerCase(),et=new RegExp(Ze,"g"),Ve=$e.replace(et,nt);return Ve},Pe=f;Pe+="?"+(he.Authorization.indexOf("q-signature")>-1?Ee(he.Authorization):"sign="+encodeURIComponent(he.Authorization)),he.SecurityToken&&(Pe+="&x-cos-security-token="+he.SecurityToken),he.ClientIP&&(Pe+="&clientIP="+he.ClientIP),he.ClientUA&&(Pe+="&clientUA="+he.ClientUA),he.Token&&(Pe+="&token="+he.Token),l&&(Pe+="&"+l),setTimeout(function(){o(null,{Url:Pe})})}});return V?(C+="?"+V.Authorization+(V.SecurityToken?"&x-cos-security-token="+V.SecurityToken:""),l&&(C+="&"+l)):l&&(C+="?"+l),C}function Je(e){var o={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},t={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},c=e&&e.AccessControlList||{},f=c.Grant;f&&(f=n.isArray(f)?f:[f]);var l={READ:0,WRITE:0,FULL_CONTROL:0};return f&&f.length&&n.each(f,function(C){C.Grantee.ID==="qcs::cam::anyone:anyone"||C.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?l[C.Permission]=1:C.Grantee.ID!==e.Owner.ID&&o[t[C.Permission]].push('id="'+C.Grantee.ID+'"')}),l.FULL_CONTROL||l.WRITE&&l.READ?o.ACL="public-read-write":l.READ?o.ACL="public-read":o.ACL="private",n.each(t,function(C){o[C]=je(o[C].join(","))}),o}function je(e){var o=e.split(","),t={},c,f;for(c=0;c<o.length;)f=o[c].trim(),t[f]?o.splice(c,1):(t[f]=!0,o[c]=f,c++);return o.join(",")}function qe(e){var o=e.region||"",t=e.bucket||"",c=t.substr(0,t.lastIndexOf("-")),f=t.substr(t.lastIndexOf("-")+1),l=e.domain,C=e.object;typeof l=="function"&&(l=l({Bucket:t,Region:o}));var T=e.protocol||(n.isBrowser&&location.protocol==="http:"?"http:":"https:");l||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(o)>-1?l="{Region}.myqcloud.com":l="cos.{Region}.myqcloud.com",e.ForcePathStyle||(l="{Bucket}."+l)),l=l.replace(/\{\{AppId\}\}/ig,f).replace(/\{\{Bucket\}\}/ig,c).replace(/\{\{Region\}\}/ig,o).replace(/\{\{.*?\}\}/ig,""),l=l.replace(/\{AppId\}/ig,f).replace(/\{BucketName\}/ig,c).replace(/\{Bucket\}/ig,t).replace(/\{Region\}/ig,o).replace(/\{.*?\}/ig,""),/^[a-zA-Z]+:\/\//.test(l)||(l=T+"//"+l),l.slice(-1)==="/"&&(l=l.slice(0,-1));var V=l;return e.ForcePathStyle&&(V+="/"+t),V+="/",C&&(V+=n.camSafeUrlEncode(C).replace(/%2F/g,"/")),e.isLocation&&(V=V.replace(/^https?:\/\//,"")),V}var He=function(o){if(!o.Bucket||!o.Region)return"";var t=o.UseAccelerate===void 0?this.options.UseAccelerate:o.UseAccelerate,c=o.Url||qe({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:o.Bucket,region:t?"accelerate":o.Region}),f=c.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),l=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return l.test(f)?f:""};function Ke(e,o){var t=n.clone(e.Headers),c="";n.each(t,function(Fe,Le){(Fe===""||["content-type","cache-control","expires"].indexOf(Le.toLowerCase())>-1)&&delete t[Le],Le.toLowerCase()==="host"&&(c=Fe)});var f=e.ForceSignHost!==!1;!c&&e.SignHost&&f&&(t.Host=e.SignHost);var l=!1,C=function(Le,We){l||(l=!0,We&&We.XCosSecurityToken&&!We.SecurityToken&&(We=n.clone(We),We.SecurityToken=We.XCosSecurityToken,delete We.XCosSecurityToken),o&&o(Le,We))},T=this,V=e.Bucket||"",xe=e.Region||"",he=e.Key||"";T.options.ForcePathStyle&&V&&(he=V+"/"+he);var Ee="/"+he,Pe={},Ge=e.Scope;if(!Ge){var $e=e.Action||"",Ze=e.ResourceKey||e.Key||"";Ge=e.Scope||[{action:$e,bucket:V,region:xe,prefix:Ze}]}var nt=n.md5(JSON.stringify(Ge));T._StsCache=T._StsCache||[],function(){var Fe,Le;for(Fe=T._StsCache.length-1;Fe>=0;Fe--){Le=T._StsCache[Fe];var We=Math.round(n.getSkewTime(T.options.SystemClockOffset)/1e3)+30;if(Le.StartTime&&We<Le.StartTime||We>=Le.ExpiredTime){T._StsCache.splice(Fe,1);continue}if(!Le.ScopeLimit||Le.ScopeLimit&&Le.ScopeKey===nt){Pe=Le;break}}}();var et=function(){var Le="";Pe.StartTime&&e.Expires?Le=Pe.StartTime+";"+(Pe.StartTime+e.Expires*1):Pe.StartTime&&Pe.ExpiredTime&&(Le=Pe.StartTime+";"+Pe.ExpiredTime);var We=n.getAuth({SecretId:Pe.TmpSecretId,SecretKey:Pe.TmpSecretKey,Method:e.Method,Pathname:Ee,Query:e.Query,Headers:t,Expires:e.Expires,UseRawKey:T.options.UseRawKey,SystemClockOffset:T.options.SystemClockOffset,KeyTime:Le,ForceSignHost:f}),tt={Authorization:We,SecurityToken:Pe.SecurityToken||Pe.XCosSecurityToken||"",Token:Pe.Token||"",ClientIP:Pe.ClientIP||"",ClientUA:Pe.ClientUA||""};C(null,tt)},Ve=function(Le){if(Le.Authorization){var We=!1,tt=Le.Authorization;if(tt)if(tt.indexOf(" ")>-1)We=!1;else if(tt.indexOf("q-sign-algorithm=")>-1&&tt.indexOf("q-ak=")>-1&&tt.indexOf("q-sign-time=")>-1&&tt.indexOf("q-key-time=")>-1&&tt.indexOf("q-url-param-list=")>-1)We=!0;else try{tt=atob(tt),tt.indexOf("a=")>-1&&tt.indexOf("k=")>-1&&tt.indexOf("t=")>-1&&tt.indexOf("r=")>-1&&tt.indexOf("b=")>-1&&(We=!0)}catch{}if(!We)return n.error(new Error("getAuthorization callback params format error"))}else{if(!Le.TmpSecretId)return n.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Le.TmpSecretKey)return n.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Le.SecurityToken&&!Le.XCosSecurityToken)return n.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Le.ExpiredTime)return n.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Le.ExpiredTime&&Le.ExpiredTime.toString().length!==10)return n.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Le.StartTime&&Le.StartTime.toString().length!==10)return n.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(Pe.ExpiredTime&&Pe.ExpiredTime-n.getSkewTime(T.options.SystemClockOffset)/1e3>60)et();else if(T.options.getAuthorization)T.options.getAuthorization.call(T,{Bucket:V,Region:xe,Method:e.Method,Key:he,Pathname:Ee,Query:e.Query,Headers:t,Scope:Ge,SystemClockOffset:T.options.SystemClockOffset,ForceSignHost:f},function(Fe){typeof Fe=="string"&&(Fe={Authorization:Fe});var Le=Ve(Fe);if(Le)return C(Le);Fe.Authorization?C(null,Fe):(Pe=Fe||{},Pe.Scope=Ge,Pe.ScopeKey=nt,T._StsCache.push(Pe),et())});else if(T.options.getSTS)T.options.getSTS.call(T,{Bucket:V,Region:xe},function(Fe){Pe=Fe||{},Pe.Scope=Ge,Pe.ScopeKey=nt,Pe.TmpSecretId||(Pe.TmpSecretId=Pe.SecretId),Pe.TmpSecretKey||(Pe.TmpSecretKey=Pe.SecretKey);var Le=Ve(Pe);if(Le)return C(Le);T._StsCache.push(Pe),et()});else return function(){var Fe=n.getAuth({SecretId:e.SecretId||T.options.SecretId,SecretKey:e.SecretKey||T.options.SecretKey,Method:e.Method,Pathname:Ee,Query:e.Query,Headers:t,Expires:e.Expires,UseRawKey:T.options.UseRawKey,SystemClockOffset:T.options.SystemClockOffset,ForceSignHost:f}),Le={Authorization:Fe,SecurityToken:T.options.SecurityToken||T.options.XCosSecurityToken};return C(null,Le),Le}();return""}function Ye(e){var o=!1,t=!1,c=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var f=e.error.Code,l=e.error.Message;(f==="RequestTimeTooSkewed"||f==="AccessDenied"&&l==="Request has expired")&&(t=!0)}catch{}if(e)if(t&&c){var C=Date.parse(c);this.options.CorrectClockSkew&&Math.abs(n.getSkewTime(this.options.SystemClockOffset)-C)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=C-Date.now(),o=!0)}else Math.floor(e.statusCode/100)===5&&(o=!0);return o}function de(e,o){var t=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=n.clearKey(e.qs),e.headers&&(e.headers=n.clearKey(e.headers)),e.qs&&(e.qs=n.clearKey(e.qs));var c=n.clone(e.qs);e.action&&(c[e.action]="");var f=e.url||e.Url,l=e.SignHost||He.call(this,{Bucket:e.Bucket,Region:e.Region,Url:f}),C=e.tracker,T=function V(xe){var he=t.options.SystemClockOffset;C&&C.setParams({signStartTime:new Date().getTime(),retryTimes:xe-1}),Ke.call(t,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:c,Headers:e.headers,SignHost:l,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:t.options.ForceSignHost},function(Ee,Pe){if(Ee){o(Ee);return}C&&C.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=Pe,ze.call(t,e,function(Ge,$e){C&&C.setParams({httpEndTime:new Date().getTime()}),Ge&&xe<2&&(he!==t.options.SystemClockOffset||Ye.call(t,Ge))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]),V(xe+1)):o(Ge,$e)})})};T(1)}function ze(e,o){var t=this,c=e.TaskId;if(!(c&&!t._isRunningTask(c))){var f=e.Bucket,l=e.Region,C=e.Key,T=e.method||"GET",V=e.Url||e.url,xe=e.body,he=e.rawBody;t.options.UseAccelerate&&(l="accelerate"),V=V||qe({ForcePathStyle:t.options.ForcePathStyle,protocol:t.options.Protocol,domain:t.options.Domain,bucket:f,region:l,object:C}),e.action&&(V=V+"?"+e.action),e.qsStr&&(V.indexOf("?")>-1?V=V+"&"+e.qsStr:V=V+"?"+e.qsStr);var Ee={method:T,url:V,headers:e.headers,qs:e.qs,body:xe},Pe="x-cos-security-token";if(n.isCIHost(V)&&(Pe="x-ci-security-token"),Ee.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(Ee.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(Ee.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(Ee.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(Ee.headers[Pe]=e.AuthData.SecurityToken),Ee.headers&&(Ee.headers=n.clearKey(Ee.headers)),Ee=n.clearKey(Ee),e.onProgress&&typeof e.onProgress=="function"){var Ge=xe&&(xe.size||xe.length)||0;Ee.onProgress=function(Fe){if(!(c&&!t._isRunningTask(c))){var Le=Fe?Fe.loaded:0;e.onProgress({loaded:Le,total:Ge})}}}e.onDownloadProgress&&(Ee.onDownloadProgress=e.onDownloadProgress),e.DataType&&(Ee.dataType=e.DataType),this.options.Timeout&&(Ee.timeout=this.options.Timeout),t.options.ForcePathStyle&&(Ee.pathStyle=t.options.ForcePathStyle),t.emit("before-send",Ee);var $e=Ee.url.includes("accelerate."),Ze=Ee.qs?Object.keys(Ee.qs).map(function(Fe){return"".concat(Fe,"=").concat(Ee.qs[Fe])}).join("&"):"",nt=Ze?Ee.url+"?"+Ze:Ee.url;e.tracker&&e.tracker.setParams({reqUrl:nt,accelerate:$e?"Y":"N"}),e.tracker&&e.tracker.parent&&e.tracker.parent.setParams({reqUrl:nt,accelerate:$e?"Y":"N"});var et=(t.options.Request||g)(Ee,function(Fe){if(Fe.error!=="abort"){var Le={options:Ee,error:tt,statusCode:We&&We.statusCode||0,headers:We&&We.headers||{},body:rt};t.emit("after-receive",Le),tt=Le.error,rt=Le.body,We={statusCode:Le.statusCode,headers:Le.headers},t.emit("after-receive",Fe);var We={statusCode:Fe.statusCode,statusMessage:Fe.statusMessage,headers:Fe.headers},tt=Fe.error,rt=Fe.body,dt,ot=function(ut,lt){if(c&&t.off("inner-kill-task",Ve),!dt){dt=!0;var ct={};We&&We.statusCode&&(ct.statusCode=We.statusCode),We&&We.headers&&(ct.headers=We.headers),ut?(ut=n.extend(ut||{},ct),o(ut,null)):(lt=n.extend(lt||{},ct),o(null,lt)),et=null}};if(tt)return ot(n.error(tt));var st=We.statusCode,ft=Math.floor(st/100)===2;if(he&&ft)return ot(null,{body:rt});var it;try{it=rt&&rt.indexOf("<")>-1&&rt.indexOf(">")>-1&&n.xml2json(rt)||{}}catch{it={}}var at=it&&it.Error;ft?ot(null,it):at?ot(n.error(new Error(at.Message),{code:at.Code,error:at})):st?ot(n.error(new Error(We.statusMessage),{code:""+st})):st&&ot(n.error(new Error("statusCode error")))}}),Ve=function Fe(Le){Le.TaskId===c&&(et&&et.abort&&et.abort(),t.off("inner-kill-task",Fe))};c&&t.on("inner-kill-task",Ve)}}var Qe={getService:$,putBucket:E,headBucket:j,getBucket:Y,deleteBucket:D,putBucketAcl:b,getBucketAcl:M,putBucketCors:J,getBucketCors:Q,deleteBucketCors:F,getBucketLocation:L,getBucketPolicy:G,putBucketPolicy:re,deleteBucketPolicy:ke,putBucketTagging:N,getBucketTagging:k,deleteBucketTagging:p,putBucketLifecycle:_,getBucketLifecycle:h,deleteBucketLifecycle:K,putBucketVersioning:I,getBucketVersioning:H,putBucketReplication:Se,getBucketReplication:B,deleteBucketReplication:q,putBucketWebsite:z,getBucketWebsite:Z,deleteBucketWebsite:oe,putBucketReferer:ce,getBucketReferer:ve,putBucketDomain:ye,getBucketDomain:ie,deleteBucketDomain:pe,putBucketOrigin:ge,getBucketOrigin:me,deleteBucketOrigin:fe,putBucketLogging:se,getBucketLogging:Te,putBucketInventory:De,getBucketInventory:Re,listBucketInventory:be,deleteBucketInventory:we,putBucketAccelerate:Ne,getBucketAccelerate:Ue,putBucketEncryption:Be,getBucketEncryption:ee,deleteBucketEncryption:R,getObject:ue,headObject:U,listObjectVersions:O,putObject:ae,deleteObject:Ae,getObjectAcl:x,putObjectAcl:u,optionsObject:v,putObjectCopy:s,deleteMultipleObject:A,restoreObject:P,putObjectTagging:te,getObjectTagging:ne,deleteObjectTagging:Ce,selectObjectContent:X,appendObject:Oe,uploadPartCopy:y,multipartInit:_e,multipartUpload:r,multipartComplete:a,multipartList:S,multipartListPart:w,multipartAbort:W,request:le,getObjectUrl:Xe,getAuth:Me};function Ie(e,o,t){n.each(["Cors","Acl"],function(c){if(e.slice(-c.length)===c){var f=e.slice(0,-c.length)+c.toUpperCase(),l=n.apiWrapper(e,o),C=!1;t[f]=function(){!C&&console.warn("warning: cos."+f+" has been deprecated. Please Use cos."+e+" instead."),C=!0,l.apply(this,arguments)}}})}d.exports.init=function(e,o){o.transferToTaskMethod(Qe,"putObject"),n.each(Qe,function(t,c){e.prototype[c]=n.apiWrapper(c,t),Ie(c,t,e.prototype)})}},"./src/cos.js":function(d,m,i){var g=i("./src/util.js"),n=i("./src/event.js"),$=i("./src/task.js"),E=i("./src/base.js"),j=i("./src/advance.js"),Y=i("./package.json"),D={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},b=function(J){this.options=g.extend(g.clone(D),J||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretKey format is incorrect. Please check")),g.isNode()&&(console.warn("warning: cos-js-sdk-v5 \u4E0D\u652F\u6301 nodejs \u73AF\u5883\u4F7F\u7528\uFF0C\u8BF7\u6539\u7528 cos-nodejs-sdk-v5\uFF0C\u53C2\u8003\u6587\u6863\uFF1A https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),n.init(this),$.init(this)};E.init(b,$),j.init(b,$),b.util={md5:g.md5,xml2json:g.xml2json,json2xml:g.json2xml},b.getAuthorization=g.getAuth,b.version=Y.version,d.exports=b},"./src/event.js":function(d,m){var i=function($){var E={},j=function(D){return!E[D]&&(E[D]=[]),E[D]};$.on=function(Y,D){Y==="task-list-update"&&console.warn('warning: Event "'+Y+'" has been deprecated. Please use "list-update" instead.'),j(Y).push(D)},$.off=function(Y,D){for(var b=j(Y),M=b.length-1;M>=0;M--)D===b[M]&&b.splice(M,1)},$.emit=function(Y,D){for(var b=j(Y).map(function(J){return J}),M=0;M<b.length;M++)b[M](D)}},g=function(){i(this)};d.exports.init=i,d.exports.EventProxy=g},"./src/session.js":function(d,m,i){var g=i("./src/util.js"),n="cos_sdk_upload_cache",$=30*24*3600,E,j,Y=function(){try{var F=JSON.parse(localStorage.getItem(n))}catch{}F||(F=[]),E=F},D=function(){try{E.length?localStorage.setItem(n,JSON.stringify(E)):localStorage.removeItem(n)}catch{}},b=function(){if(!E){Y.call(this);for(var F=!1,L=Math.round(Date.now()/1e3),re=E.length-1;re>=0;re--){var G=E[re][2];(!G||G+$<L)&&(E.splice(re,1),F=!0)}F&&D()}},M=function(){j||(j=setTimeout(function(){D(),j=null},400))},J={using:{},setUsing:function(F){J.using[F]=!0},removeUsing:function(F){delete J.using[F]},getFileId:function(F,L,re,G){return F.name&&F.size&&F.lastModifiedDate&&L?g.md5([F.name,F.size,F.lastModifiedDate,L,re,G].join("::")):null},getCopyFileId:function(F,L,re,G,ke){var N=L["content-length"],k=L.etag||"",p=L["last-modified"];return F&&re?g.md5([F,N,k,p,re,G,ke].join("::")):null},getUploadIdList:function(F){if(!F)return null;b.call(this);for(var L=[],re=0;re<E.length;re++)E[re][0]===F&&L.push(E[re][1]);return L.length?L:null},saveUploadId:function(F,L,re){if(b.call(this),!!F){for(var G=E.length-1;G>=0;G--){var ke=E[G];ke[0]===F&&ke[1]===L&&E.splice(G,1)}E.unshift([F,L,Math.round(Date.now()/1e3)]),E.length>re&&E.splice(re),M()}},removeUploadId:function(F){b.call(this),delete J.using[F];for(var L=E.length-1;L>=0;L--)E[L][1]===F&&E.splice(L,1);M()}};d.exports=J},"./src/task.js":function(d,m,i){var g=i("./src/session.js"),n=i("./src/util.js"),$={},E=function(D,b){$[b]=D[b],D[b]=function(M,J){M.SkipTask?$[b].call(this,M,J):this._addTask(b,M,J)}},j=function(D){var b=[],M={},J=0,Q=0,F=function(p){var _={id:p.id,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath,state:p.state,loaded:p.loaded,size:p.size,speed:p.speed,percent:p.percent,hashPercent:p.hashPercent,error:p.error};return p.FilePath&&(_.FilePath=p.FilePath),p._custom&&(_._custom=p._custom),_},L=function(){var k,p=function(){k=0,D.emit("task-list-update",{list:n.map(b,F)}),D.emit("list-update",{list:n.map(b,F)})};return function(){k||(k=setTimeout(p))}}(),re=function(){if(!(b.length<=D.options.UploadQueueSize)){for(var p=0;p<Q&&p<b.length&&b.length>D.options.UploadQueueSize;){var _=b[p].state==="waiting"||b[p].state==="checking"||b[p].state==="uploading";!b[p]||!_?(M[b[p].id]&&delete M[b[p].id],b.splice(p,1),Q--):p++}L()}},G=function k(){if(!(J>=D.options.FileParallelLimit)){for(;b[Q]&&b[Q].state!=="waiting";)Q++;if(!(Q>=b.length)){var p=b[Q];Q++,J++,p.state="checking",p.params.onTaskStart&&p.params.onTaskStart(F(p)),!p.params.UploadData&&(p.params.UploadData={});var _=n.formatParams(p.api,p.params);$[p.api].call(D,_,function(h,K){!D._isRunningTask(p.id)||((p.state==="checking"||p.state==="uploading")&&(p.state=h?"error":"success",h&&(p.error=h),J--,L(),k(),p.callback&&p.callback(h,K),p.state==="success"&&(p.params&&(delete p.params.UploadData,delete p.params.Body,delete p.params),delete p.callback)),re())}),L(),setTimeout(k)}}},ke=function(p,_){var h=M[p];if(!!h){var K=h&&h.state==="waiting",I=h&&(h.state==="checking"||h.state==="uploading");if(_==="canceled"&&h.state!=="canceled"||_==="paused"&&K||_==="paused"&&I){if(_==="paused"&&h.params.Body&&typeof h.params.Body.pipe=="function"){console.error("stream not support pause");return}h.state=_,D.emit("inner-kill-task",{TaskId:p,toState:_});try{var H=h&&h.params&&h.params.UploadData.UploadId}catch{}_==="canceled"&&H&&g.removeUsing(H),L(),I&&(J--,G()),_==="canceled"&&(h.params&&(delete h.params.UploadData,delete h.params.Body,delete h.params),delete h.callback)}re()}};D._addTasks=function(k){n.each(k,function(p){D._addTask(p.api,p.params,p.callback,!0)}),L()};var N=!0;D._addTask=function(k,p,_,h){p=n.formatParams(k,p);var K=n.uuid();p.TaskId=K,p.onTaskReady&&p.onTaskReady(K),p.TaskReady&&(p.TaskReady(K),N&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),N=!1);var I={params:p,callback:_,api:k,index:b.length,id:K,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:p._custom},H=p.onHashProgress;p.onHashProgress=function(B){!D._isRunningTask(I.id)||(I.hashPercent=B.percent,H&&H(B),L())};var Se=p.onProgress;return p.onProgress=function(B){!D._isRunningTask(I.id)||(I.state==="checking"&&(I.state="uploading"),I.loaded=B.loaded,I.speed=B.speed,I.percent=B.percent,Se&&Se(B),L())},n.getFileSize(k,p,function(B,q){if(B)return _(n.error(B));M[K]=I,b.push(I),I.size=q,!h&&L(),G(),re()}),K},D._isRunningTask=function(k){var p=M[k];return!!(p&&(p.state==="checking"||p.state==="uploading"))},D.getTaskList=function(){return n.map(b,F)},D.cancelTask=function(k){ke(k,"canceled")},D.pauseTask=function(k){ke(k,"paused")},D.restartTask=function(k){var p=M[k];p&&(p.state==="paused"||p.state==="error")&&(p.state="waiting",L(),Q=Math.min(Q,p.index),G())},D.isUploadRunning=function(){return J||Q<b.length}};d.exports.transferToTaskMethod=E,d.exports.init=j},"./src/tracker.js":function(d,m,i){var g=i("./node_modules/@babel/runtime/helpers/classCallCheck.js"),n=i("./node_modules/@babel/runtime/helpers/createClass.js"),$=i("./node_modules/@babel/runtime/helpers/typeof.js"),E=i("./package.json"),j=i("./lib/beacon.min.js"),Y=null,D=function(p){return Y||(Y=new j({appkey:"0AND0VEVB24UBGDU",versionCode:E.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:p,sessionDuration:60*1e3})),Y},b={getUid:function(){var p=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return p()+p()+"-"+p()+"-"+p()+"-"+p()+"-"+p()+p()+p()},getNetType:function(){if((typeof navigator>"u"?"undefined":$(navigator))==="object"){var p=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(p==null?void 0:p.type)||(p==null?void 0:p.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator>"u"?"undefined":$(navigator))!=="object")return"unknown os";var p=navigator.userAgent.toLowerCase(),_=/macintosh|mac os x/i.test(navigator.userAgent);return p.indexOf("win32")>=0||p.indexOf("wow32")>=0?"win32":p.indexOf("win64")>=0||p.indexOf("wow64")>=0?"win64":_?"mac":"unknown os"},isMobile:function(){var p=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":$(navigator))==="object"&&navigator.userAgent.match(p))},isAndroid:function(){var p=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":$(navigator))==="object"&&navigator.userAgent.match(p))},isIOS:function(){var p=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":$(navigator))==="object"&&navigator.userAgent.match(p))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator>"u"?"undefined":$(navigator))!=="object")return"unknown device";var p=navigator.userAgent.toLowerCase();if(p.includes("app/tencent_wemeet"))return"tencent_wemeet";if(p.indexOf("maxthon")>=0){var _=p.match(/maxthon\/([\d.]+)/),h=_&&_[1]||"";return"\u50B2\u6E38\u6D4F\u89C8\u5668 ".concat(h).trim()}if(p.indexOf("qqbrowser")>=0){var K=p.match(/qqbrowser\/([\d.]+)/),I=K&&K[1]||"";return"QQ\u6D4F\u89C8\u5668 ".concat(I).trim()}if(p.indexOf("se 2.x")>=0)return"\u641C\u72D7\u6D4F\u89C8\u5668";if(p.indexOf("wxwork")>=0)return"\u5FAE\u4FE1\u5185\u7F6E\u6D4F\u89C8\u5668";if(p.indexOf("msie")>=0){var H=p.match(/msie ([\d.]+)/),Se=H&&H[1]||"";return"IE ".concat(Se).trim()}if(p.indexOf("firefox")>=0){var B=p.match(/firefox\/([\d.]+)/),q=B&&B[1]||"";return"Firefox ".concat(q).trim()}if(p.indexOf("chrome")>=0){var z=p.match(/chrome\/([\d.]+)/),Z=z&&z[1]||"";return"Chrome ".concat(Z).trim()}if(p.indexOf("opera")>=0){var oe=p.match(/opera.([\d.]+)/),ce=oe&&oe[1]||"";return"Opera ".concat(ce).trim()}if(p.indexOf("safari")>=0){var ve=p.match(/version\/([\d.]+)/),ye=ve&&ve[1]||"";return"Safari ".concat(ye).trim()}if(p.indexOf("edge")>=0){var ie=p.match(/edge\/([\d.]+)/),pe=ie&&ie[1]||"";return"edge ".concat(pe).trim()}return p.substr(0,200)}},M={isMobile:b.isMobile(),isBrowser:!b.isMobile(),mobileOsType:b.isAndroid()?"android":b.isIOS?"ios":"other_mobile",pcOsType:b.getOsType()},J={deviceType:M.isMobile?"mobile":M.isBrowser?"browser":"unknown",devicePlatform:M.isMobile?M.mobileOsType:M.pcOsType,deviceName:b.getDeviceName()},Q=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],F=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(Q),L=["getObject"];function re(k){return F.includes(k)?"cos_upload":L.includes(k)?"cos_download":"base_service"}function G(k){return k.replace(/([A-Z])/g,"_$1").toLowerCase()}function ke(k){var p={},_=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],h=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],K=k.result==="Success"?h:_;for(var I in k)if(!!K.includes(I)){var H=G(I);p[H]=k[I]}return p}var N=function(){function k(p){g(this,k);var _=p.parent,h=p.traceId,K=p.bucket,I=p.region,H=p.apiName,Se=p.fileKey,B=p.fileSize,q=p.accelerate,z=p.customId,Z=p.delay,oe=p.deepTracker,ce=K&&K.substr(K.lastIndexOf("-")+1)||"";this.parent=_,this.deepTracker=oe,this.params={cossdkVersion:E.version,region:I,networkType:"",host:"",accelerate:q?"Y":"N",requestPath:Se||"",size:B||-1,httpMd5:0,httpSign:0,httpFull:0,name:H||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:h||b.getUid(),bucket:K,appid:ce,partNumber:0,retryTimes:0,reqUrl:"",customId:z||"",deviceType:J.deviceType,devicePlatform:J.devicePlatform,deviceName:J.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=D(Z)}return n(k,[{key:"formatResult",value:function(_,h){var K,I,H,Se,B,q,z=new Date().getTime(),Z=z-this.params.startTime,oe=b.getNetType(),ce=_?(_==null?void 0:_.code)||(_==null||(K=_.error)===null||K===void 0?void 0:K.code)||(_==null||(I=_.error)===null||I===void 0?void 0:I.Code):"",ve=_?(_==null?void 0:_.message)||(_==null||(H=_.error)===null||H===void 0?void 0:H.message)||(_==null||(Se=_.error)===null||Se===void 0?void 0:Se.Message):"",ye=_?(_==null?void 0:_.resource)||(_==null||(B=_.error)===null||B===void 0?void 0:B.resource)||(_==null||(q=_.error)===null||q===void 0?void 0:q.Resource):"",ie=_?_==null?void 0:_.statusCode:h.statusCode,pe=_?(_==null?void 0:_.headers)&&(_==null?void 0:_.headers["x-cos-request-id"]):(h==null?void 0:h.headers)&&(h==null?void 0:h.headers["x-cos-request-id"]),ge=_?pe?"Server":"Client":"";if(Object.assign(this.params,{tookTime:Z,networkType:oe,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:_?"Fail":"Success",errorType:ge,errorCode:ce,errorStatusCode:ie,errorMessage:ve,errorServiceName:ye,errorRequestId:pe}),_&&(!ce||!ve)&&(this.params.fullError=_?JSON.stringify(_):""),this.params.name==="getObject"&&(this.params.size=h?h.headers&&h.headers["content-length"]:-1),this.params.reqUrl)try{var me=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=me[2]}catch{this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(_){Object.assign(this.params,_)}},{key:"sendEvents",value:function(){if(!(Q.includes(this.params.name)&&!this.deepTracker)){var _=re(this.params.name),h=ke(this.params);this.params.delay===0?this.beacon.onDirectUserAction(_,h):this.beacon.onUserAction(_,h),this.destroy()}}},{key:"generateSubTracker",value:function(_){return Object.assign(_,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.params.delay}),new k(_)}},{key:"destroy",value:function(){this.beacon=null,this.params={}}}]),k}();d.exports=N},"./src/util.js":function(d,m,i){(function(g){var n=i("./node_modules/@babel/runtime/helpers/typeof.js"),$=i("./lib/md5.js"),E=i("./lib/crypto.js"),j=i("./lib/xml2json.js"),Y=i("./lib/json2xml.js"),D=i("./src/tracker.js");function b(ee){return encodeURIComponent(ee).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function M(ee,R){var U=[];for(var O in ee)ee.hasOwnProperty(O)&&U.push(R?b(O).toLowerCase():O);return U.sort(function(ue,ae){return ue=ue.toLowerCase(),ae=ae.toLowerCase(),ue===ae?0:ue>ae?1:-1})}var J=function(R,U){var O,ue,ae,Ae=[],x=M(R);for(O=0;O<x.length;O++)ue=x[O],ae=R[ue]===void 0||R[ue]===null?"":""+R[ue],ue=U?b(ue).toLowerCase():b(ue),ae=b(ae)||"",Ae.push(ue+"="+ae);return Ae.join("&")},Q=["content-disposition","content-encoding","content-length","content-md5","expect","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","response-cache-control","response-content-disposition","response-content-encoding","response-content-language","response-content-type","response-expires","transfer-encoding","versionid"],F=function(R){var U={};for(var O in R){var ue=O.toLowerCase();(ue.indexOf("x-cos-")>-1||Q.indexOf(ue)>-1)&&(U[O]=R[O])}return U},L=function(R){R=R||{};var U=R.SecretId,O=R.SecretKey,ue=R.KeyTime,ae=(R.method||R.Method||"get").toLowerCase(),Ae=B(R.Query||R.params||{}),x=F(B(R.Headers||R.headers||{})),u=R.Key||"",v;R.UseRawKey?v=R.Pathname||R.pathname||"/"+u:(v=R.Pathname||R.pathname||u,v.indexOf("/")!==0&&(v="/"+v));var s=R.ForceSignHost!==!1;if(!x.Host&&!x.host&&R.Bucket&&R.Region&&s&&(x.Host=R.Bucket+".cos."+R.Region+".myqcloud.com"),!U)throw new Error("missing param SecretId");if(!O)throw new Error("missing param SecretKey");var y=Math.round(Re(R.SystemClockOffset)/1e3)-1,A=y,P=R.Expires||R.expires;P===void 0?A+=900:A+=P*1||0;var te="sha1",ne=U,Ce=ue||y+";"+A,X=ue||y+";"+A,_e=M(x,!0).join(";").toLowerCase(),r=M(Ae,!0).join(";").toLowerCase(),a=E.HmacSHA1(X,O).toString(),S=[ae,v,Be.obj2str(Ae,!0),Be.obj2str(x,!0),""].join(`
`),w=["sha1",Ce,E.SHA1(S).toString(),""].join(`
`),W=E.HmacSHA1(w,a).toString(),le=["q-sign-algorithm="+te,"q-ak="+ne,"q-sign-time="+Ce,"q-key-time="+X,"q-header-list="+_e,"q-url-param-list="+r,"q-signature="+W].join("&");return le},re=function(R,U,O){var ue=U/8,ae=R.slice(O,O+ue);return new Uint8Array(ae).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[U](ae)[0]},G=function(R,U,O,ue){var ae=R.slice(U,O),Ae="";return new Uint8Array(ae).forEach(function(x){Ae+=String.fromCharCode(x)}),ue&&(Ae=decodeURIComponent(escape(Ae))),Ae},ke=function(R){for(var U={},O=G(R),ue={records:[]};R.byteLength;){var ae=re(R,32,0),Ae=re(R,32,4),x=ae-Ae-16,u=0,v;for(R=R.slice(12);u<Ae;){var s=re(R,8,u),y=G(R,u+1,u+1+s),A=re(R,16,u+s+2),P=G(R,u+s+4,u+s+4+A);U[y]=P,u+=s+4+A}if(U[":event-type"]==="Records")v=G(R,u,u+x,!0),ue.records.push(v);else if(U[":event-type"]==="Stats")v=G(R,u,u+x,!0),ue.stats=Be.xml2json(v).Stats;else if(U[":event-type"]==="error"){var te=U[":error-code"],ne=U[":error-message"],Ce=new Error(ne);Ce.message=ne,Ce.name=Ce.code=te,ue.error=Ce}R=R.slice(u+x+4)}return{payload:ue.records.join(""),body:O}},N=function(R){var U=this.options.CopySourceParser;if(U)return U(R);var O=R.match(/^([^.]+-\d+)\.cos(v6|-cdc)?\.([^.]+)\.myqcloud\.com\/(.+)$/);return O?{Bucket:O[1],Region:O[3],Key:O[4]}:null},k=function(){},p=function(R){var U={};for(var O in R)R.hasOwnProperty(O)&&R[O]!==void 0&&R[O]!==null&&(U[O]=R[O]);return U},_=function(R,U){var O,ue=new FileReader;FileReader.prototype.readAsBinaryString?(O=FileReader.prototype.readAsBinaryString,ue.onload=function(){U(this.result)}):FileReader.prototype.readAsArrayBuffer?O=function(Ae){var x="",u=new FileReader;u.onload=function(v){for(var s=new Uint8Array(u.result),y=s.byteLength,A=0;A<y;A++)x+=String.fromCharCode(s[A]);U(x)},u.readAsArrayBuffer(Ae)}:console.error("FileReader not support readAsBinaryString"),O.call(ue,R)},h=function(){var ee=function(O,ue){O=O.split("."),ue=ue.split(".");for(var ae=0;ae<ue.length;ae++)if(O[ae]!==ue[ae])return parseInt(O[ae])>parseInt(ue[ae])?1:-1;return 0},R=function(O){if(!O)return!1;var ue=(O.match(/Chrome\/([.\d]+)/)||[])[1],ae=(O.match(/QBCore\/([.\d]+)/)||[])[1],Ae=(O.match(/QQBrowser\/([.\d]+)/)||[])[1],x=ue&&ee(ue,"53.0.2785.116")<0&&ae&&ee(ae,"3.53.991.400")<0&&Ae&&ee(Ae,"9.0.2524.400")<=0||!1;return x};return R(typeof navigator<"u"&&navigator.userAgent)}(),K=function(R,U,O,ue,ae){var Ae;if(R.slice?Ae=R.slice(U,O):R.mozSlice?Ae=R.mozSlice(U,O):R.webkitSlice&&(Ae=R.webkitSlice(U,O)),ue&&h){var x=new FileReader;x.onload=function(u){Ae=null,ae(new Blob([x.result]))},x.readAsArrayBuffer(Ae)}else ae(Ae)},I=function(R,U,O,ue){O=O||k,R?typeof U=="string"?O(Be.md5(U,!0)):Blob&&U instanceof Blob?Be.getFileMd5(U,function(ae,Ae){O(Ae)},ue):O():O()},H=1024*1024,Se=function(R,U,O){var ue=R.size,ae=0,Ae=$.getCtx(),x=function u(v){if(v>=ue){var s=Ae.digest("hex");U(null,s);return}var y=Math.min(ue,v+H);Be.fileSlice(R,v,y,!1,function(A){_(A,function(P){A=null,Ae=Ae.update(P,!0),ae+=P.length,P=null,O&&O({loaded:ae,total:ue,percent:Math.round(ae/ue*1e4)/1e4}),u(v+H)})})};x(0)};function B(ee){return ye(ee,function(R){return n(R)==="object"&&R!==null?B(R):R})}function q(ee,R,U){return ee&&R in ee?ee[R]:U}function z(ee,R){return ve(R,function(U,O){ee[O]=R[O]}),ee}function Z(ee){return ee instanceof Array}function oe(ee,R){for(var U=!1,O=0;O<ee.length;O++)if(R===ee[O]){U=!0;break}return U}function ce(ee){return Z(ee)?ee:[ee]}function ve(ee,R){for(var U in ee)ee.hasOwnProperty(U)&&R(ee[U],U)}function ye(ee,R){var U=Z(ee)?[]:{};for(var O in ee)ee.hasOwnProperty(O)&&(U[O]=R(ee[O],O));return U}function ie(ee,R){var U=Z(ee),O=U?[]:{};for(var ue in ee)ee.hasOwnProperty(ue)&&R(ee[ue],ue)&&(U?O.push(ee[ue]):O[ue]=ee[ue]);return O}var pe=function(R){var U,O,ue,ae="";for(U=0,O=R.length/2;U<O;U++)ue=parseInt(R[U*2]+R[U*2+1],16),ae+=String.fromCharCode(ue);return btoa(ae)},ge=function(){var R=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return R()+R()+"-"+R()+"-"+R()+"-"+R()+"-"+R()+R()+R()},me=function(R,U){var O=U.Bucket,ue=U.Region,ae=U.Key,Ae=this.options.Domain,x=!Ae||typeof Ae=="string"&&Ae.indexOf("{Bucket}")>-1,u=!Ae||typeof Ae=="string"&&Ae.indexOf("{Region}")>-1;if(R.indexOf("Bucket")>-1||R==="deleteMultipleObject"||R==="multipartList"||R==="listObjectVersions"){if(x&&!O)return"Bucket";if(u&&!ue)return"Region"}else if(R.indexOf("Object")>-1||R.indexOf("multipart")>-1||R==="sliceUploadFile"||R==="abortUploadTask"){if(x&&!O)return"Bucket";if(u&&!ue)return"Region";if(!ae)return"Key"}return!1},fe=function(R,U){if(U=z({},U),R!=="getAuth"&&R!=="getV4Auth"&&R!=="getObjectUrl"){var O=U.Headers||{};if(U&&n(U)==="object"){(function(){for(var ae in U)U.hasOwnProperty(ae)&&ae.indexOf("x-cos-")>-1&&(O[ae]=U[ae])})();var ue={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"};Be.each(ue,function(ae,Ae){U[ae]!==void 0&&(O[Ae]=U[ae])}),U.Headers=p(O)}}return U},se=function(R,U){return function(O,ue){var ae=this;typeof O=="function"&&(ue=O,O={}),O=fe(R,O);var Ae;if(ae.options.EnableTracker)if(O.calledBySdk==="sliceUploadFile")Ae=O.tracker&&O.tracker.generateSubTracker({apiName:R});else if(["uploadFile","uploadFiles"].includes(R))Ae=null;else{var x=-1;O.Body&&(x=typeof O.Body=="string"?O.Body.length:O.Body.size||O.Body.byteLength||-1),Ae=new D({bucket:O.Bucket,region:O.Region,apiName:R,fileKey:O.Key,fileSize:x,deepTracker:ae.options.DeepTracker,customId:ae.options.CustomId,delay:ae.options.TrackerDelay})}O.tracker=Ae;var u=function(ne){return ne&&ne.headers&&(ne.headers["x-cos-request-id"]&&(ne.RequestId=ne.headers["x-cos-request-id"]),ne.headers["x-ci-request-id"]&&(ne.RequestId=ne.headers["x-ci-request-id"]),ne.headers["x-cos-version-id"]&&(ne.VersionId=ne.headers["x-cos-version-id"]),ne.headers["x-cos-delete-marker"]&&(ne.DeleteMarker=ne.headers["x-cos-delete-marker"])),ne},v=function(ne,Ce){Ae&&Ae.formatResult(ne,Ce),ue&&ue(u(ne),u(Ce))},s=function(){if(R!=="getService"&&R!=="abortUploadTask"){var ne=me.call(ae,R,O);if(ne)return"missing param "+ne;if(O.Region){if(ae.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(O.Region))return"Region format error."}else{if(O.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(O.Region))return"Region format error."}!ae.options.CompatibilityMode&&O.Region.indexOf("-")===-1&&O.Region!=="yfb"&&O.Region!=="default"&&O.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(O.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(O.Bucket))if(O.AppId)O.Bucket=O.Bucket+"-"+O.AppId;else if(ae.options.AppId)O.Bucket=O.Bucket+"-"+ae.options.AppId;else return'Bucket should format as "test-1250000000".';O.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete O.AppId)}!ae.options.UseRawKey&&O.Key&&O.Key.substr(0,1)==="/"&&(O.Key=O.Key.substr(1))}},y=s(),A=R==="getAuth"||R==="getObjectUrl";if(typeof Promise=="function"&&!A&&!ue)return new Promise(function(te,ne){if(ue=function(X,_e){X?ne(X):te(_e)},y)return v(Be.error(new Error(y)));U.call(ae,O,v)});if(y)return v(Be.error(new Error(y)));var P=U.call(ae,O,v);if(A)return P}},Te=function(R,U){var O=this,ue=0,ae=0,Ae=Date.now(),x,u;function v(){if(u=0,U&&typeof U=="function"){x=Date.now();var s=Math.max(0,Math.round((ae-ue)/((x-Ae)/1e3)*100)/100)||0,y;ae===0&&R===0?y=1:y=Math.floor(ae/R*100)/100||0,Ae=x,ue=ae;try{U({loaded:ae,total:R,speed:s,percent:y})}catch{}}}return function(s,y){if(s&&(ae=s.loaded,R=s.total),y)clearTimeout(u),v();else{if(u)return;u=setTimeout(v,O.options.ProgressInterval)}}},De=function(R,U,O){var ue;if(typeof U.Body=="string"?U.Body=new Blob([U.Body],{type:"text/plain"}):U.Body instanceof ArrayBuffer&&(U.Body=new Blob([U.Body])),U.Body&&(U.Body instanceof Blob||U.Body.toString()==="[object File]"||U.Body.toString()==="[object Blob]"))ue=U.Body.size;else{O(Be.error(new Error("params body format error, Only allow File|Blob|String.")));return}U.ContentLength=ue,O(null,ue)},Re=function(R){return Date.now()+(R||0)},be=function(R,U){var O=R;return R.message=R.message||null,typeof U=="string"?(R.error=U,R.message=U):n(U)==="object"&&U!==null&&(z(R,U),(U.code||U.name)&&(R.code=U.code||U.name),U.message&&(R.message=U.message),U.stack&&(R.stack=U.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(R,"name",{writable:!0,enumerable:!1}),Object.defineProperty(R,"message",{enumerable:!0})),R.name=U&&U.name||R.name||R.code||"Error",R.code||(R.code=R.name),R.error||(R.error=B(O)),R},we=function(){return(typeof globalThis>"u"?"undefined":n(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},Ne=function(){return(typeof window>"u"?"undefined":n(window))!=="object"&&(typeof g>"u"?"undefined":n(g))==="object"&&!0&&!we()},Ue=function(R){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(R)},Be={noop:k,formatParams:fe,apiWrapper:se,xml2json:j,json2xml:Y,md5:$,clearKey:p,fileSlice:K,getBodyMd5:I,getFileMd5:Se,binaryBase64:pe,extend:z,isArray:Z,isInArray:oe,makeArray:ce,each:ve,map:ye,filter:ie,clone:B,attr:q,uuid:ge,camSafeUrlEncode:b,throttleOnProgress:Te,getFileSize:De,getSkewTime:Re,error:be,obj2str:J,getAuth:L,parseSelectPayload:ke,getSourceParams:N,isBrowser:!0,isNode:Ne,isCIHost:Ue};d.exports=Be}).call(this,i("./node_modules/process/browser.js"))}})})})(cosJsSdkV5);const COS=getDefaultExportFromCjs(cosJsSdkV5.exports),cosf=new COS({SecretId:"AKIDiGYZJmytYw3tTlmWzC8nBJAj12mFRN3S",SecretKey:"92f1II2tYy83j9JDrFNN9fwwg9LGvJQG"}),downloadByUrl=async d=>{!d.path||cosf.getObjectUrl({Bucket:"gcloud-1303456836",Region:"ap-chengdu",Key:d.path.replace("https://gcloud-1303456836.cos.ap-chengdu.myqcloud.com/",""),Sign:!0},function(m,i){if(m)return onError("\u51FA\u9519\u4E86");const g=i.Url+(i.Url.indexOf("?")>-1?"&":"?")+"response-content-disposition=attachment";coreDownload(g,d.name)})};function coreDownload(d,m){getBlob(d,function(i){saveAs(i,m)})}function getBlob(d,m){const i=new XMLHttpRequest;i.open("GET",d,!0),i.responseType="blob",i.onload=function(){i.status===200&&m(i.response)},i.send()}function saveAs(d,m){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(d,m);else{const i=document.createElement("a"),g=document.querySelector("body");i.href=window.URL.createObjectURL(d),i.download=m,i.style.display="none",g==null||g.appendChild(i),i.click(),g==null||g.removeChild(i),window.URL.revokeObjectURL(i.href)}}const _hoisted_1$1=createTextVNode(" \u5206\u4EAB "),_hoisted_2$1={class:""},_hoisted_3$1={class:"flex items-center text-sm"},_hoisted_4$1={class:"mx-2"},_sfc_main$1=defineComponent({__name:"index",props:{file:{type:Object,required:!0}},setup(d){const m=d,i=defineAsyncComponent(()=>__vitePreload(()=>import("./index.71bf65ec.js").then($=>$.i),["index.71bf65ec.js","Scrollbar.0a2e91cc.js","index.af57445c.js","index.04c61e6b.js","color-to-class.0332f98b.js","use-is-composing.892e6671.js","index.20db2190.js"],import.meta.url)),g=ref(!1),n=()=>{console.log(m.file),g.value=!0};return toRefs(m),($,E)=>(openBlock(),createBlock(unref(i),{show:g.value,"onUpdate:show":E[0]||(E[0]=j=>g.value=j),width:"60%"},{trigger:withCtx(()=>[createVNode(unref(NButton),{class:"w-full",type:"success",circle:"",size:"small",onClick:n},{default:withCtx(()=>[_hoisted_1$1]),_:1})]),header:withCtx(()=>[createTextVNode(" \u6B63\u5728\u5206\u4EAB"+toDisplayString(d.file.name),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createVNode(unref(NTag),{type:"info"},{default:withCtx(()=>[createTextVNode(toDisplayString(d.file.type),1)]),_:1}),createBaseVNode("p",_hoisted_4$1,toDisplayString(d.file.name),1),createBaseVNode("p",null,toDisplayString(unref(transformSize)(d.file.size)),1)])])]),_:1},8,["show"]))}}),fileDetail_vue_vue_type_style_index_0_scoped_true_lang="",_hoisted_1={class:"file-detail w-52 shadow rounded"},_hoisted_2=["src"],_hoisted_3={class:"absolute hidden"},_hoisted_4={class:"flex justify-start items-center flex-wrap mt-2"},_hoisted_5={key:4},_hoisted_6={class:"flex"},_hoisted_7=createTextVNode(" \u4E0B\u8F7D "),_hoisted_8={class:"mt-2"},_hoisted_9=createTextVNode(" \u79FB\u52A8\u5230 "),_hoisted_10={key:1,class:"text-xs text-center"},_hoisted_11=createTextVNode(" \u5220\u9664 "),_sfc_main=defineComponent({__name:"file-detail",props:{file:{type:Object,required:!0,default:{}}},setup(d){const m=d,i=defineAsyncComponent(()=>__vitePreload(()=>import("./file-edit.10a2e745.js"),["file-edit.10a2e745.js","index.af57445c.js","Input.56277aaa.js","index.04c61e6b.js","color-to-class.0332f98b.js","index.a1c9fab8.js","Eye.6d434294.js"],import.meta.url)),g=defineAsyncComponent(()=>__vitePreload(()=>import("./index.e1e3af69.js"),["index.e1e3af69.js","index.c8008c01.css","index.e26a272a.js","index.af57445c.js","Tree.d02f8d95.js","Checkbox.9d50066c.js","index.04c61e6b.js","color-to-class.0332f98b.js","index.f31c340f.js","index.959f2e3a.css","robot.97cc1244.js","date.454365cc.js","Scrollbar.0a2e91cc.js","index.a1c9fab8.js","Eye.6d434294.js","Tag.1b72b5af.js","Folder.191c0997.js"],import.meta.url)),n=defineAsyncComponent(()=>__vitePreload(()=>import("./index.8cb903a3.js"),["index.8cb903a3.js","index.e2d48746.css","index.af57445c.js","index.71bf65ec.js","Scrollbar.0a2e91cc.js","index.04c61e6b.js","color-to-class.0332f98b.js","use-is-composing.892e6671.js","index.20db2190.js"],import.meta.url)),$=useFileOutsideStore(),{onDeleteFile:E,onUpdateFileName:j,onMoveFile:Y}=useFiles(),D=ref(null),b=ref(!1),M=reactive({identity:"",parent_identity:"",file:{}}),J=["\u6587\u4EF6\u5939","\u56FE\u7247","\u97F3\u9891\u6587\u4EF6","\u89C6\u9891\u6587\u4EF6","\u538B\u7F29\u6587\u4EF6"],Q=k=>{D.value=k},F=k=>{D.value&&k&&k!==D.value.name&&D.value.identity&&(D.value.name=k,j({identity:D.value.identity,name:k}))},L=()=>{E([m.file])},re=k=>{k.type!=="\u6587\u4EF6\u5939"?downloadByUrl(k):onInfo("\u5F00\u53D1\u4E2D~")},G=k=>{b.value=!0,M.identity=k.identity,M.file=k},ke=({option:k})=>({async onDblclick(){M.parent_identity=k.identity,b.value=!1,M.parent_identity&&M.identity&&k.isFolder&&await Y(M)}}),{origin_folders:N}=storeToRefs($);return toRefs(m),(k,p)=>(openBlock(),createElementBlock("div",_hoisted_1,[createVNode(unref(NScrollbar),{style:{"max-height":"calc(100vh - 60px)"}},{default:withCtx(()=>[createVNode(unref(NCard),{class:"leading-4",hoverable:"",bordered:!1,"content-style":"background-color: #008f8f; border-radius: 5px;color: white;",onClick:p[3]||(p[3]=_=>Q(d.file))},{default:withCtx(()=>{var _;return[d.file.type==="\u56FE\u7247"?(openBlock(),createBlock(unref(NImage),{key:0,class:"shadow-md rounded",width:"160",src:d.file.path,"fallback-src":"./src/assets/logo.png"},null,8,["src"])):d.file.type==="\u89C6\u9891\u6587\u4EF6"?(openBlock(),createBlock(unref(n),{key:1,data:d.file,src:d.file.path},null,8,["data","src"])):d.file.type==="\u97F3\u9891\u6587\u4EF6"?(openBlock(),createElementBlock("audio",{key:2,class:"shadow-md rounded",style:{width:"160px",height:"30px"},src:d.file.path,controls:""},null,8,_hoisted_2)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3,[createVNode(unref(NSkeleton),{width:"160px",height:"83px",repeat:1,sharp:!1})]),createBaseVNode("div",_hoisted_4,[d.file.type==="\u6587\u4EF6\u5939"&&d.file.path===""&&d.file.repository_identity===""?(openBlock(),createBlock(unref(Folder),{key:0,class:"w-5 text-primary mr-2"})):J.includes(d.file.type||"")?d.file.type==="\u538B\u7F29\u6587\u4EF6"?(openBlock(),createBlock(unref(FileTraySharp),{key:2,class:"w-5 text-gray-100 mr-2"})):createCommentVNode("",!0):(openBlock(),createBlock(unref(DocumentTextOutline),{key:1,class:"w-5 text-gray-100 mr-2"})),d.file.type==="\u6587\u4EF6\u5939"?(openBlock(),createBlock(unref(i),{key:3,class:"inline-block text-base flex-1",value:d.file.name,"on-update-value":F},null,8,["value"])):(openBlock(),createElementBlock("span",_hoisted_5,toDisplayString(d.file.name),1))]),createBaseVNode("p",null,"\u6587\u4EF6\u5927\u5C0F\uFF1A"+toDisplayString(unref(transformSize)(d.file.size)),1),withDirectives(createBaseVNode("p",null,"\u6587\u4EF6\u6570\u91CF\uFF1A"+toDisplayString((_=d.file.children)==null?void 0:_.length),513),[[vShow,d.file.isFolder]]),createBaseVNode("p",null,"\u6587\u4EF6\u7C7B\u578B\uFF1A"+toDisplayString(d.file.type),1),withDirectives(createBaseVNode("p",null,"\u4FEE\u6539\u65E5\u671F\uFF1A"+toDisplayString(d.file.updated_at),513),[[vShow,d.file.updated_at]]),createBaseVNode("div",_hoisted_6,[createVNode(unref(NButton),{class:"w-1/2",type:"primary",circle:"",size:"small",onClick:p[0]||(p[0]=withModifiers(h=>re(d.file),["prevent"]))},{default:withCtx(()=>[_hoisted_7]),_:1}),createVNode(_sfc_main$1,{file:d.file,class:"ml-2 w-1/2"},null,8,["file"])]),createBaseVNode("div",_hoisted_8,[createVNode(unref(NPopover),{show:b.value,placement:"bottom",trigger:"manual",onClickoutside:p[2]||(p[2]=h=>b.value=!1)},{trigger:withCtx(()=>[createVNode(unref(NButton),{class:"w-full",type:"info",circle:"",size:"small",onClick:p[1]||(p[1]=h=>G(d.file))},{default:withCtx(()=>[_hoisted_9]),_:1})]),default:withCtx(()=>[unref(N).length>0?(openBlock(),createBlock(unref(g),{key:0,data:unref(N),"node-props":ke},null,8,["data"])):(openBlock(),createElementBlock("div",_hoisted_10,"\u8BF7\u5148\u65B0\u5EFA\u6587\u4EF6\u5939"))]),_:1},8,["show"]),createVNode(unref(NButton),{class:"mt-2 w-full",type:"warning",circle:"",size:"small",onClick:L},{default:withCtx(()=>[_hoisted_11]),_:1})])]}),_:1}),createVNode(_sfc_main$2,{class:"w-full h-48"})]),_:1})]))}}),fileDetail=_export_sfc(_sfc_main,[["__scopeId","data-v-4f05944c"]]);export{fileDetail as default};
